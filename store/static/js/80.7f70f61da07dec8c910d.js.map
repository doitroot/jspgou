{"version":3,"sources":["webpack:///src/views/customer/consult/update.vue","webpack:///./src/views/customer/consult/update.vue?bfec","webpack:///./src/views/customer/consult/update.vue"],"names":["consult_update","mixins","mixins_form","data","formData","loading","answerContent","type","this","$route","query","methods","getFormData","id","_this","Object","customer","then","res","code","$errorMessage","message","answer","_this2","test","associatedId","content","productId","product","$successMessage","$routerLink","update","_this3","flag","tempObj","assocatedAnswer","forEach","v","created","customer_consult_update","render","_vm","_h","$createElement","_c","_self","attrs","to","_v","_s","name","staticClass","_e","directives","rawName","value","expression","_m","staticStyle","border","src","$cms","filterUrl","coverImage","font-size","margin-bottom","font-weight","member","username","margin-top","$moment","createTime","_l","info","indexs","key","style","border-bottom","store","storeName","rows","maxlength","model","callback","$$v","$set","width","padding","text-align","size","colorPicker","on","click","$event","stopPropagation","staticRenderFns","padding-left","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/80.7f70f61da07dec8c910d.js","sourcesContent":["<template>\r\n <div>\r\n    <cms-breadcrumb to=\"/consult/list\" type='list'>\r\n      <li>{{$route.name}}</li>\r\n    </cms-breadcrumb>    \r\n    <div class=\"cms-list-layout\">\r\n    <!-- 数据列表 -->\r\n     <table class=\"comment-table\" v-loading=\"loading\" v-if=\"!loading\">\r\n      <tbody>\r\n        <tr class=\"comment-th\">\r\n          <td style=\"padding-left:10px;\">\r\n           <span>咨询商品</span>\r\n          </td>\r\n          <td style=\"padding-left:10px;\">\r\n            <div>\r\n              <span>咨询内容</span>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        <tr style=\"border:1px solid #EBEEF5;\" >\r\n          <td class=\"comment-goods\">\r\n            <div class=\"comment__inner\">\r\n              <img class=\"product-img\" :src=\"$cms.filterUrl(formData.product.coverImage)\">\r\n              <div class=\"product-title\">\r\n                <h3 class=\"comment-title-h\">{{formData.product.name}}</h3>\r\n              </div>\r\n            </div>\r\n         </td>\r\n         <td class=\"comment-item\">\r\n           <div class=\"comment-remark\">\r\n              <p style=\"font-size:14px;margin-bottom:10px;font-weight:700;\">{{formData.member.username}}:</p>\r\n              <p class=\"comment-title\">{{formData.content}}</p>\r\n             <p style=\"margin-top:6px;font-size:14px;\">{{$moment(formData.createTime)}}</p>\r\n           </div>\r\n           <div class=\"comment-remark\" v-for=\"(info,indexs) in formData.assocatedAnswer\" :key=\"indexs\" v-if=\"type==2\"\r\n            :style=\"{'border-bottom':indexs==0?'0':'1px solid #EBEEF5'}\">\r\n             <div>\r\n               <p style=\"margin-bottom:5px;\">\r\n                 {{info.product.store.storeName}}&nbsp;回复:\r\n                </p>\r\n               <el-input type=\"textarea\" v-model=\"info.content\" :rows=\"5\" maxlength=\"255\"></el-input>\r\n             </div>\r\n           </div>\r\n            <div style=\"width: 95%;padding:10px 0 10px 10px\" v-if=\"type==1\">\r\n             <div>\r\n               <el-input type=\"textarea\" v-model=\"answerContent\" :rows=\"5\" maxlength=\"255\"></el-input>\r\n             </div>\r\n           </div>\r\n        </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div style=\"text-align:right;margin-top:30px;width:49%;\" v-if=\"type==1\">\r\n      <cms-button size=\"small\" :colorPicker='true' @click.stop=\"answer\">回复咨询</cms-button>\r\n    </div>\r\n    <div style=\"text-align:right;margin-top:30px;width:49%;\" v-if=\"type==2\">\r\n      <cms-button size=\"small\" :colorPicker='true' @click.stop=\"update\">修改回复</cms-button>\r\n    </div>\r\n  </div>\r\n </div>\r\n</template>\r\n<script>\r\nimport form from '@/mixins/form'\r\nimport { consultGet, consultAnswer, consultUpdate } from '@/api/customer/customer.js'\r\nexport default {\r\n  mixins: [form],\r\n  data() {\r\n    return {\r\n      formData: {},\r\n      loading: false,\r\n      answerContent: '',\r\n      type: this.$route.query.type\r\n    }\r\n  },\r\n  methods: {\r\n    getFormData(id) {\r\n      this.loading = true\r\n      consultGet({ id: id }).then(res => {\r\n        if (res.code === 200) {\r\n          this.formData = res.data\r\n        } else {\r\n          this.$errorMessage(res.message)\r\n        }\r\n        this.loading = false\r\n      })\r\n    },\r\n    answer() {\r\n      if (this.answerContent === '' || /^\\s/.test(this.answerContent)) {\r\n        this.$errorMessage('请输入回复内容')\r\n      } else {\r\n        consultAnswer({\r\n          associatedId: this.formData.id,\r\n          content: this.answerContent,\r\n          productId: this.formData.product.id\r\n        }).then(res => {\r\n          if (res.code === 200) {\r\n            this.$successMessage('回复成功')\r\n            this.$routerLink('/consult/list', 'list')\r\n          } else {\r\n            this.$errorMessage(res.message)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    update() {\r\n      let flag = true\r\n      const tempObj = {\r\n        id: '',\r\n        content: ''\r\n      }\r\n      this.formData.assocatedAnswer.forEach(v => {\r\n        if (v.content === '' || /^\\s/.test(v.content)) {\r\n          flag = false\r\n          this.$errorMessage('请输入回复内容')\r\n        } else {\r\n          tempObj.id = v.id\r\n          tempObj.content = v.content\r\n        }\r\n      })\r\n      if (flag) {\r\n        consultUpdate(tempObj).then(res => {\r\n          if (res.code === 200) {\r\n            this.$successMessage('修改成功')\r\n            this.$routerLink('/consult/list', 'list')\r\n          } else {\r\n            this.$errorMessage(res.message)\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n  },\r\n  created() {\r\n    this.getFormData(this.$route.query.id)\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.comment-table{\r\n  width: 100%;\r\n  border: 1px solid #EBEEF5;\r\n  padding: 0 10px;\r\n  color: rgb(96, 98, 102);\r\n  border-collapse: collapse;\r\n  font-size: 12px;\r\n}\r\n.comment-th{\r\n  background-color: #f7f7f7;\r\n  text-align: left;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n}\r\n.comment-goods{\r\n  width: 40%;\r\n  padding: 10px 0;\r\n  border-right:1px solid #EBEEF5;\r\n  vertical-align: top;\r\n}\r\n.comment-item{\r\n  width: 60%;\r\n  vertical-align: top;\r\n}\r\n.comment-title{\r\n  font-size: 12px;\r\n  max-width: 680px;\r\n  overflow-wrap: break-word;\r\n}\r\n.comment-remark{\r\n  border-bottom: 1px solid rgb(235, 238, 245);\r\n  padding-right: 50px;\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/customer/consult/update.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":\"/consult/list\",\"type\":\"list\"}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-list-layout\"},[(!_vm.loading)?_c('table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"comment-table\"},[_c('tbody',[_vm._m(0),_vm._v(\" \"),_c('tr',{staticStyle:{\"border\":\"1px solid #EBEEF5\"}},[_c('td',{staticClass:\"comment-goods\"},[_c('div',{staticClass:\"comment__inner\"},[_c('img',{staticClass:\"product-img\",attrs:{\"src\":_vm.$cms.filterUrl(_vm.formData.product.coverImage)}}),_vm._v(\" \"),_c('div',{staticClass:\"product-title\"},[_c('h3',{staticClass:\"comment-title-h\"},[_vm._v(_vm._s(_vm.formData.product.name))])])])]),_vm._v(\" \"),_c('td',{staticClass:\"comment-item\"},[_c('div',{staticClass:\"comment-remark\"},[_c('p',{staticStyle:{\"font-size\":\"14px\",\"margin-bottom\":\"10px\",\"font-weight\":\"700\"}},[_vm._v(_vm._s(_vm.formData.member.username)+\":\")]),_vm._v(\" \"),_c('p',{staticClass:\"comment-title\"},[_vm._v(_vm._s(_vm.formData.content))]),_vm._v(\" \"),_c('p',{staticStyle:{\"margin-top\":\"6px\",\"font-size\":\"14px\"}},[_vm._v(_vm._s(_vm.$moment(_vm.formData.createTime)))])]),_vm._v(\" \"),_vm._l((_vm.formData.assocatedAnswer),function(info,indexs){return (_vm.type==2)?_c('div',{key:indexs,staticClass:\"comment-remark\",style:({'border-bottom':indexs==0?'0':'1px solid #EBEEF5'})},[_c('div',[_c('p',{staticStyle:{\"margin-bottom\":\"5px\"}},[_vm._v(\"\\n                \"+_vm._s(info.product.store.storeName)+\" 回复:\\n               \")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"maxlength\":\"255\"},model:{value:(info.content),callback:function ($$v) {_vm.$set(info, \"content\", $$v)},expression:\"info.content\"}})],1)]):_vm._e()}),_vm._v(\" \"),(_vm.type==1)?_c('div',{staticStyle:{\"width\":\"95%\",\"padding\":\"10px 0 10px 10px\"}},[_c('div',[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"maxlength\":\"255\"},model:{value:(_vm.answerContent),callback:function ($$v) {_vm.answerContent=$$v},expression:\"answerContent\"}})],1)]):_vm._e()],2)])])]):_vm._e(),_vm._v(\" \"),(_vm.type==1)?_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"30px\",\"width\":\"49%\"}},[_c('cms-button',{attrs:{\"size\":\"small\",\"colorPicker\":true},on:{\"click\":function($event){$event.stopPropagation();return _vm.answer($event)}}},[_vm._v(\"回复咨询\")])],1):_vm._e(),_vm._v(\" \"),(_vm.type==2)?_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"30px\",\"width\":\"49%\"}},[_c('cms-button',{attrs:{\"size\":\"small\",\"colorPicker\":true},on:{\"click\":function($event){$event.stopPropagation();return _vm.update($event)}}},[_vm._v(\"修改回复\")])],1):_vm._e()])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',{staticClass:\"comment-th\"},[_c('td',{staticStyle:{\"padding-left\":\"10px\"}},[_c('span',[_vm._v(\"咨询商品\")])]),_vm._v(\" \"),_c('td',{staticStyle:{\"padding-left\":\"10px\"}},[_c('div',[_c('span',[_vm._v(\"咨询内容\")])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-030fb647\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/customer/consult/update.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-030fb647\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./update.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./update.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./update.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-030fb647\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./update.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-030fb647\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/customer/consult/update.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
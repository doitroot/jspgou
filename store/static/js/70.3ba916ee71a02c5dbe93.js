webpackJsonp([70],{j2DK:function(e,t){},z7BO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("aA9S"),l=a.n(n),s=a("5HJ5"),o=a("HNM5"),r=function(e){return o.a.get("/admin/store/storelog/page",{params:e})},i={username:"",clientIp:"",page:1,size:10},u={name:"storeLog",mixins:[s.a],data:function(){return{queryParams:l()({},i),logData:{},logShow:{}}},methods:{getDetail:function(e){var t,a=this;this.logData[e]?this.logShow=l()([],this.logData[e]):(t={id:e},o.a.get("/admin/store/storelog/get",{params:t})).then(function(t){200===t.code&&(a.logShow=t.data,a.logData[e]=t.data)})},showData:function(e){this.getDetail(e)}},created:function(){this.getTableData(r,this.queryParams)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cms-list-layout"},[a("cms-prompt",{attrs:{collapse:"true"}},[a("li",[e._v("显示店铺所有的操作日志")])]),e._v(" "),a("section",{staticClass:"cms-list-query"},[a("div",{staticClass:"query-group"},[a("label",[e._v("操作用户")]),e._v(" "),a("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.username,callback:function(t){e.$set(e.queryParams,"username",t)},expression:"queryParams.username"}})],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("IP")]),e._v(" "),a("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.clientIp,callback:function(t){e.$set(e.queryParams,"clientIp",t)},expression:"queryParams.clientIp"}})],1),e._v(" "),a("div",{staticClass:"query-group"},[a("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:e.query}},[e._v("查询")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.getCheckItems,"row-click":e.checkRows}},[a("el-table-column",{attrs:{prop:"uri",label:"请求地址","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientIp",label:"访问/请求IP","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"method",label:"请求方式","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"操作用户","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"请求时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$moment(t.row.infosTime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更多",width:"175",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-popover",{attrs:{placement:"left-start",width:"300",trigger:"hover"},on:{show:function(a){e.showData(t.row.id)}}},[a("div",{staticStyle:{padding:"10px","font-size":"12px"}},[a("p",[e._v("sessionId："+e._s(e.logShow.sessionId))]),e._v(" "),a("p",[e._v("状态码："+e._s(e.logShow.httpStatusCode))]),e._v(" "),a("p",[e._v("耗时："+e._s(e.logShow.timeConsuming))]),e._v(" "),a("p",[e._v("请求参数："+e._s(e.logShow.paramData))]),e._v(" "),a("p",[e._v("响应参数："+e._s(e.logShow.returnData))])]),e._v(" "),a("cms-button",{attrs:{slot:"reference",icon:"edit",size:"small",type:"info"},slot:"reference"},[e._v("查看")])],1)],1)}}])})],1),e._v(" "),a("cms-pagination",{attrs:{total:e.total},on:{change:e.getPage}})],1)},staticRenderFns:[]};var m=a("C7Lr")(u,c,!1,function(e){a("j2DK")},null,null);t.default=m.exports}});
//# sourceMappingURL=70.3ba916ee71a02c5dbe93.js.map
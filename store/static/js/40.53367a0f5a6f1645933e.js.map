{"version":3,"sources":["webpack:///src/views/shop/product/virtualCard/dataSave.vue","webpack:///./src/views/shop/product/virtualCard/dataSave.vue?6019","webpack:///./src/views/shop/product/virtualCard/dataSave.vue"],"names":["dataSave","mixins","data","tableHeader","tableData","tmpObj","methods","getCardData","_this","this","Object","product","id","$route","query","then","res","JSON","parse","strutContent","obj","forEach","v","key","assign_default","push","saveData","_this2","length","params","flag","sku","$errorMessage","skuCode","keyValue","cardData","stringify_default","tplId","cardDataList","code","$successMessage","$routerLink","add","$cms","deepCopy","handleDelete","splice","created","virtualCard_dataSave","render","_vm","_h","$createElement","_c","_self","attrs","to","_v","_s","name","staticClass","ref","staticStyle","width","margin-bottom","stripe","on","selection-change","getCheckItems","row-click","checkRows","_l","col","index","label","prop","scopedSlots","_u","fn","scope","maxlength","model","value","row","callback","$$v","$set","expression","type","size","click","$event","$index","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/40.53367a0f5a6f1645933e.js","sourcesContent":["<template>\r\n<div>\r\n  <cms-breadcrumb to=\"/product/virtualCard/list\">\r\n    <li>{{$route.name}}</li>\r\n  </cms-breadcrumb>\r\n<div class=\"cms-list-layout\">    \r\n   <cms-prompt>\r\n      <li>数据表头是根据卡密模板动态生成,单次手动增加数据最大支持100行，Excel单次导入最大限制为1000行</li>\r\n      <li>在KEY值重复且原始数据未使用的情况下，系统将自动更新数据如当前卡密模板对应的商品无规格信息，则填写SKU编号一栏全部填写N/A即可</li>\r\n      <li>确保当前页面列表数据编辑好不丢失，请保存数据，系统不作自动保存</li>\r\n    </cms-prompt>\r\n    <el-table :data=\"tableData\" style=\"width: 100%;margin-bottom:10px;\" stripe  @selection-change='getCheckItems' @row-click='checkRows' ref='dataTable'>\r\n        <template v-for=\"(col,index) in tableHeader\" >\r\n           <el-table-column :key=\"index\" :label=\"col.label\"  :prop=\"col.key\">\r\n             <template slot-scope=\"scope\">\r\n               <el-input v-model=\"scope.row[col.key]\" maxlength=\"50\" ></el-input>         \r\n             </template> \r\n          </el-table-column>\r\n       </template>\r\n        <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">               \r\n                <el-button type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n     <el-button type=\"primary\" @click=\"add\">新增</el-button>\r\n     <el-button type=\"primary\" @click=\"saveData\">保存数据</el-button>\r\n    {{tableData}}\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { productVirtualCardtplGet, productVirtualCardDataSave } from '@/api/product/product.js'\r\nimport list from '@/mixins/list'\r\nexport default {\r\n  mixins: [list],\r\n  data() {\r\n    return {\r\n      tableHeader: [], // 表头信息\r\n      tableData: [], // 模板数据信息\r\n      tmpObj: {} // 临时的数据对象\r\n    }\r\n  },\r\n  methods: {\r\n    getCardData() { // 获取数据\r\n      productVirtualCardtplGet({ id: this.$route.query.id })\r\n        .then(res => {\r\n          // console.log(res.data.strutContent)\r\n          this.tableHeader = JSON.parse(res.data.strutContent)\r\n          const obj = {}\r\n          this.tableHeader.forEach(v => {\r\n            obj[v.key] = ''\r\n          })\r\n          this.tmpObj = Object.assign({}, obj)// 拷贝这个对象，直接赋值就会产生引用\r\n          this.tableData.push(obj)\r\n        })\r\n    },\r\n    saveData() {\r\n      if (this.tableData.length > 0) {\r\n        var params = []\r\n        var flag = true\r\n        this.tableData.forEach(v => {\r\n          if (v.sku === '' && v.key === '') {\r\n            this.$errorMessage('SKU与卡号不能为空')\r\n            flag = false\r\n          }\r\n          const obj = {\r\n            'skuCode': v.sku,\r\n            'keyValue': v.key,\r\n            'cardData': JSON.stringify(v),\r\n            'tplId': this.$route.query.id\r\n          }\r\n          params.push(obj)\r\n        })\r\n        if (flag) {\r\n          productVirtualCardDataSave({\r\n            cardDataList: params\r\n          }).then(res => {\r\n            if (res.code === 200) {\r\n              this.$successMessage('新增成功')\r\n              this.$routerLink(('/product/virtualCard/showUse'), 'showUse')\r\n            }\r\n          })\r\n        }\r\n      } else {\r\n        this.$errorMessage('请至少添加一条数据')\r\n      }\r\n    },\r\n    add() {\r\n      const obj = this.$cms.deepCopy(this.tmpObj)// 每一次都要拷贝一个新对象\r\n      this.tableData.push(obj)\r\n    },\r\n    handleDelete(id) {\r\n      this.tableData.splice(id, 1)\r\n    }\r\n  },\r\n  created() {\r\n    this.getCardData()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/shop/product/virtualCard/dataSave.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":\"/product/virtualCard/list\"}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-list-layout\"},[_c('cms-prompt',[_c('li',[_vm._v(\"数据表头是根据卡密模板动态生成,单次手动增加数据最大支持100行，Excel单次导入最大限制为1000行\")]),_vm._v(\" \"),_c('li',[_vm._v(\"在KEY值重复且原始数据未使用的情况下，系统将自动更新数据如当前卡密模板对应的商品无规格信息，则填写SKU编号一栏全部填写N/A即可\")]),_vm._v(\" \"),_c('li',[_vm._v(\"确保当前页面列表数据编辑好不丢失，请保存数据，系统不作自动保存\")])]),_vm._v(\" \"),_c('el-table',{ref:\"dataTable\",staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"10px\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"selection-change\":_vm.getCheckItems,\"row-click\":_vm.checkRows}},[_vm._l((_vm.tableHeader),function(col,index){return [_c('el-table-column',{key:index,attrs:{\"label\":col.label,\"prop\":col.key},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"maxlength\":\"50\"},model:{value:(scope.row[col.key]),callback:function ($$v) {_vm.$set(scope.row, col.key, $$v)},expression:\"scope.row[col.key]\"}})]}}])})]}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],2),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveData}},[_vm._v(\"保存数据\")]),_vm._v(\"\\r\\n    \"+_vm._s(_vm.tableData)+\"\\r\\n  \")],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-98c386c0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/shop/product/virtualCard/dataSave.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-98c386c0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./dataSave.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dataSave.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dataSave.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-98c386c0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./dataSave.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shop/product/virtualCard/dataSave.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
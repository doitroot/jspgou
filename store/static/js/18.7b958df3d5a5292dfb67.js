webpackJsonp([18],{GB96:function(e,t){},Gezs:function(e,t){},m2ya:function(e,t,r){"use strict";var a=r("HNM5"),i={name:"roleTree",props:{menuIds:{type:Array,default:function(){return[]}}},data:function(){return{treeObj:null,zNodes:[],clickFlag:null,setting:{callback:{onClick:this.setPermsInfo,onDblClick:this.setExpand},check:{enable:!0},data:{key:{children:"childs"}},view:{dblClickExpand:!1,expandSpeed:""}}}},methods:{getRoleTree:function(){var e,t=this;a.a.get("/admin/store/storeUserrole/tree",{params:e}).then(function(e){t.zNodes=e.data,t.$nextTick(function(){this.treeObj=$.fn.zTree.init($("#treeDemo"),this.setting,this.zNodes),this.defaultCheckNode(this.menuIds)})})},defaultCheckNode:function(e){if(0===e.length)return this.treeObj.checkAllNodes(!1),this.treeObj.expandAll(!1),!1;if(this.treeObj){this.treeObj.checkAllNodes(!1),this.treeObj.expandAll(!1);for(var t=0;t<e.length;t++){var r=this.treeObj.getNodeByParam("id",e[t]);this.treeObj.checkNode(r,!0,!1)}}},setPermsInfo:function(e,t,r,a){var i=this;this.clickFlag&&(this.clickFlag=clearTimeout(this.clickFlag)),this.clickFlag=setTimeout(function(){i.treeObj.checkNode(r,!r.checked,!0)},200)},getPermsInfo:function(){return this.treeObj.getCheckedNodes()},setExpand:function(e,t,r){this.clickFlag&&(this.clickFlag=clearTimeout(this.clickFlag)),this.treeObj.expandNode(r)}},created:function(){this.getRoleTree()},watch:{menuIds:{handler:function(){this.defaultCheckNode(this.menuIds)},deep:!0}},mounted:function(){}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("ul",{ref:"treeDemo",staticClass:"ztree",attrs:{id:"treeDemo"}})])},staticRenderFns:[]};var n=r("C7Lr")(i,o,!1,function(e){r("Gezs")},null,null);t.a=n.exports},xgpa:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("aA9S"),i=r.n(a),o=r("m2ya"),n=r("x1ym"),s=r("lcoF"),l=r("zzd2"),c={roleName:"",remark:"",menuid:[]},u={mixins:[s.a],components:{roleTree:o.a},data:function(){return{roleStatus:!0,formData:i()({},c),rules:{roleName:[n.a.required("请填写角色名"),n.a.len(1,10)],remark:[n.a.max(140,"描述最大长度为140个字符")]}}},methods:{getFormData:function(e){var t=this;this.loading=!0,Object(l.b)({id:e}).then(function(e){t.formData=e.data,t.formData.menuid=e.data.menus.map(function(e){return e.id}),t.loading=!1})},update:function(){this.formData.menuid=this.$refs.role.getPermsInfo().map(function(e){return e.id}),this.updateForm(l.e,this.formData,"/role","list")},restData:function(){var e=this;this.loading=!0,this.roleStatus=!1,setTimeout(function(){e.roleStatus=!0,e.formData=i()({},c)},1),this.getFormData(this.$route.query.id)}},created:function(){this.getFormData(this.$route.query.id)}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("cms-breadcrumb",{attrs:{to:"/role",type:"list"},on:{click:e.rest}},[r("li",[e._v(e._s(e.$route.name))])]),e._v(" "),r("div",{staticClass:"cms-form-layout"},[r("cms-prompt",{attrs:{collapse:!1}},[r("li",[e._v("可进行修改角色管理员，维护管理员权限")])]),e._v(" "),r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[r("el-form-item",{attrs:{label:"角色名",prop:"roleName",error:e.errorMessage.roleName}},[r("el-input",{ref:"first",attrs:{autofocus:!0},model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{maxlength:"500",type:"textarea",autosize:{minRows:3}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限设置"}},[e.roleStatus?r("role-tree",{ref:"role",attrs:{menuIds:e.formData.menuid}}):e._e()],1)],1),e._v(" "),r("div",{staticClass:"cms-form-footer"},[r("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:e.update}},[e._v("保存修改")]),e._v(" "),r("cms-button",{attrs:{type:"rest"},on:{click:e.restData}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var d=r("C7Lr")(u,m,!1,function(e){r("GB96")},null,null);t.default=d.exports}});
//# sourceMappingURL=18.7b958df3d5a5292dfb67.js.map
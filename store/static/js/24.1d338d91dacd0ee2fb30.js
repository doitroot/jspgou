webpackJsonp([24],{"46Yf":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("aA9S"),a=s.n(r),i=s("5HJ5"),n=s("yyHI"),o=s("H/aj"),c={page:1,size:5,status:"",payMode:"",refundNum:"",orderNum:"",applyTimeBegin:"",applyTimeEnd:"",refundType:" ",isPlatformIntervent:""},l={mixins:[i.a],components:{checkService:o.a},data:function(){return{timer:[],activeStatus:"",orderStatus:[{label:"退款单",value:"1"},{label:"退货单",value:"2"},{label:"换货单",value:"3"}],queryParams:a()({},c)}},filters:{statusFilter:function(e){return["待卖家确认","退款中","卖家拒绝","","待买家发货","待卖家收货","待买家收货","待卖家发货","已完成","买家取消"][parseInt(e)]}},methods:{changeService:function(e){e&&this.query()},checkService:function(e,t){this.$refs.checkService.checkService(e,t)},changeOrderStatus:function(e){this.query()},setTimer:function(e){this.queryParams.applyTimeBegin=e[0],this.queryParams.applyTimeEnd=e[1],this.query()},showAttr:function(e){if(e.length<=0)return"";var t="";return e.forEach(function(e){var s=e.attrName+":"+e.attrValueName+"  ";t+=s}),t},statusClass:function(e){return["info","info","error","","info","info","info","info","success","info"][parseInt(e)]}},created:function(){this.getTableData(n.k,this.queryParams)}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cms-list-layout"},[s("cms-prompt",{attrs:{collapse:"true"}},[s("li",[e._v("显示买家售后申请记录")]),e._v(" "),s("li",[e._v("买家可对订单内的单件商品进行申请售后操作")])]),e._v(" "),s("section",{staticClass:"cms-list-query"},[s("div",{staticClass:"query-group"},[s("label",[e._v("服务单号")]),e._v(" "),s("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.refundNum,callback:function(t){e.$set(e.queryParams,"refundNum",t)},expression:"queryParams.refundNum"}})],1),e._v(" "),s("div",{staticClass:"query-group"},[s("label",[e._v("订单号")]),e._v(" "),s("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.orderNum,callback:function(t){e.$set(e.queryParams,"orderNum",t)},expression:"queryParams.orderNum"}})],1),e._v(" "),s("div",{staticClass:"query-group"},[s("label",[e._v("申请时间")]),e._v(" "),s("cms-picker",{on:{change:e.setTimer},model:{value:e.timer,callback:function(t){e.timer=t},expression:"timer"}})],1),e._v(" "),s("div",{staticClass:"query-group"},[s("label",[e._v("服务类型")]),e._v(" "),s("el-select",{on:{change:e.query},model:{value:e.queryParams.refundType,callback:function(t){e.$set(e.queryParams,"refundType",t)},expression:"queryParams.refundType"}},[s("el-option",{attrs:{label:"全部",value:" "}}),e._v(" "),e._l(e.orderStatus,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),s("div",{staticClass:"query-group"},[s("label",[e._v("服务状态")]),e._v(" "),s("el-select",{on:{change:e.query},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),s("el-option",{attrs:{label:"待卖家确认",value:0}}),e._v(" "),s("el-option",{attrs:{label:"退款中",value:1}}),e._v(" "),s("el-option",{attrs:{label:"待买家发货",value:4}}),e._v(" "),s("el-option",{attrs:{label:"待卖家收货",value:5}}),e._v(" "),s("el-option",{attrs:{label:"待买家收货",value:6}}),e._v(" "),s("el-option",{attrs:{label:"待卖家发货",value:7}}),e._v(" "),s("el-option",{attrs:{label:"已完成",value:8}}),e._v(" "),s("el-option",{attrs:{label:"买家已取消",value:9}})],1)],1),e._v(" "),s("div",{staticClass:"query-group"},[s("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:e.query}},[e._v("查询")])],1)]),e._v(" "),s("el-tabs",{on:{"tab-click":e.changeOrderStatus},model:{value:e.queryParams.refundType,callback:function(t){e.$set(e.queryParams,"refundType",t)},expression:"queryParams.refundType"}},[s("el-tab-pane",{attrs:{label:"全部",name:" "}}),e._v(" "),e._l(e.orderStatus,function(e){return s("el-tab-pane",{key:e.value,attrs:{label:e.label,name:e.value}})})],2),e._v(" "),s("table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-table"},[e._m(0),e._v(" "),e._l(e.tableData,function(t,r){return s("tbody",{key:r},[s("div",{staticStyle:{width:"100%",height:"25px",background:"#fff"}}),e._v(" "),s("tr",{staticClass:"order-header"},[s("td",{staticStyle:{border:"1px solid #e0e0e0"},attrs:{colspan:"11"}},[s("span",{staticStyle:{"margin-left":"20px"}},[e._v("服务单号")]),e._v(" "),s("span",{staticStyle:{"margin-right":"50px"}},[e._v(e._s(t.orderRefund.orderRefundNum))]),e._v(" "),s("span",{staticStyle:{"margin-left":"20px"}},[e._v("订单编号：")]),e._v(" "),s("span",{staticStyle:{"margin-right":"50px"}},[e._v(e._s(t.order.orderCode))])])]),e._v(" "),s("tr",[s("td",{staticClass:"product-info"},[s("div",{staticClass:"product__inner"},[t.productVO.product?s("img",{staticClass:"product-img",attrs:{src:e.$cms.filterUrl(t.productVO.product.coverImage)}}):e._e(),e._v(" "),s("div",{staticClass:"product-title"},[s("h3",{staticClass:"title-h3"},[e._v(e._s(t.productVO.product.name))]),e._v(" "),s("p",{staticClass:"title-p",staticStyle:{"margin-top":"10px"}},[e._v(e._s(e.showAttr(t.productVO.proSkuAttrList)))])])])]),e._v(" "),s("td",{staticClass:"order-count"},[e._v("x"+e._s(t.orderRefund.productRefundCount))]),e._v(" "),s("td",{staticClass:"order-count",staticStyle:{"min-width":"130px","text-align":"left","padding-left":"37px"}},[s("div",[s("span",[e._v("金额:")]),e._v(" "),s("span",[e._v(e._s(e.$cms.float(t.orderRefund.refundAmount)))])]),e._v(" "),s("div",[s("span",[e._v("红包:")]),e._v(" "),s("span",[e._v(e._s(t.orderRefund.refundRedPacket))])]),e._v(" "),s("div",[s("span",[e._v("积分:")]),e._v(" "),s("span",[e._v(e._s(t.orderRefund.refundIntegral))])])]),e._v(" "),s("td",{staticClass:"order-count text-center",staticStyle:{"min-width":"130px"}},[1==t.orderRefund.refundType?s("span",[e._v("仅退款")]):e._e(),e._v(" "),2==t.orderRefund.refundType?s("span",[e._v("退款/退货")]):e._e(),e._v(" "),3==t.orderRefund.refundType?s("span",[e._v("换货")]):e._e()]),e._v(" "),s("td",{staticClass:"order-count text-center cell",staticStyle:{"min-width":"130px"}},[s("span",{class:e.statusClass(t.orderRefund.status)},[e._v("\n           "+e._s(e._f("statusFilter")(t.orderRefund.status))+"\n        ")])]),e._v(" "),s("td",{staticClass:"order-count text-center",staticStyle:{"min-width":"140px"}},[e._v(e._s(e.$moment(t.orderRefund.applyTime)))]),e._v(" "),s("td",{staticClass:"order-operation"},[s("div",{staticClass:"mb-10"},[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.$routerLink("/after/service/fundAndChange","view",{id:t.orderRefund.id,refundType:t.orderRefund.refundType})}}},[e._v("详情")])],1),e._v(" "),0==t.orderRefund.status?s("div",{staticClass:"mb-10"},[s("cms-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"info"},on:{click:function(s){e.checkService(t,!0)}}},[e._v("确认")])],1):e._e(),e._v(" "),0==t.orderRefund.status?s("div",{staticClass:"mb-10"},[s("cms-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"info"},on:{click:function(s){e.checkService(t,!1)}}},[e._v("确认不通过")])],1):e._e(),e._v(" "),5==t.orderRefund.status?s("div",{staticClass:"mb-10"},[s("cms-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"info"},on:{click:function(s){e.checkService(t,!0)}}},[e._v("确认收货")])],1):e._e()])])])})],2),e._v(" "),s("cms-pagination",{attrs:{total:e.total,size:5},on:{change:e.getPage}}),e._v(" "),s("check-service",{ref:"checkService",on:{change:e.changeService}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",[e._v("服务单信息")]),e._v(" "),s("th",[e._v("数量")]),e._v(" "),s("th",[e._v("退款明细")]),e._v(" "),s("th",[e._v("服务单类型")]),e._v(" "),s("th",[e._v("服务单状态")]),e._v(" "),s("th",[e._v("申请时间")]),e._v(" "),s("th",[e._v("操作")])])}]};var u=s("C7Lr")(l,d,!1,function(e){s("ypC0")},"data-v-3a74b15f",null);t.default=u.exports},"H/aj":function(e,t,s){"use strict";var r=s("3cXf"),a=s.n(r),i=s("yyHI"),n=s("x1ym"),o={data:function(){return{visible:!1,addressVisable:!1,addressLoading:!1,addressdData:[],serviceParams:{id:"",checked:!1,checkReason:"",addressId:""},deliveryForm:{address:"",id:"",expressNum:"",expressCompanyId:""},companyList:[],rules:{expressCompanyId:[n.a.required("此项必填","change")],expressNum:[n.a.required()]}}},methods:{checkService:function(e,t){var s=parseInt(e.orderRefund.refundType),r=parseInt(e.orderRefund.status),a=e.orderRefund.id;t?1===s?this.refundPrice(a):(0===r&&this.checkServiceAddress(a),5===r&&this.refundPriceToGoods(a,s),7===r&&(this.getLogisticscompanyList(),this.deliveryForm.id=a,this.deliveryForm.address=e.orderRefund.customerAddress+" "+e.orderRefund.customerName+" "+e.orderRefund.customerTel,this.visible=!0)):this.refusedService(a)},refundPriceToGoods:function(e,t){var s=this,r=2===t?"请确保收到买家回寄的商品是否符合，确认收货完成，系统将进行退款操作，是否继续？":"请确保收到买家发送的商品是否符合，确认收货完成，后续无法进行修改，是否继续？";this.$confirm(r,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(t){s.serviceParams.id=e,s.serviceParams.checked=!0;var r={id:e,received:!0,reason:"卖家已经收到货"};Object(i.l)(r).then(function(e){200===e.code?(s.$successMessage("操作成功"),s.$emit("change",!0)):(s.$emit("change",!1),s.$errorMessage(e.message))})}).catch(function(e){return!1})},refundPrice:function(e){var t=this;this.$confirm("确认通过后，货款将退至买家原支付账户中，后续无法撤回，确认是否继续？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(s){t.serviceParams.id=e,t.serviceParams.checked=!0,t.refundChcek(t.serviceParams)}).catch(function(e){return!1})},checkReturns:function(){this.refundChcek(this.serviceParams)},deliverySave:function(){var e=this;this.$refs.deliveryForm.validate(function(t){t&&(console.log(a()(e.deliveryForm)),e.loading=!0,Object(i.h)(e.deliveryForm).then(function(t){e.loading=!1,200===t.code?(e.$successMessage("操作成功"),e.visible=!1,e.$emit("change",!0)):(e.$errorMessage(t.message),e.$emit("change",!1))}))})},refusedService:function(e){var t=this;this.$prompt("如确认不通过买家的售后申请，申请将驳回，买家可申请平台介入，为避免后续问题，建议与买家协商确认结果。是否继续？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!e||""===e||!(e.length>140)},inputType:"textarea",inputErrorMessage:"说明过长",inputPlaceholder:"请输入说明原因"}).then(function(s){var r=s.value;t.serviceParams.id=e,t.serviceParams.checked=!1,t.serviceParams.checkReason=r,t.refundChcek(t.serviceParams)}).catch(function(){})},checkServiceAddress:function(e){this.serviceParams.id=e,this.serviceParams.checked=!0,this.addressVisable=!0,this.getAddressPage()},refundChcek:function(e){var t=this;Object(i.g)(e).then(function(e){t.addressLoading=!0,200===e.code?(t.$successMessage("操作成功"),t.$emit("change",!0)):(t.$emit("change",!1),t.$errorMessage(e.message)),t.addressLoading=!1,t.addressVisable=!1})},getAddressPage:function(){var e=this;this.addressdData.length<=0&&(this.addressLoading=!0,Object(i.p)({addressType:2}).then(function(t){200===t.code?(e.addressdData=t.data,t.data.forEach(function(t){t.isDefault&&e.$set(e.serviceParams,"addressId",t.id)})):e.$errorMessage(t.message),e.addressLoading=!1}))},getLogisticscompanyList:function(){var e=this;Object(i.c)().then(function(t){200===t.code&&(e.companyList=t.data)})},handleClose:function(){this.addressVisable=!1,this.visible=!1}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"收货地址",visible:e.addressVisable,"before-close":e.handleClose,width:"900px"}},[s("div",{staticStyle:{padding:"15px"}},[s("cms-prompt",{staticStyle:{"margin-bottom":"15px"}},[s("li",[e._v("如确认买家的售后申请，即表示同意买家的售后服务申请，请选择以下回寄地址，买家将商品回寄指定的地址。")])]),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.addressLoading,expression:"addressLoading"}],staticStyle:{"min-height":"150px"}},[s("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.serviceParams.addressId,callback:function(t){e.$set(e.serviceParams,"addressId",t)},expression:"serviceParams.addressId"}},[s("ul",e._l(e.addressdData,function(t){return s("li",{key:t.id,staticClass:"addr-items"},[s("el-radio",{attrs:{label:t.id}},[e._v("\n                "+e._s(t.provinceName)+e._s(t.cityName)+e._s(t.areaName)+e._s(t.address)+"\n                       \n                "+e._s(t.customerName)+" "+e._s(t.tel)+"\n              ")])],1)}),0)])],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.addressVisable=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.checkReturns}},[e._v("确 定")])],1)]),e._v(" "),s("el-dialog",{attrs:{visible:e.visible,title:"订单发货","before-close":e.handleClose,width:"900px"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.addressLoading,expression:"addressLoading"}],staticStyle:{padding:"15px"}},[s("el-form",{ref:"deliveryForm",attrs:{model:e.deliveryForm,"label-width":"120px",rules:e.rules}},[s("el-form-item",{attrs:{label:"买家收货地址"}},[e._v(e._s(e.deliveryForm.address))]),e._v(" "),s("el-form-item",{attrs:{label:"物流公司",prop:"expressCompanyId"}},[s("el-select",{model:{value:e.deliveryForm.expressCompanyId,callback:function(t){e.$set(e.deliveryForm,"expressCompanyId",t)},expression:"deliveryForm.expressCompanyId"}},e._l(e.companyList,function(e){return s("el-option",{key:e.id,attrs:{label:e.cnName,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"物流单号",prop:"expressNum"}},[s("el-input",{model:{value:e.deliveryForm.expressNum,callback:function(t){e.$set(e.deliveryForm,"expressNum",t)},expression:"deliveryForm.expressNum"}})],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.deliverySave}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=s("C7Lr")(o,c,!1,function(e){s("QCA1")},"data-v-1b36ba4b",null);t.a=l.exports},QCA1:function(e,t){},ypC0:function(e,t){}});
//# sourceMappingURL=24.1d338d91dacd0ee2fb30.js.map
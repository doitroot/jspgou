webpackJsonp([78],{"419k":function(e,o){},"Zd3/":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=t("aA9S"),n=t.n(a),r=t("x1ym"),u=t("lcoF"),i=t("QkjJ"),m={coupon:{conOrderAmount:"",discountAmount:"",getMode:"",getNum:"",expirateType:"",issueNum:"",name:"",useBeginTime:"",useEndTime:"",useDay:"",couponType:"",couponScope:""},ctgIds:[],activeTimer:[]},s={components:{categoryCascader:t("CPCM").a},mixins:[u.a],data:function(){var e=this;return{formData:n()({},m),rules:{"coupon.name":[r.a.required("请填写优惠券名称"),r.a.len(1,20)],"coupon.couponType":[r.a.required("")],"coupon.useDay":[r.a.number("请输入大于或等于0的正整数")],"coupon.conOrderAmount":[r.a.required(),r.a.number("请输入大于或等于0的正整数")],"coupon.issueNum":[r.a.required(),r.a.number("请输入大于或等于0的正整数")],"coupon.getNum":[r.a.required(),r.a.number("请输入大于或等于0的正整数")],"coupon.useBeginTime":[r.a.required()],"coupon.discountAmount":[r.a.required(),r.a.number("请输入大于或等于0的正整数"),{validator:function(o,t,a){t<e.formData.coupon.conOrderAmount?a():a(new Error("面值不能大于使用条件"))},trigger:"blur"}]}}},methods:{getActiveTimer:function(e){this.formData.coupon.useBeginTime=e[0],this.formData.coupon.useEndTime=e[1]},getFormData:function(e){var o=this;this.status=!1,this.loading=!0,Object(i.j)({id:e}).then(function(e){200===e.code&&(o.formData.coupon=n()({},e.data),e.data.useBeginTime&&""!==e.data.useBeginTime&&(o.activeTimer=[o.$moment(e.data.useBeginTime),o.$moment(e.data.useEndTime)]),o.formData.issueType=0===e.data.issueNum?1:2,delete o.formData.coupon.ctgs,o.$set(o.formData,"ctgIds",e.data.ctgs.map(function(e){return e.id})),o.status=!0,o.loading=!1)})},changeType:function(e){this.formData.coupon.expirateType=e},getTimer:function(e){this.formData.coupon.useBeginTime=e[0],this.formData.coupon.useEndTime=e[1]},update:function(){this.updateForm(i.m,this.formData,"/coupon/list","list")}},created:function(){this.getFormData(this.$route.query.id)}},c={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("cms-breadcrumb",{attrs:{to:"/coupon/list",type:"list"},on:{click:e.rest}},[t("li",[e._v(e._s(e.$route.name))])]),e._v(" "),t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:!1}},[t("li",[e._v("可进行修改商家优惠券")])]),e._v(" "),t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[t("el-form-item",{attrs:{label:"优惠券名称",prop:"coupon.name",error:e.errorMessage.coupon_name}},[t("el-input",{attrs:{maxlength:"30"},model:{value:e.formData.coupon.name,callback:function(o){e.$set(e.formData.coupon,"name",o)},expression:"formData.coupon.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"有效期",prop:"coupon.useBeginTime"}},[t("cms-picker",{staticStyle:{width:"380px"},attrs:{disabledType:"before"},on:{change:e.getActiveTimer},model:{value:e.activeTimer,callback:function(o){e.activeTimer=o},expression:"activeTimer"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"使用条件",prop:"coupon.conOrderAmount",error:e.errorMessage.coupon_conOrderAmount}},[t("el-input",{attrs:{maxlength:"6"},model:{value:e.formData.coupon.conOrderAmount,callback:function(o){e.$set(e.formData.coupon,"conOrderAmount",o)},expression:"formData.coupon.conOrderAmount"}},[t("template",{slot:"prepend"},[e._v("满")]),e._v(" "),t("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),t("el-form-item",{attrs:{label:"面值",prop:"coupon.discountAmount",error:e.errorMessage.coupon_discountAmount}},[t("el-input",{attrs:{maxlength:"6"},model:{value:e.formData.coupon.discountAmount,callback:function(o){e.$set(e.formData.coupon,"discountAmount",o)},expression:"formData.coupon.discountAmount"}},[t("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),t("el-form-item",{attrs:{label:"发放限制",prop:"coupon.issueNum"}},[t("el-input",{attrs:{maxlength:"6"},model:{value:e.formData.coupon.issueNum,callback:function(o){e.$set(e.formData.coupon,"issueNum",o)},expression:"formData.coupon.issueNum"}}),e._v(" "),t("div",{staticClass:"gray"},[e._v("输入几表示限制几张，输入0表示不限制")])],1),e._v(" "),t("el-form-item",{attrs:{label:"领取限制",prop:"coupon.getNum",error:e.errorMessage.coupon_getNum}},[t("el-input",{attrs:{maxlength:"2"},model:{value:e.formData.coupon.getNum,callback:function(o){e.$set(e.formData.coupon,"getNum",o)},expression:"formData.coupon.getNum"}},[t("template",{slot:"prepend"},[e._v("每用户")]),e._v(" "),t("template",{slot:"append"},[e._v("张")])],2)],1)],1),e._v(" "),t("div",{staticClass:"cms-form-footer"},[t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(o){e.update()}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var p=t("C7Lr")(s,c,!1,function(e){t("419k")},null,null);o.default=p.exports}});
//# sourceMappingURL=78.0b18cc2e44946aa9a738.js.map
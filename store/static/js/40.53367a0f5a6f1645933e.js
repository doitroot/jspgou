webpackJsonp([40],{S5N4:function(t,e){},gacw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("3cXf"),n=a.n(r),s=a("aA9S"),l=a.n(s),i=a("NyU8"),o={mixins:[a("5HJ5").a],data:function(){return{tableHeader:[],tableData:[],tmpObj:{}}},methods:{getCardData:function(){var t=this;Object(i.A)({id:this.$route.query.id}).then(function(e){t.tableHeader=JSON.parse(e.data.strutContent);var a={};t.tableHeader.forEach(function(t){a[t.key]=""}),t.tmpObj=l()({},a),t.tableData.push(a)})},saveData:function(){var t=this;if(this.tableData.length>0){var e=[],a=!0;this.tableData.forEach(function(r){""===r.sku&&""===r.key&&(t.$errorMessage("SKU与卡号不能为空"),a=!1);var s={skuCode:r.sku,keyValue:r.key,cardData:n()(r),tplId:t.$route.query.id};e.push(s)}),a&&Object(i.x)({cardDataList:e}).then(function(e){200===e.code&&(t.$successMessage("新增成功"),t.$routerLink("/product/virtualCard/showUse","showUse"))})}else this.$errorMessage("请至少添加一条数据")},add:function(){var t=this.$cms.deepCopy(this.tmpObj);this.tableData.push(t)},handleDelete:function(t){this.tableData.splice(t,1)}},created:function(){this.getCardData()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("cms-breadcrumb",{attrs:{to:"/product/virtualCard/list"}},[a("li",[t._v(t._s(t.$route.name))])]),t._v(" "),a("div",{staticClass:"cms-list-layout"},[a("cms-prompt",[a("li",[t._v("数据表头是根据卡密模板动态生成,单次手动增加数据最大支持100行，Excel单次导入最大限制为1000行")]),t._v(" "),a("li",[t._v("在KEY值重复且原始数据未使用的情况下，系统将自动更新数据如当前卡密模板对应的商品无规格信息，则填写SKU编号一栏全部填写N/A即可")]),t._v(" "),a("li",[t._v("确保当前页面列表数据编辑好不丢失，请保存数据，系统不作自动保存")])]),t._v(" "),a("el-table",{ref:"dataTable",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:t.tableData,stripe:""},on:{"selection-change":t.getCheckItems,"row-click":t.checkRows}},[t._l(t.tableHeader,function(e,r){return[a("el-table-column",{key:r,attrs:{label:e.label,prop:e.key},scopedSlots:t._u([{key:"default",fn:function(r){return[a("el-input",{attrs:{maxlength:"50"},model:{value:r.row[e.key],callback:function(a){t.$set(r.row,e.key,a)},expression:"scope.row[col.key]"}})]}}])})]}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],2),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("保存数据")]),t._v("\r\n    "+t._s(t.tableData)+"\r\n  ")],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(o,c,!1,function(t){a("S5N4")},null,null);e.default=u.exports}});
//# sourceMappingURL=40.53367a0f5a6f1645933e.js.map
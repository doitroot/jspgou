{"version":3,"sources":["webpack:///src/views/marketing/activityMange/storeActivity/edit.vue","webpack:///./src/views/marketing/activityMange/storeActivity/edit.vue?09d7","webpack:///./src/views/marketing/activityMange/storeActivity/edit.vue"],"names":["defaultData","promote","name","promoteBeginTime","promoteEndTime","conType","promoteScope","discountMode","conOrderAmount","discountAmount","remark","conProductNum","enable","promoteType","products","specialPrice","productId","discount","limitNum","ctgIds","includeProductIds","includeProducts","excludeProductIds","excludeProducts","giveProducts","giveCouponIds","giveCoupons","coupons","couponIds","edit","components","categoryCascader","cmsCoupon","cmsProduct","mixins","mixins_form","data","_this","this","storeServices","productLimt","activeTimer","proStatus","formData","assign_default","rules","promote.name","required","len","promote.promoteBeginTime","promote.promoteScope","promote.promoteType","promote.conOrderAmount","number","promote.discountAmount","integer","custom","rule","value","callback","Error","promote.conProductNum","methods","getFormData","id","_this2","obj","Object","marketing","then","res","code","$moment","singleDiscountProducts","ctgs","map","v","forEach","push","pro","product","coverImage","salePrice","restSel","changePromoteType","deleteDiscountData","index","splice","val","_this3","setTimeout","getProductDiscount","arr","getStoreService","_this4","serFilter","parseInt","getActiveTimer","update","state","params","$cms","deepCopy","updateForm","created","$route","query","storeActivity_edit","render","_vm","_h","$createElement","_c","_self","attrs","to","type","on","click","rest","_v","_s","staticClass","collapse","directives","rawName","expression","ref","model","label-width","nativeOn","submit","$event","preventDefault","label","prop","$$v","$set","error","errorMessage","staticStyle","width","disabledType","change","rows","maxlength","no-data-text","_l","item","key","_e","slot","show","get","length","src","filterUrl","alt","float","precision","size","step","max","min","cursor","disabled","_n","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/68.51c8e31ae61e898fa944.js","sourcesContent":["<template>\r\n  <div>\r\n    <cms-breadcrumb to=\"/storeActivity/list\" type='list' @click=\"rest\">\r\n      <li>{{$route.name}}</li>\r\n    </cms-breadcrumb>\r\n    <div class=\"cms-form-layout\">\r\n      <cms-prompt :collapse='false'>\r\n        <li>可进行修改商家活动</li>\r\n      </cms-prompt>\r\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\" @submit.native.prevent v-loading='loading'>\r\n        <el-form-item label=\"活动名称\" prop=\"promote.name\" ref=\"promote_name\">\r\n          <el-input v-model=\"formData.promote.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动时间\" prop=\"promote.promoteBeginTime\" ref=\"promote.promoteBeginTime\" :error=\"errorMessage['promote.promoteBeginTime']\">\r\n          <cms-picker disabledType='before' v-model=\"activeTimer\" style=\"width:380px\" @change=\"getActiveTimer\"></cms-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动说明\" prop=\"promote.remark\" ref=\"promote.remark\">\r\n          <el-input v-model=\"formData.promote.remark\" type=\"textarea\" :rows=\"4\" maxlength=\"100\"></el-input>\r\n        </el-form-item>\r\n       <el-form-item label=\"活动支持优惠形式\" prop=\"promote.promoteType\" ref=\"promote.promoteType\">\r\n          <el-select v-model=\"formData.promote.promoteType\" @change=\"changePromoteType\"  no-data-text=\"暂无可用活动类型，请前往营销服务开通\">\r\n            <el-option v-for=\"(item,index) in storeServices\" :key=\"index\" \r\n            :label=\"serFilter(item.promoteType)\" :value=\"item.promoteType\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <!-- 选择商品条件 -->\r\n        <el-form-item label=\"活动商品\" prop=\"promote.promoteScope\" ref=\"promote.promoteScope\" v-show=\"(formData.promote.promoteType>2)\">\r\n          <el-radio-group v-model=\"formData.promote.promoteScope\" @change=\"restSel\">\r\n            <el-radio :label=\"1\">全部商品</el-radio>\r\n            <el-radio :label=\"2\">部分类目</el-radio>\r\n            <el-radio :label=\"3\">部分商品</el-radio>\r\n            <el-radio :label=\"4\">排除商品</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择类目\" v-show=\"formData.promote.promoteScope===2\">\r\n          <category-cascader style=\"width:380px;\" v-model=\"formData.ctgIds\"></category-cascader>\r\n        </el-form-item>\r\n        <!-- 部分商品-->\r\n        <el-form-item v-if=\"formData.promote.promoteScope===3&&formData.promote.promoteType>2\" label=\"选择商品\">\r\n          <cms-product v-if=\"proStatus\" v-model=\"formData.includeProductIds\"\r\n           :data=\"formData.includeProducts\" type=\"product\"></cms-product>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"formData.promote.promoteScope===4&formData.promote.promoteType>2\" label=\"选择商品\">\r\n          <cms-product v-if=\"proStatus\" v-model=\"formData.excludeProductIds\"\r\n          :data=\"formData.excludeProducts\" type=\"product\"></cms-product>\r\n        </el-form-item>\r\n        <!-- 排除商品-->\r\n\r\n        <!-- 单品折扣 一口价-->\r\n        <div v-if=\"formData.promote.promoteType<=2\">\r\n          <el-form-item class=\"default\" label='活动条件' prop=\"promote.conProductNum\">\r\n            <el-radio-group v-model=\"formData.promote.conType\">\r\n              <el-radio :label=\"1\">\r\n                <el-input maxlength=\"5\" style=\"width:180px\" v-model=\"formData.promote.conProductNum\">\r\n                  <template slot=\"prepend\">满</template>\r\n                  <template slot=\"append\">件</template>\r\n                </el-input>\r\n              </el-radio>\r\n              <el-radio :label=\"3\">\r\n                <el-input maxlength=\"5\" style=\"width:200px\" v-model=\"formData.promote.conProductNum\">\r\n                  <template slot=\"prepend\">第</template>\r\n                  <template slot=\"append\">件</template>\r\n                </el-input>\r\n              </el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item :label=\"formData.promote.promoteType==1?'设置折扣':'设置一口价'\">\r\n            <cms-product v-if=\"proStatus\" type=\"product\" :show=\"false\"\r\n             @get=\"getProductDiscount\"></cms-product>\r\n            <table v-if=\"formData.products.length>0\" class=\"dis-table\">\r\n              <tr>\r\n                <th>商品名称</th>\r\n                <th>商品售价</th>\r\n                <th>{{formData.promote.promoteType==1?'设置折扣':'设置一口价'}}</th>\r\n                <th>限购数量</th>\r\n                <th>操作</th>\r\n              </tr>\r\n              <tr v-for=\"(item,index) in formData.products\" :key=\"index\">\r\n                <td style=\"width:40%\">\r\n                  <div class=\"dis-img\">\r\n                    <img :src=\"$cms.filterUrl(item.product.coverImage)\" alt=\"\">\r\n                  </div>\r\n                  <div class=\"dis-name\">\r\n                    {{item.product.name}}\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  {{$cms.float(item.product.salePrice)}}元\r\n                </td>\r\n                <td>\r\n                  <el-input-number v-model=\"item.discount\" :precision=\"1\" size=\"mini\" :step=\"0.1\"  :max=\"10\" :min=\"0.1\"  v-if=\"formData.promote.promoteType==1\"></el-input-number>\r\n                  <el-input-number v-model=\"item.specialPrice\" :precision=\"1\" size=\"mini\" :step=\"1\" :max=\"999999\" :min=\"0.1\" v-else></el-input-number>\r\n                </td>\r\n                <td>\r\n                  <el-input-number v-model=\"item.limitNum\" :step=\"1\" size=\"mini\" :max=\"99\" :min=\"1\"></el-input-number>\r\n                </td>\r\n                <td style=\"cursor: pointer;\" @click=\"deleteDiscountData(index)\">删除</td>\r\n              </tr>\r\n            </table>\r\n            <!-- <div class=\"gray\">你选择的是带有sku的商品，用户购买时不论选择哪种sku规格，都将按照设置的折扣进行计算金额。</div> -->\r\n          </el-form-item>\r\n        </div>\r\n        <!-- 满减条件 -->\r\n        <div v-if=\"formData.promote.promoteType==3\">\r\n          <el-form-item class=\"default\" label='活动条件' prop=\"promote.conOrderAmount\">\r\n            <el-radio-group v-model=\"formData.promote.conType\">\r\n              <el-radio :label=\"1\">\r\n                <el-input maxlength=\"5\" style=\"width:180px\" v-model=\"formData.promote.conOrderAmount\">\r\n                  <template slot=\"prepend\">满</template>\r\n                  <template slot=\"append\">元</template>\r\n                </el-input>\r\n              </el-radio>\r\n              <el-radio :label=\"2\">\r\n                <el-input maxlength=\"5\" style=\"width:200px\" v-model=\"formData.promote.conOrderAmount\">\r\n                  <template slot=\"prepend\">每满</template>\r\n                  <template slot=\"append\">元</template>\r\n                </el-input>\r\n              </el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item class=\"default\" label=\"促销方式\" prop=\"promote.discountAmount\" v-if=\"formData.promote.promoteType==3\">\r\n            <el-input maxlength=\"5\" style=\"width:200px;\" v-model=\"formData.promote.discountAmount\">\r\n              <template slot=\"prepend\">减</template>\r\n              <template slot=\"append\">元</template>\r\n            </el-input>\r\n          </el-form-item>\r\n        </div>\r\n        <!-- 优惠券 -->\r\n        <div v-if=\"formData.promote.promoteType==4\">\r\n          <el-form-item label='活动优惠券'>\r\n            <cms-coupon v-model=\"formData.couponIds\" :disabled=\"true\" :data=\"formData.coupons\"></cms-coupon>\r\n          </el-form-item>\r\n        </div>\r\n        <!--满赠条件-->\r\n        <div v-if=\"formData.promote.promoteType==5\">\r\n          <el-form-item label='活动条件' prop=\"promote.conOrderAmount\">\r\n            <el-radio-group v-model=\"formData.promote.conType\">\r\n              <el-radio :label=\"1\">\r\n                <el-input maxlength=\"5\" style=\"width:180px\" v-model.number=\"formData.promote.conOrderAmount\">\r\n                  <template slot=\"prepend\">满</template>\r\n                  <template slot=\"append\">元</template>\r\n                </el-input>\r\n              </el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label='促销方式'>\r\n            <el-radio-group v-model=\"formData.promote.discountMode\">\r\n              <el-radio :label=\"2\">\r\n                赠品\r\n              </el-radio>\r\n              <el-radio :label=\"3\">\r\n                优惠券\r\n              </el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"选择优惠券\" v-if=\"formData.promote.discountMode==3\">\r\n            <cms-coupon label=\"选择赠品\" :disabled=\"true\"\r\n             v-model=\"formData.giveCouponIds\" :data=\"formData.giveCoupons\" ></cms-coupon>\r\n          </el-form-item>\r\n          <el-form-item label=\"选择商品\" v-if=\"formData.promote.discountMode==2\">\r\n            <cms-product  v-if=\"proStatus\" v-model=\"formData.giveProductIds\" \r\n            type=\"product\" :data=\"formData.giveProducts\"></cms-product>\r\n          </el-form-item>\r\n        </div>\r\n        <!--包邮-->\r\n      <div v-if=\"formData.promote.promoteType==6\">\r\n          <el-form-item label=\"活动条件\" prop=\"promote.conOrderAmount\">\r\n             <el-input maxlength=\"5\" style=\"width:180px\" v-model.number=\"formData.promote.conOrderAmount\">\r\n                  <template slot=\"prepend\">满</template>\r\n                  <template slot=\"append\">元</template>\r\n                </el-input>\r\n          </el-form-item>\r\n      </div>\r\n\r\n        <el-form-item label=\"是否上线\" prop=\"promote.enable\" ref=\"promote.enable\">\r\n          <cms-switch v-model=\"formData.promote.enable\"></cms-switch>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"cms-form-footer\">\r\n        <cms-button @click=\"update(false)\" v-color>修改</cms-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport rules from '@/rules/index.js'\r\nimport form from '@/mixins/form'\r\nimport { activityUpdate, activityGet, signPlatformStoreService } from '@/api/marketing/index.js'\r\nimport categoryCascader from '@/components/cms/categoryCascader'\r\nimport cmsCoupon from '@/components/operation/cmsCoupon'\r\nimport cmsProduct from '@/components/operation/cmsProduct'\r\nvar defaultData = {\r\n  promote: {\r\n    name: '',\r\n    promoteBeginTime: '',\r\n    promoteEndTime: '',\r\n    conType: 1,\r\n    promoteScope: 1,\r\n    discountMode: 2,\r\n    conOrderAmount: 1,\r\n    discountAmount: 1,\r\n    remark: '',\r\n    conProductNum: 0,\r\n    enable: true,\r\n    promoteType: 3\r\n  },\r\n  products: [\r\n    {\r\n      specialPrice: '',\r\n      productId: '',\r\n      discount: '',\r\n      limitNum: ''\r\n    }\r\n  ],\r\n  ctgIds: [],\r\n  includeProductIds: [],\r\n  includeProducts: [],\r\n  excludeProductIds: [],\r\n  excludeProducts: [],\r\n  giveProducts: [],\r\n  giveCouponIds: [],\r\n  giveCoupons: [],\r\n  coupons: [],\r\n  couponIds: []\r\n}\r\n\r\nexport default {\r\n  components: { categoryCascader, cmsCoupon, cmsProduct },\r\n  mixins: [form],\r\n  data() {\r\n    var minConOrder = (rule, value, callback) => {\r\n      if (value > this.formData.promote.conOrderAmount) {\r\n        callback(new Error('优惠金额不得大于满值金额'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      storeServices: [],\r\n      productLimt: [], // 商品报名限制\r\n      activeTimer: [],\r\n      proStatus: false,\r\n      formData: Object.assign({}, defaultData),\r\n      rules: {\r\n        'promote.name': [rules.required('请填写活动名称'), rules.len(1, 15)],\r\n        'promote.promoteBeginTime': [\r\n          rules.required('请选择活动开始时间', 'change')\r\n        ],\r\n        'promote.promoteScope': [rules.required()],\r\n        'promote.promoteType': [rules.required('此项必填', 'change')],\r\n        'promote.conOrderAmount': [rules.number()],\r\n        'promote.discountAmount': [rules.integer(), rules.custom(minConOrder)],\r\n        'promote.conProductNum': [rules.required()]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getFormData(id) {\r\n      var obj = {}\r\n      activityGet({ id: id }).then(res => {\r\n        if (res.code === 200) {\r\n          this.activeTimer = [this.$moment(res.data.promoteBeginTime), this.$moment(res.data.promoteEndTime)]\r\n          obj = {\r\n            promote: {\r\n              name: res.data.name,\r\n              promoteBeginTime: res.data.promoteBeginTime,\r\n              promoteEndTime: res.data.promoteEndTime,\r\n              conType: res.data.conType,\r\n              promoteScope: res.data.promoteScope,\r\n              discountMode: res.data.discountMode,\r\n              conOrderAmount: res.data.conOrderAmount,\r\n              discountAmount: res.data.discountAmount,\r\n              remark: res.data.remark,\r\n              conProductNum: res.data.conProductNum,\r\n              enable: res.data.enable,\r\n              promoteType: res.data.promoteType,\r\n              id: res.data.id\r\n            },\r\n            products: res.data.singleDiscountProducts,\r\n            ctgIds: res.data.ctgs.map(v => v.id),\r\n            includeProductIds: res.data.includeProductIds,\r\n            includeProducts: [],\r\n            excludeProductIds: res.data.excludeProductIds,\r\n            excludeProducts: [],\r\n            giveProducts: [],\r\n            giveCoupons: res.data.giveCoupons,\r\n            giveCouponIds: res.data.giveCouponIds,\r\n            id: res.data.id,\r\n            coupons: res.data.coupons,\r\n            couponIds: []\r\n          }\r\n          res.data.coupons.forEach(v => {\r\n            obj.couponIds.push(v.id)\r\n          })\r\n          res.data.giveProducts.forEach(v => {\r\n            var pro = {\r\n              product: {\r\n                coverImage: v.coverImage,\r\n                id: v.id,\r\n                name: v.name,\r\n                salePrice: v.salePrice\r\n              }\r\n            }\r\n            obj.giveProducts.push(pro)\r\n          })\r\n          res.data.excludeProducts.forEach(v => {\r\n            var pro = {\r\n              product: {\r\n                coverImage: v.coverImage,\r\n                id: v.id,\r\n                name: v.name,\r\n                salePrice: v.salePrice\r\n              }\r\n            }\r\n            obj.excludeProducts.push(pro)\r\n          })\r\n          res.data.includeProducts.forEach(v => {\r\n            var pro = {\r\n              product: {\r\n                coverImage: v.coverImage,\r\n                id: v.id,\r\n                name: v.name,\r\n                salePrice: v.salePrice\r\n              }\r\n            }\r\n            obj.includeProducts.push(pro)\r\n          })\r\n          this.formData = Object.assign({}, obj)\r\n          this.restSel()\r\n        }\r\n      })\r\n    },\r\n    changePromoteType(value) {\r\n      // 切换单品一口价和折扣\r\n      if (value === 1) {\r\n        this.formData.promote.promoteScope = 1\r\n      }\r\n      if (value === 6) {\r\n        this.formData.promote.conType = 1\r\n      }\r\n    },\r\n    deleteDiscountData(index) {\r\n      this.formData.products.splice(index, 1)\r\n    },\r\n    restSel(val) {\r\n      this.proStatus = false\r\n      setTimeout(() => {\r\n        this.proStatus = true\r\n      }, 1)\r\n    },\r\n    getProductDiscount(data) {\r\n      // 获取设置一口价商品\r\n      const arr = []\r\n      data.forEach(v => {\r\n        const obj = {\r\n          product: {\r\n            coverImage: v.product.coverImage,\r\n            id: v.product.id,\r\n            name: v.product.name,\r\n            salePrice: v.product.salePrice,\r\n            specialPrice: v.product.salePrice,\r\n            discount: 9.5,\r\n            limitNum: 1\r\n          }\r\n        }\r\n        arr.push(obj)\r\n      })\r\n      this.formData.products = arr\r\n    },\r\n    getStoreService() { // 获取优惠活动列表\r\n      signPlatformStoreService().then(res => {\r\n        if (res.code === 200) {\r\n          this.storeServices = res.data\r\n        }\r\n      })\r\n    },\r\n    serFilter(val) { // 服务项目\r\n      var arr = ['', '单品折扣', '单品一口价', '满减', '优惠券', '满赠', '包邮']\r\n      return arr[parseInt(val)]\r\n    },\r\n    getActiveTimer(value) {\r\n      this.formData.promote.promoteBeginTime = value[0]\r\n      this.formData.promote.promoteEndTime = value[1]\r\n    },\r\n    update(state) {\r\n      const params = this.$cms.deepCopy(this.formData)\r\n      if (params.promote.promoteType <= 2) {\r\n        const arr = []\r\n        this.formData.products.forEach(v => {\r\n          const obj = {\r\n            specialPrice:\r\n              params.promote.promoteType === 2 ? v.specialPrice : '',\r\n            productId: v.product.id,\r\n            discount: params.promote.promoteType === 1 ? v.discount : '',\r\n            limitNum: v.limitNum\r\n          }\r\n          arr.push(obj)\r\n        })\r\n        params.products = arr\r\n      }\r\n      delete params.coupons\r\n      this.updateForm(\r\n        activityUpdate,\r\n        params,\r\n        '/storeActivity/list',\r\n        'list'\r\n      )\r\n    }\r\n  },\r\n  created() {\r\n    this.getFormData(this.$route.query.id)\r\n    this.getStoreService()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.discounts__add {\r\n  cursor: pointer;\r\n}\r\n.discounts__add .iconfont {\r\n  position: relative;\r\n  top: 1px;\r\n  margin-right: 3px;\r\n}\r\n.dis-table {\r\n  width: 100%;\r\n  max-width: 1000px;\r\n  td,\r\n  tr {\r\n    font-size: 12px;\r\n    text-align: center;\r\n  }\r\n}\r\n.dis-img {\r\n  width: 40px;\r\n  height: 40px;\r\n  float: left;\r\n  img {\r\n    width: 90%;\r\n    height: 90%;\r\n  }\r\n}\r\n.dis-name {\r\n  margin-left: 45px;\r\n  text-align: left;\r\n  height: 40px;\r\n  font-size: 12px;\r\n  color: #444;\r\n  line-height: 20px;\r\n  overflow: hidden;\r\n  -webkit-line-clamp: 2;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/marketing/activityMange/storeActivity/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":\"/storeActivity/list\",\"type\":\"list\"},on:{\"click\":_vm.rest}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":false}},[_c('li',[_vm._v(\"可进行修改商家活动\")])]),_vm._v(\" \"),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{ref:\"promote_name\",attrs:{\"label\":\"活动名称\",\"prop\":\"promote.name\"}},[_c('el-input',{model:{value:(_vm.formData.promote.name),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"name\", $$v)},expression:\"formData.promote.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.promoteBeginTime\",attrs:{\"label\":\"活动时间\",\"prop\":\"promote.promoteBeginTime\",\"error\":_vm.errorMessage['promote.promoteBeginTime']}},[_c('cms-picker',{staticStyle:{\"width\":\"380px\"},attrs:{\"disabledType\":\"before\"},on:{\"change\":_vm.getActiveTimer},model:{value:(_vm.activeTimer),callback:function ($$v) {_vm.activeTimer=$$v},expression:\"activeTimer\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.remark\",attrs:{\"label\":\"活动说明\",\"prop\":\"promote.remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"maxlength\":\"100\"},model:{value:(_vm.formData.promote.remark),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"remark\", $$v)},expression:\"formData.promote.remark\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.promoteType\",attrs:{\"label\":\"活动支持优惠形式\",\"prop\":\"promote.promoteType\"}},[_c('el-select',{attrs:{\"no-data-text\":\"暂无可用活动类型，请前往营销服务开通\"},on:{\"change\":_vm.changePromoteType},model:{value:(_vm.formData.promote.promoteType),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"promoteType\", $$v)},expression:\"formData.promote.promoteType\"}},_vm._l((_vm.storeServices),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":_vm.serFilter(item.promoteType),\"value\":item.promoteType}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.formData.promote.promoteType>2)),expression:\"(formData.promote.promoteType>2)\"}],ref:\"promote.promoteScope\",attrs:{\"label\":\"活动商品\",\"prop\":\"promote.promoteScope\"}},[_c('el-radio-group',{on:{\"change\":_vm.restSel},model:{value:(_vm.formData.promote.promoteScope),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"promoteScope\", $$v)},expression:\"formData.promote.promoteScope\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"全部商品\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"部分类目\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"部分商品\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":4}},[_vm._v(\"排除商品\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formData.promote.promoteScope===2),expression:\"formData.promote.promoteScope===2\"}],attrs:{\"label\":\"选择类目\"}},[_c('category-cascader',{staticStyle:{\"width\":\"380px\"},model:{value:(_vm.formData.ctgIds),callback:function ($$v) {_vm.$set(_vm.formData, \"ctgIds\", $$v)},expression:\"formData.ctgIds\"}})],1),_vm._v(\" \"),(_vm.formData.promote.promoteScope===3&&_vm.formData.promote.promoteType>2)?_c('el-form-item',{attrs:{\"label\":\"选择商品\"}},[(_vm.proStatus)?_c('cms-product',{attrs:{\"data\":_vm.formData.includeProducts,\"type\":\"product\"},model:{value:(_vm.formData.includeProductIds),callback:function ($$v) {_vm.$set(_vm.formData, \"includeProductIds\", $$v)},expression:\"formData.includeProductIds\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.promoteScope===4&_vm.formData.promote.promoteType>2)?_c('el-form-item',{attrs:{\"label\":\"选择商品\"}},[(_vm.proStatus)?_c('cms-product',{attrs:{\"data\":_vm.formData.excludeProducts,\"type\":\"product\"},model:{value:(_vm.formData.excludeProductIds),callback:function ($$v) {_vm.$set(_vm.formData, \"excludeProductIds\", $$v)},expression:\"formData.excludeProductIds\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.promoteType<=2)?_c('div',[_c('el-form-item',{staticClass:\"default\",attrs:{\"label\":\"活动条件\",\"prop\":\"promote.conProductNum\"}},[_c('el-radio-group',{model:{value:(_vm.formData.promote.conType),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conType\", $$v)},expression:\"formData.promote.conType\"}},[_c('el-radio',{attrs:{\"label\":1}},[_c('el-input',{staticStyle:{\"width\":\"180px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.conProductNum),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conProductNum\", $$v)},expression:\"formData.promote.conProductNum\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"满\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"件\")])],2)],1),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.conProductNum),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conProductNum\", $$v)},expression:\"formData.promote.conProductNum\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"第\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"件\")])],2)],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.formData.promote.promoteType==1?'设置折扣':'设置一口价'}},[(_vm.proStatus)?_c('cms-product',{attrs:{\"type\":\"product\",\"show\":false},on:{\"get\":_vm.getProductDiscount}}):_vm._e(),_vm._v(\" \"),(_vm.formData.products.length>0)?_c('table',{staticClass:\"dis-table\"},[_c('tr',[_c('th',[_vm._v(\"商品名称\")]),_vm._v(\" \"),_c('th',[_vm._v(\"商品售价\")]),_vm._v(\" \"),_c('th',[_vm._v(_vm._s(_vm.formData.promote.promoteType==1?'设置折扣':'设置一口价'))]),_vm._v(\" \"),_c('th',[_vm._v(\"限购数量\")]),_vm._v(\" \"),_c('th',[_vm._v(\"操作\")])]),_vm._v(\" \"),_vm._l((_vm.formData.products),function(item,index){return _c('tr',{key:index},[_c('td',{staticStyle:{\"width\":\"40%\"}},[_c('div',{staticClass:\"dis-img\"},[_c('img',{attrs:{\"src\":_vm.$cms.filterUrl(item.product.coverImage),\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"dis-name\"},[_vm._v(\"\\n                  \"+_vm._s(item.product.name)+\"\\n                \")])]),_vm._v(\" \"),_c('td',[_vm._v(\"\\n                \"+_vm._s(_vm.$cms.float(item.product.salePrice))+\"元\\n              \")]),_vm._v(\" \"),_c('td',[(_vm.formData.promote.promoteType==1)?_c('el-input-number',{attrs:{\"precision\":1,\"size\":\"mini\",\"step\":0.1,\"max\":10,\"min\":0.1},model:{value:(item.discount),callback:function ($$v) {_vm.$set(item, \"discount\", $$v)},expression:\"item.discount\"}}):_c('el-input-number',{attrs:{\"precision\":1,\"size\":\"mini\",\"step\":1,\"max\":999999,\"min\":0.1},model:{value:(item.specialPrice),callback:function ($$v) {_vm.$set(item, \"specialPrice\", $$v)},expression:\"item.specialPrice\"}})],1),_vm._v(\" \"),_c('td',[_c('el-input-number',{attrs:{\"step\":1,\"size\":\"mini\",\"max\":99,\"min\":1},model:{value:(item.limitNum),callback:function ($$v) {_vm.$set(item, \"limitNum\", $$v)},expression:\"item.limitNum\"}})],1),_vm._v(\" \"),_c('td',{staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.deleteDiscountData(index)}}},[_vm._v(\"删除\")])])})],2):_vm._e()],1)],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.promoteType==3)?_c('div',[_c('el-form-item',{staticClass:\"default\",attrs:{\"label\":\"活动条件\",\"prop\":\"promote.conOrderAmount\"}},[_c('el-radio-group',{model:{value:(_vm.formData.promote.conType),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conType\", $$v)},expression:\"formData.promote.conType\"}},[_c('el-radio',{attrs:{\"label\":1}},[_c('el-input',{staticStyle:{\"width\":\"180px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.conOrderAmount),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conOrderAmount\", $$v)},expression:\"formData.promote.conOrderAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"满\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.conOrderAmount),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conOrderAmount\", $$v)},expression:\"formData.promote.conOrderAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"每满\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1)],1)],1),_vm._v(\" \"),(_vm.formData.promote.promoteType==3)?_c('el-form-item',{staticClass:\"default\",attrs:{\"label\":\"促销方式\",\"prop\":\"promote.discountAmount\"}},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.discountAmount),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"discountAmount\", $$v)},expression:\"formData.promote.discountAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"减\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.promoteType==4)?_c('div',[_c('el-form-item',{attrs:{\"label\":\"活动优惠券\"}},[_c('cms-coupon',{attrs:{\"disabled\":true,\"data\":_vm.formData.coupons},model:{value:(_vm.formData.couponIds),callback:function ($$v) {_vm.$set(_vm.formData, \"couponIds\", $$v)},expression:\"formData.couponIds\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.promoteType==5)?_c('div',[_c('el-form-item',{attrs:{\"label\":\"活动条件\",\"prop\":\"promote.conOrderAmount\"}},[_c('el-radio-group',{model:{value:(_vm.formData.promote.conType),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conType\", $$v)},expression:\"formData.promote.conType\"}},[_c('el-radio',{attrs:{\"label\":1}},[_c('el-input',{staticStyle:{\"width\":\"180px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.conOrderAmount),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conOrderAmount\", _vm._n($$v))},expression:\"formData.promote.conOrderAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"满\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"促销方式\"}},[_c('el-radio-group',{model:{value:(_vm.formData.promote.discountMode),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"discountMode\", $$v)},expression:\"formData.promote.discountMode\"}},[_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"\\n              赠品\\n            \")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"\\n              优惠券\\n            \")])],1)],1),_vm._v(\" \"),(_vm.formData.promote.discountMode==3)?_c('el-form-item',{attrs:{\"label\":\"选择优惠券\"}},[_c('cms-coupon',{attrs:{\"label\":\"选择赠品\",\"disabled\":true,\"data\":_vm.formData.giveCoupons},model:{value:(_vm.formData.giveCouponIds),callback:function ($$v) {_vm.$set(_vm.formData, \"giveCouponIds\", $$v)},expression:\"formData.giveCouponIds\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.discountMode==2)?_c('el-form-item',{attrs:{\"label\":\"选择商品\"}},[(_vm.proStatus)?_c('cms-product',{attrs:{\"type\":\"product\",\"data\":_vm.formData.giveProducts},model:{value:(_vm.formData.giveProductIds),callback:function ($$v) {_vm.$set(_vm.formData, \"giveProductIds\", $$v)},expression:\"formData.giveProductIds\"}}):_vm._e()],1):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.formData.promote.promoteType==6)?_c('div',[_c('el-form-item',{attrs:{\"label\":\"活动条件\",\"prop\":\"promote.conOrderAmount\"}},[_c('el-input',{staticStyle:{\"width\":\"180px\"},attrs:{\"maxlength\":\"5\"},model:{value:(_vm.formData.promote.conOrderAmount),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"conOrderAmount\", _vm._n($$v))},expression:\"formData.promote.conOrderAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"满\")]),_vm._v(\" \"),_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.enable\",attrs:{\"label\":\"是否上线\",\"prop\":\"promote.enable\"}},[_c('cms-switch',{model:{value:(_vm.formData.promote.enable),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"enable\", $$v)},expression:\"formData.promote.enable\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.update(false)}}},[_vm._v(\"修改\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-28005130\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/marketing/activityMange/storeActivity/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-28005130\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-28005130\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-28005130\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/marketing/activityMange/storeActivity/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
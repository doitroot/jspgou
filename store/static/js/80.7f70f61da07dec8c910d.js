webpackJsonp([80],{"bn+b":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("lcoF"),n=s("4ZUh"),i={mixins:[a.a],data:function(){return{formData:{},loading:!1,answerContent:"",type:this.$route.query.type}},methods:{getFormData:function(t){var e=this;this.loading=!0,Object(n.e)({id:t}).then(function(t){200===t.code?e.formData=t.data:e.$errorMessage(t.message),e.loading=!1})},answer:function(){var t=this;""===this.answerContent||/^\s/.test(this.answerContent)?this.$errorMessage("请输入回复内容"):Object(n.d)({associatedId:this.formData.id,content:this.answerContent,productId:this.formData.product.id}).then(function(e){200===e.code?(t.$successMessage("回复成功"),t.$routerLink("/consult/list","list")):t.$errorMessage(e.message)})},update:function(){var t=this,e=!0,s={id:"",content:""};this.formData.assocatedAnswer.forEach(function(a){""===a.content||/^\s/.test(a.content)?(e=!1,t.$errorMessage("请输入回复内容")):(s.id=a.id,s.content=a.content)}),e&&Object(n.g)(s).then(function(e){200===e.code?(t.$successMessage("修改成功"),t.$routerLink("/consult/list","list")):t.$errorMessage(e.message)})}},created:function(){this.getFormData(this.$route.query.id)}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("cms-breadcrumb",{attrs:{to:"/consult/list",type:"list"}},[s("li",[t._v(t._s(t.$route.name))])]),t._v(" "),s("div",{staticClass:"cms-list-layout"},[t.loading?t._e():s("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"comment-table"},[s("tbody",[t._m(0),t._v(" "),s("tr",{staticStyle:{border:"1px solid #EBEEF5"}},[s("td",{staticClass:"comment-goods"},[s("div",{staticClass:"comment__inner"},[s("img",{staticClass:"product-img",attrs:{src:t.$cms.filterUrl(t.formData.product.coverImage)}}),t._v(" "),s("div",{staticClass:"product-title"},[s("h3",{staticClass:"comment-title-h"},[t._v(t._s(t.formData.product.name))])])])]),t._v(" "),s("td",{staticClass:"comment-item"},[s("div",{staticClass:"comment-remark"},[s("p",{staticStyle:{"font-size":"14px","margin-bottom":"10px","font-weight":"700"}},[t._v(t._s(t.formData.member.username)+":")]),t._v(" "),s("p",{staticClass:"comment-title"},[t._v(t._s(t.formData.content))]),t._v(" "),s("p",{staticStyle:{"margin-top":"6px","font-size":"14px"}},[t._v(t._s(t.$moment(t.formData.createTime)))])]),t._v(" "),t._l(t.formData.assocatedAnswer,function(e,a){return 2==t.type?s("div",{key:a,staticClass:"comment-remark",style:{"border-bottom":0==a?"0":"1px solid #EBEEF5"}},[s("div",[s("p",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                "+t._s(e.product.store.storeName)+" 回复:\n               ")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:5,maxlength:"255"},model:{value:e.content,callback:function(s){t.$set(e,"content",s)},expression:"info.content"}})],1)]):t._e()}),t._v(" "),1==t.type?s("div",{staticStyle:{width:"95%",padding:"10px 0 10px 10px"}},[s("div",[s("el-input",{attrs:{type:"textarea",rows:5,maxlength:"255"},model:{value:t.answerContent,callback:function(e){t.answerContent=e},expression:"answerContent"}})],1)]):t._e()],2)])])]),t._v(" "),1==t.type?s("div",{staticStyle:{"text-align":"right","margin-top":"30px",width:"49%"}},[s("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:function(e){return e.stopPropagation(),t.answer(e)}}},[t._v("回复咨询")])],1):t._e(),t._v(" "),2==t.type?s("div",{staticStyle:{"text-align":"right","margin-top":"30px",width:"49%"}},[s("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:function(e){return e.stopPropagation(),t.update(e)}}},[t._v("修改回复")])],1):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"comment-th"},[e("td",{staticStyle:{"padding-left":"10px"}},[e("span",[this._v("咨询商品")])]),this._v(" "),e("td",{staticStyle:{"padding-left":"10px"}},[e("div",[e("span",[this._v("咨询内容")])])])])}]};var r=s("C7Lr")(i,o,!1,function(t){s("nQoI")},"data-v-030fb647",null);e.default=r.exports},nQoI:function(t,e){}});
//# sourceMappingURL=80.7f70f61da07dec8c910d.js.map
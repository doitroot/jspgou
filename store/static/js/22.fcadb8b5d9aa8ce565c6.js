webpackJsonp([22],{"4Eo3":function(t,e){},AF8F:function(t,e){},EIYg:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("aA9S"),i=s.n(a),n=s("5HJ5"),o=s("lWcx"),r=s("4ZUh"),l={orderCode:"",commentStatus:"",evaluateStartTime:"",evaluateEndTime:"",status:"",page:1,size:10},c={components:{thumbImg:o.a},mixins:[n.a],data:function(){return{queryParams:i()({},l),tableData:[],total:0,timer:[],starsText:["差评","差评","中评","好评","好评"],max:100}},methods:{getTableData:function(){var t=this;this.loading=!0,Object(r.b)(this.queryParams).then(function(e){200===e.code?(e.data.content.forEach(function(t){t.isShow=!1,t.commentdList.forEach(function(t){t.showContent=!1,t.showStoreContent=!1})}),t.tableData=e.data.content,t.total=e.data.totalElements,t.loading=!1):(t.$errorMessage(e.message),t.loading=!1)})},showFirst:function(t){return t.substr(0,this.max)},showLeft:function(t){return t.substring(this.max)},toggleShow:function(t,e){1===e?this.$set(t,"showContent",!t.showContent):this.$set(t,"showStoreContent",!t.showStoreContent)},showColors:function(t){return t<=2?"fontRed":3===t?"fontBlue":""},toggle:function(t){this.$set(this.tableData[t],"isShow",!this.tableData[t].isShow)},setTimer:function(t){this.queryParams.evaluateStartTime=t[0],this.queryParams.evaluateEndTime=t[1],this.query()}},created:function(){this.getTableData(r.b,this.queryParams)}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cms-list-layout"},[s("cms-prompt",[s("li",[t._v("显示所有交易成功的订单")]),t._v(" "),s("li",[t._v("可对已回复的内容进行修改")])]),t._v(" "),s("section",{staticClass:"cms-list-query"},[s("div",{staticClass:"query-group"},[s("label",[t._v("订单号")]),t._v(" "),s("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.query(e):null}},model:{value:t.queryParams.orderCode,callback:function(e){t.$set(t.queryParams,"orderCode",e)},expression:"queryParams.orderCode"}})],1),t._v(" "),s("div",{staticClass:"query-group"},[s("label",[t._v("订单评价状态")]),t._v(" "),s("el-select",{on:{change:t.query},model:{value:t.queryParams.commentStatus,callback:function(e){t.$set(t.queryParams,"commentStatus",e)},expression:"queryParams.commentStatus"}},[s("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),s("el-option",{attrs:{label:"已评价",value:2}}),t._v(" "),s("el-option",{attrs:{label:"双方已评",value:4}})],1)],1),t._v(" "),s("div",{staticClass:"query-group"},[s("label",[t._v("评价时间")]),t._v(" "),s("cms-picker",{on:{change:t.setTimer},model:{value:t.timer,callback:function(e){t.timer=e},expression:"timer"}})],1),t._v(" "),s("div",{staticClass:"query-group"},[s("label",[t._v("商品评价")]),t._v(" "),s("el-select",{on:{change:t.query},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},[s("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),s("el-option",{attrs:{label:"好评",value:1}}),t._v(" "),s("el-option",{attrs:{label:"中评",value:2}}),t._v(" "),s("el-option",{attrs:{label:"差评",value:3}})],1)],1),t._v(" "),s("div",{staticClass:"query-group"},[s("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:t.query}},[t._v("查询")])],1)]),t._v(" "),s("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"comment-table"},t._l(t.tableData,function(e,a){return s("tbody",{key:a,style:{"margin-top":0!=a?"15px":"0"}},[s("tr",{staticClass:"comment-th"},[s("td",{staticStyle:{"padding-left":"10px"}},[s("div",[s("span",{staticClass:"comment-status"},[t._v("\n             "+t._s(2==e.order.commentStatus?"已评价":"双方已评")+"\n            ")]),t._v(" "),s("span",[t._v(t._s(e.orderCode))])])]),t._v(" "),s("td",{staticClass:"comment-time"},[s("span",{staticStyle:{"margin-left":"10px"}},[t._v("商品评价")]),t._v(" "),s("p",{staticClass:"comment-user",staticStyle:{width:"60%","padding-right":"10px"}},[s("span",[t._v("评价人："+t._s(e.memberName))]),t._v(" "),s("span",[t._v("评论时间：   "+t._s(t.$moment(e.createTime)))])])])]),t._v(" "),t._l(e.commentdList,function(e,a){return s("tr",{key:a,staticStyle:{border:"1px solid #EBEEF5"}},[s("td",{staticClass:"comment-goods",style:{"border-right":e.storeContent?"1px solid #EBEEF5":"0"}},[s("div",{staticClass:"comment__inner"},[s("img",{staticClass:"product-img",attrs:{src:t.$cms.filterUrl(e.product.coverImage)}}),t._v(" "),s("div",{staticClass:"product-title"},[s("h3",{staticClass:"comment-title-h"},[t._v(t._s(e.product.name))]),t._v(" "),e.productSkuName?s("p",{staticClass:"title-p",staticStyle:{"max-width":"340px"}},[t._v("\n                规格:"+t._s(e.productSkuName)+"\n              ")]):t._e()])])]),t._v(" "),s("td",{staticClass:"comment-item",staticStyle:{width:"50%"}},[s("div",{staticClass:"comment-remark",staticStyle:{display:"flex"},style:{"border-bottom":e.storeContent?"1px solid #EBEEF5":"0"}},[s("div",{staticStyle:{width:"35%"}},[s("el-rate",{staticClass:"starts-rate",attrs:{disabled:"","show-text":!0,texts:t.starsText},model:{value:e.matchV,callback:function(s){t.$set(e,"matchV",s)},expression:"info.matchV"}}),t._v(" "),s("p",{staticClass:"comment-title",class:t.showColors(e.matchV)},[s("span",[t._v(t._s(t.showFirst(e.content)))]),t._v(" "),s("transition",{attrs:{name:"el-collapse-transition"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"info.showContent"}]},[t._v(t._s(t.showLeft(e.content)))])]),t._v(" "),e.content.length>100&&!e.showContent?s("span",{staticClass:"show-more",on:{click:function(s){t.toggleShow(e,1)}}},[t._v("\n                查看更多\n               ")]):t._e(),t._v(" "),e.showContent?s("span",{staticClass:"show-more",on:{click:function(s){t.toggleShow(e,1)}}},[t._v("\n                隐藏更多\n               ")]):t._e()],1)],1),t._v(" "),s("div",{staticStyle:{width:"65%"}},[s("div",{staticClass:"comment-imgs"},[s("thumb-img",{attrs:{data:e.spaceDataList}})],1)])]),t._v(" "),e.storeContent?s("div",{staticClass:"comment-remark"},[s("div",{staticStyle:{width:"37%"}},[s("p",{staticStyle:{"font-size":"14px"}},[t._v("您的回复:")]),t._v(" "),s("p",{staticClass:"comment-title"},[s("span",[t._v(t._s(t.showFirst(e.storeContent)))]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showStoreContent,expression:"info.showStoreContent"}]},[t._v(t._s(t.showLeft(e.storeContent)))]),t._v(" "),e.storeContent.length>100&&!e.showStoreContent?s("span",{staticClass:"show-more",on:{click:function(s){t.toggleShow(e,2)}}},[t._v("\n                查看更多\n               ")]):t._e(),t._v(" "),e.showStoreContent?s("span",{staticClass:"show-more",on:{click:function(s){t.toggleShow(e,2)}}},[t._v("\n                隐藏更多\n               ")]):t._e()]),t._v(" "),s("p",{staticStyle:{"margin-top":"8px"}},[t._v(t._s(t.$moment(e.updateTime)))])])]):t._e()])])}),t._v(" "),s("tr",{staticClass:"comment-all"},[s("td",{attrs:{colspan:"2"}},[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{display:"flex","margin-left":"10px","align-items":"center"}},[s("span",{staticStyle:{cursor:"pointer","user-select":"none"},on:{click:function(e){t.toggle(a)}}},[t._v("店铺评价\n                "),s("i",{staticClass:"el-icon-arrow-right commnet-arrow"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],staticClass:"comment-stars"},[s("label",{staticClass:"stars-label"},[t._v("商品符合度:")]),t._v(" "),s("el-rate",{staticClass:"starts-rate",attrs:{disabled:"","show-text":!0,texts:t.starsText},model:{value:e.matchV,callback:function(s){t.$set(e,"matchV",s)},expression:"item.matchV"}}),t._v(" "),s("label",{staticClass:"stars-label"},[t._v("发货速度:")]),t._v(" "),s("el-rate",{staticClass:"starts-rate",attrs:{disabled:"","show-text":!0,texts:t.starsText},model:{value:e.express,callback:function(s){t.$set(e,"express",s)},expression:"item.express"}}),t._v(" "),s("label",{staticClass:"stars-label"},[t._v("服务态度:")]),t._v(" "),s("el-rate",{staticClass:"starts-rate",attrs:{disabled:"","show-text":!0,texts:t.starsText},model:{value:e.service,callback:function(s){t.$set(e,"service",s)},expression:"item.service"}})],1)]),t._v(" "),s("div",{staticStyle:{"margin-right":"10px"}},[4==e.order.commentStatus?s("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:function(s){t.$routerLink("/comment/update","update",{id:e.id})}}},[t._v("修改回复\n              ")]):t._e(),t._v(" "),2==e.order.commentStatus?s("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:function(s){t.$routerLink("/comment/update","update",{id:e.id})}}},[t._v("\n               发表回复\n              ")]):t._e()],1)])])]),t._v(" "),t._m(0,!0)],2)}),0),t._v(" "),0==t.tableData.length?s("div",{staticClass:"comment-empty"},[t._v("暂无数据")]):t._e(),t._v(" "),s("cms-pagination",{attrs:{total:t.total},on:{change:t.getPage}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{height:"20px"},attrs:{colspan:"2"}})])}]};var u=s("C7Lr")(c,m,!1,function(t){s("4Eo3")},"data-v-2cbf3462",null);e.default=u.exports},lWcx:function(t,e,s){"use strict";var a={name:"thumbImg",props:{value:[String,Number],params:{default:function(){return{}},type:Object},data:{type:[Array,Object]},props:{default:function(){return{id:"id",url:"url"}},type:Object}},data:function(){return{state:!1,resource:{name:"全部图片",id:""},pictureItems:[]}},methods:{showViewer:function(){this.$viewer({list:this.data})},deleteItems:function(t){this.pictureItems.splice(t,1),this.pictureItems.length>0?(this.$emit("change",this.pictureItems,this.index,this.params),this.$emit("input",this.pictureItems[0].id)):(this.$emit("change",null,this.index,this.params),this.$emit("input",""))}},watch:{data:{handler:function(){"object"===this.$cms.validateObjcet(this.data)?(this.pictureItems=[],this.data[this.props.id]&&""!==this.data[this.props.id]&&this.pictureItems.push(this.data)):this.pictureItems=this.data},deep:!0,immediate:!0}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"viwer-box"},t._l(t.pictureItems,function(e,a){return s("div",{key:a,staticClass:"viwer-warpper rectangular"},[s("img",{staticClass:"thumb-img",attrs:{src:t.$cms.filterUrl(e.url)}}),t._v(" "),s("div",{staticClass:"thumb-cover"},[s("i",{staticClass:"el-icon-zoom-in",on:{click:function(e){return e.stopPropagation(),t.showViewer(e)}}})])])}),0)])},staticRenderFns:[]};var n=s("C7Lr")(a,i,!1,function(t){s("AF8F")},"data-v-7ab7fd6b",null);e.a=n.exports}});
//# sourceMappingURL=22.fcadb8b5d9aa8ce565c6.js.map
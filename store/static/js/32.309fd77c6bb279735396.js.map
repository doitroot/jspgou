{"version":3,"sources":["webpack:///./src/api/shop/selfShops.js","webpack:///src/views/shop/shops/shopSecurity/view.vue","webpack:///./src/views/shop/shops/shopSecurity/view.vue?eaab","webpack:///./src/views/shop/shops/shopSecurity/view.vue"],"names":["__webpack_require__","d","__webpack_exports__","serviceList","serviceSaveView","serviceCancelView","cancelService","__WEBPACK_IMPORTED_MODULE_0__fetch__","params","axios","get","post","view","mixins","mixins_form","list","components","payBox","pay","data","checked","orderNum","bizContent","consumerServiceId","payStatus","formData","methods","openSecurity","id","_this","this","$nextTick","$refs","showPay","canceSecurity","_this2","loading","Object","selfShops","ids","then","res","code","$successMessage","setTimeout","$routerLink","$errorMessage","message","getItem","type","_this3","getPay","created","$route","query","shopSecurity_view","render","_vm","_h","$createElement","_c","_self","attrs","to","_v","_s","name","staticClass","collapse","directives","rawName","value","expression","src","$cms","filterUrl","resourcesUrl","alt","serviceName","_e","description","float","bond","domProps","innerHTML","protocolContent","model","callback","$$v","staticStyle","margin","text-align","on","click","$event","storeBondDetailId","disabled","ref","payScene","change","staticRenderFns","Component","normalizeComponent","ssrContext"],"mappings":"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","file":"static/js/32.309fd77c6bb279735396.js","sourcesContent":["// 自营商店相关接口\nimport axios from '../fetch'\n\n// 保障服务列表\nexport const serviceList = params => { return axios.get('/admin/store/sysconsumerservice/list', { params: params }) }\n\n// 保障服务详情（未加入）\nexport const serviceSaveView = params => { return axios.get('/admin/store/sysconsumerservice/toSaveService', { params: params }) }\n\n// 保障服务详情（已加入）\nexport const serviceCancelView = params => { return axios.get('/admin/store/sysconsumerservice/toCancelService', { params: params }) }\n\n// 保障服务-取消服务\nexport const cancelService = params => { return axios.post('/admin/store/sysconsumerservice/cancelService', params) }\n\n// 保障服务-开通服务\nexport const servicePay = params => { return axios.post('/admin/store/pay', params) }\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/shop/selfShops.js","<template>\r\n  <div>\r\n    <cms-breadcrumb to=\"/store/security/list\">\r\n      <li>{{$route.name}}</li>\r\n    </cms-breadcrumb>\r\n    <div class=\"cms-list-layout\">\r\n      <cms-prompt collapse=\"true\">\r\n        <li>商家加入服务需要支付指定的保证金金额，系统将该金额计入为保证金账户</li>\r\n        <li>取消服务保证金将自动退回至账户余额内，账户内余额可进行提现操作</li>\r\n      </cms-prompt>\r\n      <div class=\"security-wrap\" v-loading=\"loading\" v-if=\"formData\">\r\n        <div class=\"security-wrap__head\">\r\n          <img class=\"security-wrap__img\" :src=\"$cms.filterUrl(formData.resourcesUrl)\" alt>\r\n          <div class=\"security-wrap__inner\">\r\n            <div class=\"security-wrap__opt\">\r\n              <h3 class=\"security-wrap__title\">{{formData.serviceName}}</h3>\r\n              <div class=\"security-wrap__span\" v-if=\"type === 'isOpen'\">\r\n                <b class=\"t-ok iconfont icon-gou\"></b>\r\n                <span>已加入</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"security-wrap__txt indent\">{{formData.description}}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"security-wrap__protocol\">\r\n          <h3 class=\"security-wrap__price\">保证金：&nbsp;&nbsp;&nbsp; ￥{{$cms.float(formData.bond)}}</h3>\r\n          <p class=\"security-wrap__text\" v-html=\"formData.protocolContent\"></p>\r\n          <div class=\"security-wrap__checks\" v-show=\"type === 'open'\">\r\n            <el-checkbox v-model=\"checked\">是否同意以上协议</el-checkbox>\r\n          </div>\r\n          <div style=\"margin:30px auto 0 auto;text-align:center\">\r\n            <el-button\r\n              type=\"primary\"\r\n              v-if=\"type === 'cancel'\"\r\n              @click=\"canceSecurity(formData.storeBondDetailId)\"\r\n              class=\"long-btn\"\r\n            >取消服务</el-button>\r\n            <el-button\r\n              type=\"primary\"\r\n              v-else\r\n              @click=\"openSecurity(formData.id)\"\r\n              :disabled=\"!checked\"\r\n               class=\"long-btn\"\r\n            >开通</el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <pay-box\r\n        ref=\"pay\"\r\n        payScene=\"storeBindConsumerService\"\r\n        :bizContent=\"bizContent\"\r\n        @change=\"getPay\"\r\n        v-if=\"payStatus\"\r\n      ></pay-box>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport form from '@/mixins/form'\r\nimport list from '@/mixins/list'\r\nimport payBox from '@/components/operation/pay'\r\nimport {\r\n  serviceSaveView,\r\n  serviceCancelView,\r\n  cancelService\r\n} from '@/api/shop/selfShops.js'\r\nexport default {\r\n  mixins: [form, list],\r\n  components: { payBox },\r\n  data() {\r\n    return {\r\n      checked: false,\r\n      orderNum: '',\r\n      bizContent: {\r\n        consumerServiceId: ''\r\n      },\r\n      payStatus: false,\r\n      formData: {}\r\n    }\r\n  },\r\n  methods: {\r\n    openSecurity(id) {\r\n      this.bizContent.consumerServiceId = id\r\n      this.payStatus = true\r\n      this.$nextTick(() => {\r\n        this.$refs.pay.showPay()\r\n      })\r\n    },\r\n    canceSecurity(id) {\r\n      this.loading = true\r\n      cancelService({ ids: [id] }).then(res => {\r\n        this.loading = false\r\n        if (res.code === 200) {\r\n          this.$successMessage('取消成功')\r\n          setTimeout(() => {\r\n            this.$routerLink('/store/security/list')\r\n          }, 1000)\r\n        } else {\r\n          this.$errorMessage(res.message)\r\n        }\r\n      })\r\n    },\r\n    getItem(id, type) {\r\n      this.loading = true\r\n      if (type === 'open') {\r\n        serviceSaveView({ id: id }).then(res => {\r\n          this.loading = false\r\n          if (res.code === 200) {\r\n            this.formData = res.data\r\n          } else {\r\n            this.$errorMessage(res.code + res.message)\r\n          }\r\n        })\r\n      } else {\r\n        serviceCancelView({ id: id }).then(res => {\r\n          this.loading = false\r\n          if (res.code === 200) {\r\n            this.formData = res.data\r\n          } else {\r\n            this.$errorMessage(res.code + res.message)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    getPay(res) {\r\n      // 获取支付状态\r\n      if (res) {\r\n        this.$routerLink('/store/security/list')\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    // 首次触发\r\n    this.getItem(this.$route.query.id, this.$route.query.type)\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.security-wrap {\r\n  width: 100%;\r\n  margin: 15px auto;\r\n  padding: 35px;\r\n  border: 1px solid rgba(219, 224, 229, 1);\r\n  box-shadow: 1px 1px 5px rgba(236, 236, 236, 1);\r\n\r\n  &__head {\r\n    padding: 0 0 15px 0;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    overflow: hidden;\r\n  }\r\n  &__inner {\r\n    margin-left: 120px;\r\n  }\r\n  &__title {\r\n    font-size: 16px;\r\n    color: #1e1e1e;\r\n    line-height: 40px;\r\n    float: left;\r\n    margin-right: 35px;\r\n  }\r\n  &__price {\r\n    font-size: 14px;\r\n    padding: 15px 0;\r\n    color: #333;\r\n  }\r\n  &__opt {\r\n    overflow: hidden;\r\n  }\r\n  &__span {\r\n    float: left;\r\n    font-size: 13px;\r\n    color: #666;\r\n    line-height: 20px;\r\n  }\r\n  &__img {\r\n    float: left;\r\n    width: 100px;\r\n    height: 100px;\r\n    background: #eee;\r\n  }\r\n  &__txt {\r\n    font-size: 14px;\r\n    color: #666;\r\n  }\r\n  &__protocol {\r\n    margin: 0 auto;\r\n  }\r\n  &__text {\r\n    overflow: auto;\r\n    max-height: 400px;\r\n    border: 1px solid #ddd;\r\n    padding: 15px;\r\n  }\r\n  &__checks {\r\n    line-height: 48px;\r\n    text-align: center;\r\n  }\r\n}\r\n.indent {\r\n  text-indent: 1em;\r\n}\r\n.t-ok {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #008000;\r\n  position: relative;\r\n  top: 2px;\r\n}\r\n.long-btn{\r\n  width: 240px;\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/shop/shops/shopSecurity/view.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":\"/store/security/list\"}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-list-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":\"true\"}},[_c('li',[_vm._v(\"商家加入服务需要支付指定的保证金金额，系统将该金额计入为保证金账户\")]),_vm._v(\" \"),_c('li',[_vm._v(\"取消服务保证金将自动退回至账户余额内，账户内余额可进行提现操作\")])]),_vm._v(\" \"),(_vm.formData)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"security-wrap\"},[_c('div',{staticClass:\"security-wrap__head\"},[_c('img',{staticClass:\"security-wrap__img\",attrs:{\"src\":_vm.$cms.filterUrl(_vm.formData.resourcesUrl),\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"security-wrap__inner\"},[_c('div',{staticClass:\"security-wrap__opt\"},[_c('h3',{staticClass:\"security-wrap__title\"},[_vm._v(_vm._s(_vm.formData.serviceName))]),_vm._v(\" \"),(_vm.type === 'isOpen')?_c('div',{staticClass:\"security-wrap__span\"},[_c('b',{staticClass:\"t-ok iconfont icon-gou\"}),_vm._v(\" \"),_c('span',[_vm._v(\"已加入\")])]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"security-wrap__txt indent\"},[_vm._v(_vm._s(_vm.formData.description))])])]),_vm._v(\" \"),_c('div',{staticClass:\"security-wrap__protocol\"},[_c('h3',{staticClass:\"security-wrap__price\"},[_vm._v(\"保证金：    ￥\"+_vm._s(_vm.$cms.float(_vm.formData.bond)))]),_vm._v(\" \"),_c('p',{staticClass:\"security-wrap__text\",domProps:{\"innerHTML\":_vm._s(_vm.formData.protocolContent)}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type === 'open'),expression:\"type === 'open'\"}],staticClass:\"security-wrap__checks\"},[_c('el-checkbox',{model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"是否同意以上协议\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"30px auto 0 auto\",\"text-align\":\"center\"}},[(_vm.type === 'cancel')?_c('el-button',{staticClass:\"long-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.canceSecurity(_vm.formData.storeBondDetailId)}}},[_vm._v(\"取消服务\")]):_c('el-button',{staticClass:\"long-btn\",attrs:{\"type\":\"primary\",\"disabled\":!_vm.checked},on:{\"click\":function($event){_vm.openSecurity(_vm.formData.id)}}},[_vm._v(\"开通\")])],1)])]):_vm._e(),_vm._v(\" \"),(_vm.payStatus)?_c('pay-box',{ref:\"pay\",attrs:{\"payScene\":\"storeBindConsumerService\",\"bizContent\":_vm.bizContent},on:{\"change\":_vm.getPay}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-d1ed5a2a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/shop/shops/shopSecurity/view.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d1ed5a2a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./view.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./view.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./view.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d1ed5a2a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./view.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d1ed5a2a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shop/shops/shopSecurity/view.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
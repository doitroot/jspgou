webpackJsonp([3],{GgLQ:function(t,e){},GyzD:function(t,e){},Jpdf:function(t,e,a){"use strict";"function"==typeof Symbol&&Symbol.iterator;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};function o(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}!function(){function e(t){function e(t){t.parentElement.removeChild(t)}function a(t,e,a){var r=0===a?t.children[0]:t.children[a-1].nextSibling;t.insertBefore(e,r)}function i(t,e){var a=this;this.$nextTick(function(){return a.$emit(t.toLowerCase(),e)})}var n=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(n,s).map(function(t){return"on"+t}),c=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(t){var e=this.$slots.default;if(e&&1===e.length){var a=e[0];a.componentOptions&&"transition-group"===a.componentOptions.tag&&(this.transitionMode=!0)}var r=0,i=e,n=this.$slots,s=n.header,l=n.footer;s&&(r=s.length,i=i?[].concat(o(s),o(i)):[].concat(o(s))),l&&(i=i?[].concat(o(i),o(l)):[].concat(o(l))),this.headerOffset=r;var c=null,d=function(t,e){c=function(t,e,a){return void 0==a?t:((t=null==t?{}:t)[e]=a,t)}(c,t,e)};if(d("attrs",this.$attrs),this.componentData){var u=this.componentData,p=u.on,f=u.props;d("on",p),d("props",f)}return t(this.element,c,i)},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var a={};n.forEach(function(t){a["on"+t]=function(t){var e=this;return function(a){null!==e.realList&&e["onDrag"+t](a),i.call(e,t,a)}}.call(e,t)}),s.forEach(function(t){a["on"+t]=i.bind(e,t)});var o=r({},this.options,a,{onMove:function(t,a){return e.onDragMove(t,a)}});!("draggable"in o)&&(o.draggable=">*"),this._sortable=new t(this.rootContainer,o),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==l.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=function(t,e,a){if(!t)return[];var r=t.map(function(t){return t.elm}),i=[].concat(o(e)).map(function(t){return r.indexOf(t)});return a?i.filter(function(t){return-1!==t}):i}(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=function(t,e){return t.map(function(t){return t.elm}).indexOf(e)}(this.getChildrenNodes()||[],t);return-1===e?null:{index:e,element:this.realList[e]}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(o(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var a=function(a){return a.splice(e,0,a.splice(t,1)[0])};this.alterList(a)},getRelatedContextFromMoveEvent:function(t){var e=t.to,a=t.related,o=this.getUnderlyingPotencialDraggableComponent(e);if(!o)return{component:o};var i=o.realList,n={list:i,component:o};if(e!==a&&i&&o.getUnderlyingVm){var s=o.getUnderlyingVm(a);if(s)return r(s,n)}return n},getVmIndex:function(t){var e=this.visibleIndexes,a=e.length;return t>a-1?a:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),c=t.item},onDragAdd:function(t){this.updateEvenemt(t);var a=t.item._underlying_vm_;if(void 0!==a){e(t.item);var r=this.getVmIndex(t.newIndex);this.spliceList(r,0,a),this.computeIndexes();var o={element:a,newIndex:r};this.emitChanges({added:o})}},onDragRemove:function(t){if(this.updateEvenemt(t),a(this.rootContainer,t.item,t.oldIndex),this.isCloning)e(t.clone);else{var r=this.context.index;this.spliceList(r,1);var o={element:this.context.element,oldIndex:r};this.resetTransitionData(r),this.emitChanges({removed:o})}},onDragUpdate:function(t){this.updateEvenemt(t),e(t.item),a(t.from,t.item,t.oldIndex);var r=this.context.index,o=this.getVmIndex(t.newIndex);this.updatePosition(r,o);var i={element:this.context.element,oldIndex:r,newIndex:o};this.emitChanges({moved:i})},updateEvenemt:function(t){this.updateProperty(t,"newIndex"),this.updateProperty(t,"oldIndex")},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var a=[].concat(o(e.to.children)).filter(function(t){return"none"!==t.style.display}),r=a.indexOf(e.related),i=t.component.getVmIndex(r);return-1!=a.indexOf(c)||!e.willInsertAfter?i:i+1},onDragMove:function(t,e){var a=this.move;if(!a||!this.realList)return!0;var o=this.getRelatedContextFromMoveEvent(t),i=this.context,n=this.computeFutureIndex(o,t);return r(i,{futureIndex:n}),r(t,{relatedContext:o,draggedContext:i}),a(t,e)},onDragEnd:function(t){this.computeIndexes(),c=null}}}}Array.from||(Array.from=function(t){return[].slice.call(t)});var i=a("lPr8");t.exports=e(i)}()},MgeX:function(t,e,a){t.exports={default:a("VX3H"),__esModule:!0}},N551:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("HzJ8"),o=a.n(r),i=a("3cXf"),n=a.n(i),s=a("GBzI"),l={data:function(){return{checkLocalItem:"",items0:[],items1:[],items2:[],items3:[],checkIds:[],categoryId:0}},computed:{categoryName:function(){for(var t="",e=0;e<this.checkIds.length;e++)""!==this.checkIds[e].name&&0===e?t=this.checkIds[e].name:""!==this.checkIds[e].name&&(t=t+" > "+this.checkIds[e].name);return t},LocalCategoryList:function(){var t=localStorage.getItem("LocalCategoryList"),e=[];return t&&(e=JSON.parse(t)),e}},methods:{getCategoryList:function(t,e){var a=this;if(0===e)this.items2=[],this.items3=[],this.$set(this.checkIds,1,{name:"",id:""}),this.$set(this.checkIds,2,{name:"",id:""}),this.$set(this.checkIds,3,{name:"",id:""});else if(1===e)this.items3=[],this.$set(this.checkIds,2,{name:"",id:""}),this.$set(this.checkIds,3,{name:"",id:""});else if(2===e)this.$set(this.checkIds,3,{name:"",id:""});else{if(3===e)return!0;this.checkIds=[{name:"",id:""},{name:"",id:""},{name:"",id:""},{name:"",id:""}]}Object(s.b)({parentId:t}).then(function(t){if(0===e)a.items1=t.data;else if(1===e)a.items2=t.data;else if(2===e)a.items3=t.data;else{if(3===e)return!1;a.items0=t.data}})},nextStep:function(){this.setLocalCategoryList(),this.$store.dispatch("setCateGoryInfo",{categoryId:this.categoryId,parentInfo:this.checkIds})},getLocalCategoryList:function(t){var e=this;t.forEach(function(t,a){""!==t.id&&(e.getCategoryList(t.id,a),e.categoryId=t.id)}),this.checkIds=this.$cms.deepCopy(t)},setLocalCategoryList:function(){if(localStorage.getItem("LocalCategoryList")){var t=JSON.parse(localStorage.getItem("LocalCategoryList")),e=!0,a={id:t.length+1,name:this.categoryName,items:this.checkIds},r=!0,i=!1,s=void 0;try{for(var l,c=o()(t);!(r=(l=c.next()).done);r=!0){if(l.value.name===a.name){e=!1;break}}}catch(t){i=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw s}}if(e){t.push(a);var d=n()(t);localStorage.setItem("LocalCategoryList",d)}}else{var u={id:1,name:this.categoryName,items:this.checkIds},p=n()([u]);localStorage.setItem("LocalCategoryList",p)}},setCheckItem:function(t,e,a){this.checkLocalItem="",this.categoryId=t.id,this.$set(this.checkIds,a,{name:t.cateName,id:t.id}),this.getCategoryList(t.id,a)}},activated:function(){this.$store.state.product.cache||this.getCategoryList()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-form-layout "},[a("div",{staticClass:"commonly-class"},[a("label",{staticClass:"commonly-class-label"},[t._v("常用分类")]),t._v(" "),a("el-select",{staticClass:"commonly-class-select",attrs:{"value-key":"id"},on:{change:t.getLocalCategoryList},model:{value:t.checkLocalItem,callback:function(e){t.checkLocalItem=e},expression:"checkLocalItem"}},t._l(t.LocalCategoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.items}})}),1)],1),t._v(" "),a("div",{staticClass:"step-class-warpper"},[a("div",{staticClass:"step-class-box"},[a("div",{staticClass:"check-class-title"},[t._v("您当前选择的分类：\n      "),a("span",{staticClass:"blue"},[t._v("\n        "+t._s(t.categoryName)+"\n      ")])]),t._v(" "),a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items0,function(e,r){return a("li",{key:e.id,staticClass:"items",class:[t.checkIds[0]&&t.checkIds[0].id===e.id?"active":""],on:{click:function(a){t.setCheckItem(e,r,0)}}},[t._v(t._s(e.cateName))])}),0)]),t._v(" "),t.items1.length>0?a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items1,function(e,r){return a("li",{key:e.id,staticClass:"items",class:t.checkIds[1]&&t.checkIds[1].id===e.id?"active":"",on:{click:function(a){t.setCheckItem(e,r,1)}}},[t._v(t._s(e.cateName))])}),0)]):t._e(),t._v(" "),t.items2.length>0?a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items2,function(e,r){return a("li",{key:e.id,staticClass:"items",class:t.checkIds[2]&&t.checkIds[2].id===e.id?"active":"",on:{click:function(a){t.setCheckItem(e,r,2)}}},[t._v(t._s(e.cateName))])}),0)]):t._e(),t._v(" "),t.items3.length>0?a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items3,function(e,r){return a("li",{key:e.id,staticClass:"items",class:t.checkIds[3]&&t.checkIds[3].id===e.id?"active":"",on:{click:function(a){t.setCheckItem(e,r,3)}}},[t._v(t._s(e.cateName))])}),0)]):t._e()])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",padding:"15px 0"}},[a("cms-button",{attrs:{disabled:0===t.categoryId},on:{click:t.nextStep}},[t._v("下一步，填写商品信息")])],1)])},staticRenderFns:[]};var d=a("C7Lr")(l,c,!1,function(t){a("GgLQ")},null,null).exports,u=a("MgeX"),p=a.n(u),f=a("aA9S"),h=a.n(f),m=a("OMN4"),v=a.n(m),g=a("x1ym"),b=a("AsmT"),_=a("NyU8"),y=a("0dUi"),C=a("Jpdf"),x={product:{storeId:"",storeCategoryId:null,categoryId:"",name:"",virtualCardTplId:null,itemNumber:"",brandId:"",summary:"",summaryColor:"#ff0000",templeteId:"",weight:0,volume:0,sellGoodsSale:!0,isInvoice:!0,status:3},productTypeId:"",storeCategoryIds:[],imageResources:[{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""}],videoResources:[{remark:"",vdResourceId:"",url:""}],txt:{pcTxt:"请输入商品详情",mobileTxt:"",topTplId:null,bottomTplId:null},ext:{maxDeductible:0,unit:"件",keyword:"",evaluation:"",storeServiceId:"",storeServiceIds:[]}},I={components:{draggable:a.n(C).a},data:function(){return{loading:!1,status:!1,fixed:!0,txtModel:"pc",options:[],props:{value:"id",label:"cateName",children:"childs",disabled:"isAuth"},freightItems:[],freightInfo:{},serviceItems:[],formatItems:[],formData:h()({},x),categoryName:"",isVirtual:!1,rules:{"product.templeteId":[g.a.required("必须选择一个运费模板","change")],"product.categoryId":[g.a.required("必须选择一个商品分类")],"product.itemNumber":[g.a.custom(function(t,e,a){""===e?a():Object(_.a)({itemNumber:e}).then(function(t){t.data?a():a(new Error("货号重复"))})})],"product.name":[g.a.required("请输入商品名称"),g.a.max(100,"最多只能输入100个字符")],"product.summary":[g.a.max(100,"最多只能输入100个字符")],"product.volume":[g.a.required(),g.a.float(),g.a.decimal()],"product.weight":[g.a.required(),g.a.float(),g.a.decimal()],"ext.maxDeductible":[g.a.float()],imageResources:[g.a.required("至少上传一张商品图片")],"product.sellGoodsSale":[g.a.required()],"product.isInvoice":[g.a.required()]},errorMessage:{}}},methods:{initData:function(){this.formData.product.categoryId=this.$store.state.product.categoryId,this.categoryName=this.$store.state.product.categoryName,this.getRelevantInfos(this.formData.product.categoryId)},getRelevantInfos:function(t){var e=this;v.a.all([Object(s.a)({id:t}),Object(_.i)(),Object(y.c)(),Object(b.g)(),Object(b.f)()]).then(v.a.spread(function(t,a,r,o,i){e.formatItems=a.data,e.formData.productTypeId=t.data.productTypeId,e.isVirtual=t.data.virtual,e.freightItems=r.data,e.serviceItems=o.data,e.options=[];e.options=[].concat(i.data),e.loading=!1}))},changeTemplate:function(t){var e=this;Object(y.b)({id:t}).then(function(t){e.freightInfo=t.data})},getStoreCategoryId:function(t){this.formData.product.storeCategoryId=t[t.length-1]},validateImgs:function(){var t=this,e=!1;this.formData.imageResources;var a=!0,r=!1,i=void 0;try{for(var n,s=o()(this.formData.imageResources);!(a=(n=s.next()).done);a=!0){""!==n.value.imgResourceId&&(e=!0)}}catch(t){r=!0,i=t}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return!!e||(this.errorMessage={},setTimeout(function(){t.$set(t.errorMessage,"imageResources","至少上传一张商品图片"),t.errorPosition("imageResources")},1),!1)},prevStep:function(){this.$store.dispatch("setCache",!0),this.$store.dispatch("setStep","step1")},nextStep:function(){var t=this;this.$refs.form.validate(function(e,a){if(e){if(t.validateImgs()){var r=t.formatFormData(t.formData);t.$store.dispatch("setBaseProductInfo",r).then(function(e){t.$store.dispatch("setStep","step3")})}}else{var o="";for(var i in a)if(a.hasOwnProperty(i)){o=i;break}t.errorPosition(o)}})},formatFormData:function(t){var e=h()({},t);return e.ext.evaluation=e.ext.evaluationView,e.ext.storeServiceIds.length>0&&(e.ext.storeServiceId=e.ext.storeServiceIds.join(",")),e.product.storeCategoryId=t.storeCategoryIds[t.storeCategoryIds.length-1],e},errorPosition:function(t){var e=document.querySelector("html"),a=this.$refs[t].$el;return e.scrollTop=a.offsetTop-350,!1},getProductVideo:function(t,e){t?this.formData.videoResources.length>0&&this.$set(this.formData.videoResources,e,{remark:"",vdResourceId:t[0].id,url:t[0].url}):this.formData.videoResources=[{remark:"",vdResourceId:"",url:""}]},getProductImg:function(t,e){this.$set(this.formData.imageResources,e,{remark:"",imgResourceId:t[0].id,url:t[0].url}),this.errorMessage={}},imgMove:function(t,e){if("next"===e){if(0===t)return!1;var a=this.formData.imageResources[t-1];this.$set(this.formData.imageResources,t-1,this.formData.imageResources[t]),this.$set(this.formData.imageResources,t,a)}else{if(4===t)return!1;var r=this.formData.imageResources[t+1];this.$set(this.formData.imageResources,t+1,this.formData.imageResources[t]),this.$set(this.formData.imageResources,t,r)}},imgDelete:function(t){this.$set(this.formData.imageResources,t,{remark:"",imgResourceId:"",url:""})}},filters:{deliveryWayFilter:function(t){return["","快递","ems","平邮"][parseInt(t)]},districtFilter:function(t){if(""===t)return"";var e=JSON.parse(t),a=[],r=!0,i=!1,n=void 0;try{for(var s,l=o()(p()(e));!(r=(s=l.next()).done);r=!0){var c=s.value;a.push(c)}}catch(t){i=!0,n=t}finally{try{!r&&l.return&&l.return()}finally{if(i)throw n}}return a[0]+"..."}},activated:function(){this.$store.state.product.cache||(this.formData=this.$cms.deepCopy(x)),this.initData()},mounted:function(){var t=this;document.querySelector("#layout").addEventListener("scroll",function(e){var a=e.target.scrollTop,r=e.target.clientHeight,o=e.target.scrollHeight;!1===t.fixed&&(a+=70),parseInt(a)>o-r-70?t.fixed=!1:t.fixed=!0})}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cms-form-layout loading-top product-main-warpper"},[a("el-form",{ref:"form",staticStyle:{"margin-bottom":"48px"},attrs:{rules:t.rules,model:t.formData,"label-width":"210px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("h3",{staticClass:"cms-segmentation"},[t._v("基本信息")]),t._v(" "),a("el-form-item",{ref:"product.categoryId",attrs:{label:"商品分类",prop:"product.categoryId"}},[t._v("\n      "+t._s(t.categoryName)+"\n    ")]),t._v(" "),a("el-form-item",{attrs:{label:"店铺分类",prop:"product.storeCategoryId"}},[a("el-cascader",{attrs:{options:t.options,props:t.props,"change-on-select":!0,placeholder:"请选择分类"},model:{value:t.formData.storeCategoryIds,callback:function(e){t.$set(t.formData,"storeCategoryIds",e)},expression:"formData.storeCategoryIds"}})],1),t._v(" "),a("el-form-item",{ref:"product.name",attrs:{label:"商品名称",prop:"product.name"}},[a("el-input",{attrs:{type:"textarea",resize:"none",spellcheck:"false",maxlength:"100"},model:{value:t.formData.product.name,callback:function(e){t.$set(t.formData.product,"name",e)},expression:"formData.product.name"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("商品名称长度控制在100个字符以内")])],1),t._v(" "),t.isVirtual?a("el-form-item",{attrs:{label:"虚拟规格商品",prop:"product.virtualCardTplId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.product.virtualCardTplId,callback:function(e){t.$set(t.formData.product,"virtualCardTplId",e)},expression:"formData.product.virtualCardTplId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.product.templeteId,callback:function(e){t.$set(t.formData.product,"templeteId",e)},expression:"formData.product.templeteId"}},[a("el-option",{attrs:{label:"默认模板",value:null}})],1)],1),t._v(" "),a("span",{staticClass:"gray"},[t._v("选择虚拟库（卡密）模板即可，点击新建模板增加")])],1):t._e(),t._v(" "),a("el-form-item",{ref:"product.itemNumber",attrs:{label:"货号",prop:"product.itemNumber"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:t.formData.product.itemNumber,callback:function(e){t.$set(t.formData.product,"itemNumber",e)},expression:"formData.product.itemNumber"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("货号用于商家管理商品的一种编号，仅供商家使用，最多输入30个字符")])],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",prop:"product.brandId"}},[a("cms-brand",{model:{value:t.formData.product.brandId,callback:function(e){t.$set(t.formData.product,"brandId",e)},expression:"formData.product.brandId"}},[a("cms-button",{attrs:{type:"info",size:"small"}},[t._v("选择品牌")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"product-profile",attrs:{label:"商品简介",prop:"product.summary"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:"100"},model:{value:t.formData.product.summary,callback:function(e){t.$set(t.formData.product,"summary",e)},expression:"formData.product.summary"}}),t._v(" "),a("el-color-picker",{staticClass:"product-color-picker",model:{value:t.formData.product.summaryColor,callback:function(e){t.$set(t.formData.product,"summaryColor",e)},expression:"formData.product.summaryColor"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("商品简介显示在商品标题下方,长度不超过100字符，右侧的颜色板可设置显示颜色\n      ")])],1),t._v(" "),a("el-form-item",{ref:"product.templeteId",staticClass:"add-select-padd",attrs:{label:"运费模板",prop:"product.templeteId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},on:{change:t.changeTemplate},model:{value:t.formData.product.templeteId,callback:function(e){t.$set(t.formData.product,"templeteId",e)},expression:"formData.product.templeteId"}},t._l(t.freightItems,function(t){return a("el-option",{key:t.id,attrs:{label:t.expressName,value:t.id}})}),1),t._v(" "),a("div",[a("table",{staticClass:"sku-table",staticStyle:{width:"380px","margin-top":"10px"}},[a("tr",[a("th",[t._v("运送方式")]),t._v(" "),a("th",[t._v("运送到")]),t._v(" "),a("th",[t._v("首件(个)")]),t._v(" "),a("th",[t._v("运费")]),t._v(" "),a("th",[t._v("续建(个)")]),t._v(" "),a("th",[t._v("续费")])]),t._v(" "),t._l(t.freightInfo.tplDetails,function(e,r){return a("tbody",{key:r,style:{"background-color":t.freightInfo.isFree?"#5CB85C":"#CCCCCC"}},t._l(e.tplDetails,function(r,o){return a("tr",{key:o},[0==o?a("td",{attrs:{rowspan:e.tplDetails.length}},[t._v(t._s(t._f("deliveryWayFilter")(e.deliveryWay)))]):t._e(),t._v(" "),a("td",[t._v(t._s(t._f("districtFilter")(r.districtidList)))]),t._v(" "),a("td",[t._v(t._s(r.firstNum))]),t._v(" "),a("td",[t._v(t._s(t.$cms.float(r.firstPrice)))]),t._v(" "),a("td",[t._v(t._s(r.addNum))]),t._v(" "),a("td",[t._v(t._s(t.$cms.float(r.addPrice)))])])}),0)}),t._v(" "),t.freightInfo.isFree?a("tr",{staticStyle:{"background-color":"#5CB85C"}},[a("td",{attrs:{colspan:"6"}},[t._v("卖家承担邮费")])]):t._e()],2)])],1),t._v(" "),a("el-form-item",{ref:"product.volume",attrs:{label:"体积",prop:"product.volume"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.product.volume,callback:function(e){t.$set(t.formData.product,"volume",e)},expression:"formData.product.volume"}},[a("template",{slot:"append"},[t._v("立方米")])],2)],1),t._v(" "),a("el-form-item",{ref:"product.weight",attrs:{label:"重量",prop:"product.weight"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.product.weight,callback:function(e){t.$set(t.formData.product,"weight",e)},expression:"formData.product.weight"}},[a("template",{slot:"append"},[t._v("kg")])],2)],1),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("商品相册")]),t._v(" "),a("el-form-item",{attrs:{label:"短视频",prop:"checked"}},[a("cms-picture-zone",{attrs:{type:"video",viewType:"media"},on:{change:t.getProductVideo}},[a("cms-button",{attrs:{type:"info",size:"small"}},[t._v("选择视频")])],1)],1),t._v(" "),a("el-form-item",{ref:"imageResources",staticClass:"imageResource",attrs:{label:"商品相册",prop:"imageResources",error:t.errorMessage.imageResources}},[a("div",{staticClass:"clearfix"},[a("draggable",{attrs:{options:{animation:150}},model:{value:t.formData.imageResources,callback:function(e){t.$set(t.formData,"imageResources",e)},expression:"formData.imageResources"}},t._l(t.formData.imageResources,function(e,r){return a("cms-picture-zone",{key:r,staticClass:"product-img-box",attrs:{preview:!1,index:r},on:{change:t.getProductImg}},[a("div",{staticClass:"product-img-warpper"},[t.formData.imageResources[r]&&""!==t.formData.imageResources[r].url?a("img",{attrs:{src:t.$cms.filterUrl(t.formData.imageResources[r].url),alt:""}}):a("span",{staticClass:"img-plus el-icon-plus"})]),t._v(" "),a("div",{staticClass:"img-move-bar",on:{click:function(t){t.stopPropagation()}}},[a("span",{staticClass:"el-icon-arrow-left next",class:[0===r?"disable":""],on:{click:function(e){e.stopPropagation(),t.imgMove(r,"next")}}}),t._v(" "),a("span",{staticClass:"el-icon-arrow-right next",class:[4===r?"disable":""],on:{click:function(e){e.stopPropagation(),t.imgMove(r,"prev")}}}),t._v(" "),a("span",{staticClass:"el-icon-close delete",on:{click:function(e){e.stopPropagation(),t.imgDelete(r)}}})])])}),1)],1),t._v(" "),a("span",{staticClass:"gray",staticStyle:{"max-width":"490px"}},[t._v("\n        用于显示在商品详情页介绍图，最多可支持7张，第一张默认为商品主图用于显示商品列表，拖动照片可调整图片顺序\n      ")])]),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("详细信息")]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==t.txtModel,expression:"txtModel=='pc'"}],attrs:{label:"",prop:"checked","label-width":"0"}},[a("cms-editor",{model:{value:t.formData.txt.pcTxt,callback:function(e){t.$set(t.formData.txt,"pcTxt",e)},expression:"formData.txt.pcTxt"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==t.txtModel,expression:"txtModel=='pc'"}],staticClass:"add-select-padd",attrs:{label:"顶部版式",prop:"txt.topTplId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.txt.topTplId,callback:function(e){t.$set(t.formData.txt,"topTplId",e)},expression:"formData.txt.topTplId"}},t._l(t.formatItems,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("span",{staticClass:"gray"},[t._v("\n        选中的版式将插入至PC端商品详情最顶部\n      ")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==t.txtModel,expression:"txtModel=='pc'"}],staticClass:"add-select-padd",attrs:{label:"底部版式",prop:"txt.bottomTplId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.txt.bottomTplId,callback:function(e){t.$set(t.formData.txt,"bottomTplId",e)},expression:"formData.txt.bottomTplId"}},t._l(t.formatItems,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("span",{staticClass:"gray"},[t._v("\n        选中的版式将插入至PC端商品详情最底部\n      ")])],1),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("其他信息")]),t._v(" "),a("el-form-item",{attrs:{label:"商品单位",prop:"ext.unit"}},[a("el-input",{attrs:{maxlength:"5"},model:{value:t.formData.ext.unit,callback:function(e){t.$set(t.formData.ext,"unit",e)},expression:"formData.ext.unit"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("可输入件、盒、份、个，默认为件\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品服务",prop:"ext.storeServiceIds"}},[a("el-checkbox-group",{model:{value:t.formData.ext.storeServiceIds,callback:function(e){t.$set(t.formData.ext,"storeServiceIds",e)},expression:"formData.ext.storeServiceIds"}},t._l(t.serviceItems,function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.serviceName))])}),1)],1),t._v(" "),a("el-form-item",{ref:"product.sellGoodsSale",attrs:{label:"是否为销售商品出售",prop:"product.sellGoodsSale"}},[a("cms-switch",{model:{value:t.formData.product.sellGoodsSale,callback:function(e){t.$set(t.formData.product,"sellGoodsSale",e)},expression:"formData.product.sellGoodsSale"}})],1),t._v(" "),a("el-form-item",{ref:"product.isInvoice",attrs:{label:"是否为提供发票",prop:"product.isInvoice"}},[a("cms-switch",{model:{value:t.formData.product.isInvoice,callback:function(e){t.$set(t.formData.product,"isInvoice",e)},expression:"formData.product.isInvoice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品关键词",prop:"ext.keyword"}},[a("el-input",{attrs:{placeholder:"请输入商品关键词",type:"textarea",resize:"none",maxlength:"200"},model:{value:t.formData.ext.keyword,callback:function(e){t.$set(t.formData.ext,"keyword",e)},expression:"formData.ext.keyword"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("设置检索关键词,用于商品搜索,最多支持5个，使用','分隔")])],1),t._v(" "),a("el-form-item",{attrs:{label:"评价标签",prop:"ext.evaluationView"}},[a("el-input",{attrs:{placeholder:"请输入评价标签",type:"textarea",resize:"none",maxlength:"200"},model:{value:t.formData.ext.evaluationView,callback:function(e){t.$set(t.formData.ext,"evaluationView",e)},expression:"formData.ext.evaluationView"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("买家评价商品时，可对商品选择对应标签进行评价，如性价比高，使用','分隔")])],1),t._v(" "),a("el-form-item",{attrs:{label:"发布状态",prop:"roleName"}},[a("el-radio-group",{model:{value:t.formData.product.status,callback:function(e){t.$set(t.formData.product,"status",e)},expression:"formData.product.status"}},[a("el-radio",{attrs:{label:3}},[t._v("立即发布")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("入库")])],1),t._v(" "),a("span",{staticClass:"gray"},[t._v("选择立即发布，商品进入审核、上架阶段，选择入库则商品进入店铺商 品仓库内，仅商家自己可见\n      ")])],1)],1),t._v(" "),a("div",{staticClass:"product-footer",class:[t.fixed?"fixed-footer":""]},[a("cms-button",{staticStyle:{"background-color":"#f7f7f7",color:"#444444"},on:{click:t.prevStep}},[t._v("上一步")]),t._v(" "),a("cms-button",{directives:[{name:"color",rawName:"v-color"}],staticStyle:{background:"#efae00"},on:{click:t.nextStep}},[t._v("下一步,设置规格/属性信息")])],1)],1)},staticRenderFns:[]};var D=a("C7Lr")(I,k,!1,function(t){a("otJg")},"data-v-b9c02df2",null).exports,w=a("NDfU"),S=a("UdxI"),T={coreModel:{salePrice:"",marketPrice:0,costPrice:0,inventory:1e4,warningValue:10,hasSku:!1},skuTypeAttrs:[],skus:[],proTypeAttrs:[]},$={data:function(){var t=this;return{loading:!1,status:!1,fixed:!0,popoverVisible:!1,popoverForm:{name:"",attrValues:""},loadingTitle:"正在保存,请勿进行其他操作",formData:h()({},T),batch:{salesPrice:"",costPrice:"",inventory:"",marketPrice:"",warning:""},rules:{"coreModel.salePrice":[g.a.required(),g.a.float(),g.a.decimal(),g.a.custom(function(t,e,a){parseFloat(e)<=0?a(new Error("请输入大于0的数字")):a()})],"coreModel.marketPrice":[g.a.float(),g.a.decimal()],"coreModel.costPrice":[g.a.float(),g.a.decimal()],"coreModel.inventory":[g.a.custom(function(e,a,r){""===a?r(new Error("请输入库存量")):""===t.formData.coreModel.warningValue||0===t.formData.coreModel.warningValue?r():a<t.formData.coreModel.warningValue?r(new Error("库存量必须大于库存预警值")):r()}),g.a.required(),g.a.number()],"coreModel.warningValue":[g.a.custom(function(t,e,a){""===e?a():/^[0-9]{0,8}$/.test(e)?a():a(new Error("库存预警值只能为正整数"))})],"coreModel.hasSku":[g.a.required()]},customStandardValue:{},customAttributeValue:{},checkSaleStandardIds:[],checkProductStandardIds:[],properties:[],attributes:[],saleStandardInfos:[],productStandardInfos:[],skus:[],attributeGroups:{},productTypeId:0,storeId:0,canCustomAttr:""}},computed:{allCheckedLength:function(){var t=0;return this.properties.forEach(function(e){t+=e.attrValueList.length}),t}},methods:{getProductInfo:function(t){var e=this;this.productTypeId=this.$store.state.product.productTypeId,this.storeId=this.$store.state.product.storeId,Object(w.b)({productTypeId:this.productTypeId}).then(function(t){if(t.data&&t.data.saleAttrs.length>0){e.saleStandardInfos=t.data.saleAttrs,e.setRadioProperties(t.data.saleAttrs);var a=[];e.saleStandardInfos.map(function(t){a.push({valueType:t.valueType,attrGroupName:t.attrGroupName,name:t.name,id:t.id,attrValueList:[]})}),e.properties=a,e.productStandardInfos=t.data.nsaleAttrs,t.data.nsaleAttrs.forEach(function(t){t.attrs.forEach(function(t){if(1===t.valueType&&!t.attrVal){var e=[],a=[];t.attrValueList.forEach(function(t){e.push(t.attrValue),a.push(t.attrCode)}),t.attrVc=a.join(","),t.attrVal=e.join(",")}})}),e.canCustomAttr=t.data.productType.custom}e.loading=!1})},setRadioProperties:function(t){t.forEach(function(t){4===t.valueType&&t.attrValueList.forEach(function(t){t.valueResourceId=""})})},setProperties:function(t){var e=this,a=this.checkSaleStandardIds;this.saleStandardInfos.forEach(function(t,r){var o=[];t.attrValueList.forEach(function(t,e){a.indexOf(t.attrCode)>-1&&o.push(t)}),e.properties[r].attrValueList=o})},setProductInfos:function(t,e,a,r){var i=!0,n={groupName:e.attrGroupName,attrName:e.name,attrVc:t.attrCode,proTypeAttrId:e.id};if(n.attrVc=3===a?r:t.attrCode,0===this.attributes.length)this.attributes.push(n);else{var s=!0,l=!1,c=void 0;try{for(var d,u=o()(this.attributes);!(s=(d=u.next()).done);s=!0){var p=d.value;if(p.proTypeAttrId===n.proTypeAttrId){var f=p.attrVc.split(",");if(1===a){var h=f.indexOf(n.attrVc);h>-1?f.splice(h,1):f.push(n.attrVc),p.attrVc=f.join(",")}else p.attrVc=n.attrVc;i=!1;break}}}catch(t){l=!0,c=t}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}i&&this.attributes.push(n)}},deleteSkus:function(t,e){this.skus.splice(e,1),this.sysDeletedSkus()},sysDeletedSkus:function(){var t=this,e=[];this.skus.forEach(function(t){e=e.concat(t.attrCodes)}),this.properties.forEach(function(a,r){a.attrValueList.forEach(function(r,o){if(!e.includes(r.attrCode)){var i=t.checkSaleStandardIds.indexOf(r.attrCode);t.checkSaleStandardIds.splice(i,1),a.attrValueList.splice(o,1)}})})},setCoreModel:function(t){if(t){var e=[[],[],[],[],[],[]],a=e[0],r=e[1],o=e[2],i=e[3],n=e[4];this.formData.skus.length>0&&(this.formData.skus.forEach(function(t,e,s){a.push(t.salesPrice),r.push(t.marketPrice),o.push(t.costPrice),i.push(t.inventory),n.push(t.warning)}),a=a.sort(function(t,e){return t-e}),r=r.sort(function(t,e){return t-e}),o=o.sort(function(t,e){return t-e}),i=i.reduce(function(t,e){return parseInt(t)+parseInt(e)}),n=n.reduce(function(t,e){return parseInt(t)+parseInt(e)}),this.formData.coreModel.salePrice=a[0],this.formData.coreModel.marketPrice=r[0],this.formData.coreModel.costPrice=o[0],this.formData.coreModel.inventory=i,this.formData.coreModel.warningValue=n)}},createdSkus:function(){var t=[];this.properties.forEach(function(e){t.push(e.attrValueList)}),this.skus=Object(S.a)(t)},batchPrice:function(t,e){var a=this,r=/^\d{0,8}\.{0,1}(\d{1,2})?$/,o=/^[1-9]{1}[0-9]*$/,i=/^[0-9]+$/;this.skus.forEach(function(n){1===e&&r.test(a.batch[t])&&""!==a.batch[t]?n[t]=a.batch[t]:2===e&&o.test(a.batch[t])?n[t]=a.batch[t]:3===e&&i.test(a.batch[t])?n[t]=a.batch[t]:a.$errorMessage("格式不正确")})},addCustomStandardItem:function(t){var e=this;this.$refs.dialogForm.validate(function(t){if(!t)return!1;Object(_.e)({attrGroupName:"自定义添加",name:e.popoverForm.name,attrValues:e.popoverForm.attrValues,typeId:e.productTypeId,storeId:e.storeId,valueType:2}).then(function(t){e.saleStandardInfos.push(t.data),e.properties.push({valueType:t.data.valueType,attrGroupName:t.data.attrGroupName,name:t.data.name,id:t.data.id,attrValueList:[]}),e.popoverVisible=!1,e.popoverForm.name="",e.popoverForm.attrValues=""})})},clearCustomStandardItem:function(){this.popoverVisible=!1,this.popoverForm.name="",this.popoverForm.attrValues="",this.$refs.dialogForm.resetFields()},addCustomStandard:function(t){var e=this;if(void 0===this.customStandardValue["value"+t])this.$errorMessage("请输入规格值名称");else{var a={attrValue:this.customStandardValue["value"+t],storeId:this.storeId,attrId:this.saleStandardInfos[t].id};Object(_.c)(a).then(function(a){if(200===a.code){var r={attrCode:a.data.attrCode,attrValue:a.data.attrValue,id:a.data.id,attrType:a.data.attrType,valueResourceId:""};e.saleStandardInfos[t].attrValueList.push(r),e.customStandardValue["value"+t]=""}})}},addCustomAttribute:function(t){var e=this,a=t;if(void 0!==this.customAttributeValue["value"+a]){var r={name:this.customAttributeValue["value"+a],attrGroupName:this.productStandardInfos[a].attrGroupName,attrValues:"no",typeId:this.productTypeId,storeId:this.storeId};Object(_.b)(r).then(function(t){if(200===t.code){var r={attrGroupName:t.data.attrGroupName,attrValueList:t.data.attrValueList,custom:t.data.custom,id:t.data.id,name:t.data.name,valueType:t.data.valueType,attrType:t.data.attrType};e.productStandardInfos[a].attrs.push(r),e.customAttributeValue["value"+a]=""}})}else this.$errorMessage("请输入规格值名称")},validateRequire:function(){var t=this,e=!0;return this.formData.coreModel.hasSku&&0!==this.saleStandardInfos.length?this.saleStandardInfos.forEach(function(a,r){if(a.required){var o=t.properties[r];if(o.attrValueList.length<=0)return t.$errorMessage("请选择"+o.name),void(e=!1)}}):e=!0,e},validateAttrRequired:function(){var t=this,e=!0,a=[];return this.productStandardInfos.length>0&&this.productStandardInfos.forEach(function(r){r.attrs.forEach(function(r){if(r.required&&(a.push(r.id),t.attributes.length<a.length&&(e=!1,t.$errorMessage("请填写必填的商品属性")),t.attributes.length>0))for(var o=0;o<t.attributes.length;o++)if(!t.attributes[o].attrVc){e=!1,t.$errorMessage("请填写必填的商品属性");break}})}),e},isAttrRequired:function(t){if(t.required)return!0},deleteCustomStandard:function(t,e){var a=this;Object(w.a)({ids:[t.id]}).then(function(t){200===t.code&&(a.saleStandardInfos.splice(e,1),a.properties.splice(e,1))})},deleteCustomStandardValue:function(t,e,a){var r=this;console.log("parentIndex"+e),console.log("index"+a),Object(_.d)({ids:[t.id]}).then(function(o){if(200===o.code){var i=r.checkSaleStandardIds.findIndex(function(e){return e.id===t.id});r.checkSaleStandardIds.splice(i,1),r.setProperties(r.checkSaleStandardIds),r.saleStandardInfos[e].attrValueList.splice(a,1)}})},deleteCustomAttribute:function(t,e,a){var r=this;Object(w.a)({ids:[t.id]}).then(function(t){200===t.code&&r.productStandardInfos[e].attrs.splice(a,1)})},getStandardImg:function(t,e,a){this.$set(this.saleStandardInfos[a.parentIndex].attrValueList[e],"valueResourceId",t[0].id),this.$set(this.saleStandardInfos[a.parentIndex].attrValueList[e],"url",t[0].url)},prevStep:function(){this.$store.dispatch("setCache",!0),this.$store.dispatch("setStep","step2")},save:function(){var t=this;this.$refs.form.validate(function(e,a){if(e&&t.validateRequire()&&t.validateSkus()&&t.validateAttrRequired()){var r=t.$cms.deepCopy(t.formData);r.skuTypeAttrs=t.properties,r.skus=t.skus,r.proTypeAttrs=t.attributes,t.setCoreModel(t.formData.coreModel.hasSku),t.$store.dispatch("setStandardInfo",r).then(function(e){t.loading=!0,Object(_.r)(e).then(function(e){t.loading=!1,200===e.code?(t.$successMessage("发布成功!"),setTimeout(function(){t.$routerLink("/product/sale","list")},1e3)):t.$errorMessage(e.message)})})}else{var o="";for(var i in a)if(a.hasOwnProperty(i)){o=i.replace(".","_");break}""!==o&&t.errorPosition(o)}})},errorPosition:function(t){var e=document.querySelector("#layout"),a=this.$refs[t].$el;return e.scrollTop=a.offsetTop-350,!1},restData:function(){this.formData=this.$cms.deepCopy(T),this.customStandardValue={},this.customAttributeValue={},this.checkSaleStandardIds=[],this.checkProductStandardIds=[],this.properties=[],this.attributes=[],this.saleStandardInfos=[],this.productStandardInfos=[],this.skus=[],this.attributeGroups={}},validateSkus:function(){var t=this,e=!0;if(this.formData.coreModel.hasSku){var a=/^\d{0,8}\.{0,1}(\d{1,2})?$/,r=/^[0-9]{1}[0-9]*$/,o=/^[0-9]+$/;this.skus.length>0&&this.skus.forEach(function(i){a.test(i.salesPrice)&&a.test(i.costPrice)&&a.test(i.marketPrice)?r.test(i.inventory)&&o.test(i.warning)?parseFloat(i.salesPrice)<=0?(e=!1,t.$errorMessage("sku信息中售价不能小于0")):0!==parseInt(i.warning)&&parseInt(i.inventory)<parseInt(i.warning)&&(e=!1,t.$errorMessage("sku信息中库存预警值不能大于库存量")):(e=!1,t.$errorMessage("库存不规范")):(e=!1,t.$errorMessage("售价不规范"))})}return e},handleClose:function(){this.popoverVisible=!1,this.$refs.dialogForm.resetFields(),this.popoverForm.name="",this.popoverForm.attrValues=""}},watch:{allCheckedLength:{handler:function(){this.createdSkus()}}},activated:function(){var t=this.$store.state.product.productTypeId,e=this.$store.state.product.storeId;t===this.productTypeId&&e===this.storeId||(this.restData(),this.getProductInfo())},mounted:function(){var t=this;document.querySelector("#layout").addEventListener("scroll",function(e){var a=e.target.scrollTop,r=e.target.clientHeight,o=e.target.scrollHeight;!1===t.fixed&&(a+=70),parseInt(a)>o-r-70?t.fixed=!1:t.fixed=!0})}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cms-form-layout loading-top product-main-warpper",attrs:{"element-loading-text":t.loadingTitle}},[a("el-form",{ref:"form",staticStyle:{"margin-bottom":"48px"},attrs:{rules:t.rules,model:t.formData,"label-width":"210px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{ref:"coreModel_salePrice",attrs:{label:"售价",prop:"coreModel.salePrice"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.coreModel.salePrice,callback:function(e){t.$set(t.formData.coreModel,"salePrice",e)},expression:"formData.coreModel.salePrice"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("价格控制在0.01~99999999之间的数字，如商品设置SKU，此价格自动记录为最低SKU价格\n      ")])],1),t._v(" "),a("el-form-item",{ref:"product_name",attrs:{label:"市场价",prop:"coreModel.marketPrice"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.coreModel.marketPrice,callback:function(e){t.$set(t.formData.coreModel,"marketPrice",e)},expression:"formData.coreModel.marketPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"成本价",prop:"coreModel.costPrice"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.coreModel.costPrice,callback:function(e){t.$set(t.formData.coreModel,"costPrice",e)},expression:"formData.coreModel.costPrice"}})],1),t._v(" "),a("el-form-item",{ref:"coreModel_inventory",attrs:{label:"库存量",prop:"coreModel.inventory"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.coreModel.inventory,callback:function(e){t.$set(t.formData.coreModel,"inventory",e)},expression:"formData.coreModel.inventory"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("库存量控制在1~99999999之间的整数，如商品设置SKU，库存量自动计 算为所有SKU库存总和\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"库存预警值",prop:"coreModel.warningValue"}},[a("el-input",{attrs:{maxlength:"8"},model:{value:t.formData.coreModel.warningValue,callback:function(e){t.$set(t.formData.coreModel,"warningValue",e)},expression:"formData.coreModel.warningValue"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("库存预警值必须少于库存量，如商品设置SKU，预警值自动计算为所有 SKU设定的预警值总和\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品规格",prop:"coreModel.hasSku"}},[a("div",[a("el-checkbox",{on:{change:t.setCoreModel},model:{value:t.formData.coreModel.hasSku,callback:function(e){t.$set(t.formData.coreModel,"hasSku",e)},expression:"formData.coreModel.hasSku"}},[t._v("启用商品规格")]),t._v(" "),a("span",{staticClass:"gray"},[t._v("启用商品规格、商品的价格、库存、以SKU信息为准")])],1),t._v(" "),t.formData.coreModel.hasSku?a("el-checkbox-group",{model:{value:t.checkSaleStandardIds,callback:function(e){t.checkSaleStandardIds=e},expression:"checkSaleStandardIds"}},[t._l(t.saleStandardInfos,function(e,r){return a("section",{key:e.id,staticClass:"standard-group"},[a("div",{staticClass:"standard-group-header"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"standard-group-name"},[e.required?a("i",{staticClass:"goods-astrick"},[t._v("*")]):t._e(),t._v(t._s(e.name))]),t._v(" "),4==e.valueType?a("span",{staticClass:"standard-group-desc"},[t._v("( 该规格需要上传图片 )")]):t._e(),t._v(" "),2===e.attrType?a("span",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteCustomStandard(e,r)}}}):t._e()]),t._v(" "),a("div",{staticClass:"fr"},[a("label",{staticClass:"standard-group-desc"},[t._v("规格值名称")]),t._v(" "),a("el-input",{staticStyle:{width:"110px"},attrs:{maxlength:"30"},model:{value:t.customStandardValue["value"+r],callback:function(e){t.$set(t.customStandardValue,"value"+r,e)},expression:"customStandardValue['value'+index]"}}),t._v(" "),a("cms-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",disabled:!e.custom},on:{click:function(e){t.addCustomStandard(r)}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"standard-group-body"},[4===e.valueType?a("ul",{staticClass:"clearfix"},t._l(e.attrValueList,function(e,o){return a("li",{key:e.id,staticClass:"type-img-items"},[a("cms-picture-zone",{staticClass:"product-img-box",attrs:{preview:!1,index:o,params:{parentIndex:r}},on:{change:t.getStandardImg},model:{value:e.valueResourceId,callback:function(a){t.$set(e,"valueResourceId",a)},expression:"item.valueResourceId"}},[a("div",{staticClass:"product-img-warpper"},[e.valueResourceId&&""!==e.valueResourceId?a("img",{attrs:{src:t.$cms.filterUrl(e.url),alt:""}}):a("span",{staticClass:"img-plus el-icon-plus"})])]),t._v(" "),a("div",{staticClass:"img-txt"},[a("el-checkbox",{staticClass:"check-box",attrs:{label:e.attrCode,disabled:!e.valueResourceId},on:{change:t.setProperties},model:{value:e.isChecked,callback:function(a){t.$set(e,"isChecked",a)},expression:"item.isChecked"}},[a("span",{staticClass:"type-value"},[t._v(t._s(e.attrValue))]),t._v(" "),2==e.attrType?a("div",{staticClass:"el-icon-delete del",on:{click:function(a){a.stopPropagation(),t.deleteCustomStandardValue(e,r,o)}}}):t._e()])],1)],1)}),0):a("ul",{staticClass:"clearfix"},t._l(e.attrValueList,function(e,o){return a("li",{key:e.attrCode,staticClass:"type-checkbox-items"},[a("el-checkbox",{attrs:{label:e.attrCode},on:{change:t.setProperties}},[a("span",{staticClass:"type-value"},[t._v(t._s(e.attrValue))]),t._v(" "),2===e.attrType?a("div",{staticClass:"el-icon-delete del",on:{click:function(a){a.stopPropagation(),t.deleteCustomStandardValue(e,r,o)}}}):t._e()])],1)}),0)])])}),t._v(" "),a("div",{staticStyle:{margin:"20px 0 0 0"}},[t.canCustomAttr?a("cms-button",{attrs:{icon:"add",size:"small"},on:{click:function(e){t.popoverVisible=!0}}},[t._v("添加规格")]):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"添加规格",top:"35vh",visible:t.popoverVisible,width:"640px","before-close":t.handleClose}},[a("div",{staticClass:"dialog-form"},[a("el-form",{ref:"dialogForm",attrs:{model:t.popoverForm}},[a("el-form-item",{attrs:{label:"规格名称",prop:"name","label-width":"120px",rules:[{required:!0,message:"必须输入规格名称",trigger:"blur"}]}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.popoverForm.name,callback:function(e){t.$set(t.popoverForm,"name",e)},expression:"popoverForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格值","label-width":"120px",prop:"attrValues",rules:[{required:!0,message:"必须输入规格值",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"多个属性按回车输入",maxlength:"80"},model:{value:t.popoverForm.attrValues,callback:function(e){t.$set(t.popoverForm,"attrValues",e)},expression:"popoverForm.attrValues"}})],1),t._v(" "),a("div",{staticClass:"center"},[a("cms-button",{staticStyle:{"margin-right":"10px"},on:{click:t.addCustomStandardItem}},[t._v("确认")]),t._v(" "),a("cms-button",{attrs:{type:"info"},on:{click:t.clearCustomStandardItem}},[t._v("取消")])],1)],1)],1)])],2):t._e()],1),t._v(" "),t.formData.coreModel.hasSku&&t.skus.length>0?a("el-form-item",{attrs:{label:"sku信息",prop:"name"}},[a("table",{staticClass:"sku-table"},[a("tr",[t._l(t.properties,function(e,r){return e.attrValueList.length>0?a("th",{key:r,attrs:{rowspan:"2"}},[t._v("\n            "+t._s(e.name)+"\n          ")]):t._e()}),t._v(" "),a("th",[a("i",{staticClass:"goods-astrick"},[t._v("*")]),t._v("售价")]),t._v(" "),a("th",[t._v("市场价")]),t._v(" "),a("th",[t._v("成本价")]),t._v(" "),a("th",[a("i",{staticClass:"goods-astrick"},[t._v("*")]),t._v("库存")]),t._v(" "),a("th",[t._v("预警值")]),t._v(" "),a("th",{attrs:{rowspan:"2",width:"60"}},[t._v("操作")])],2),t._v(" "),a("tr",[a("td",[a("el-input",{staticClass:"table-input",attrs:{min:0,maxlength:"8"},model:{value:t.batch.salesPrice,callback:function(e){t.$set(t.batch,"salesPrice",e)},expression:"batch.salesPrice"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("salesPrice",1)}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{min:0,maxlength:"8"},model:{value:t.batch.marketPrice,callback:function(e){t.$set(t.batch,"marketPrice",e)},expression:"batch.marketPrice"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("marketPrice",1)}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{min:0,maxlength:"8"},model:{value:t.batch.costPrice,callback:function(e){t.$set(t.batch,"costPrice",e)},expression:"batch.costPrice"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("costPrice",1)}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{min:0,maxlength:"8"},model:{value:t.batch.inventory,callback:function(e){t.$set(t.batch,"inventory",e)},expression:"batch.inventory"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("inventory",2)}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{min:0,maxlength:"8"},model:{value:t.batch.warning,callback:function(e){t.$set(t.batch,"warning",e)},expression:"batch.warning"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("warning",3)}}})])],2)],1)]),t._v(" "),t._l(t.skus,function(e,r){return a("tr",{key:r},[t._l(e.name,function(e,r){return a("td",{key:r,staticClass:"min-w-90"},[t._v("\n            "+t._s(e)+"\n          ")])}),t._v(" "),a("td",[a("el-input",{attrs:{min:0,maxlength:"8"},model:{value:e.salesPrice,callback:function(a){t.$set(e,"salesPrice",a)},expression:"item.salesPrice"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{min:0,maxlength:"8"},model:{value:e.marketPrice,callback:function(a){t.$set(e,"marketPrice",a)},expression:"item.marketPrice"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{min:0,maxlength:"8"},model:{value:e.costPrice,callback:function(a){t.$set(e,"costPrice",a)},expression:"item.costPrice"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{min:0,maxlength:"8"},model:{value:e.inventory,callback:function(a){t.$set(e,"inventory",a)},expression:"item.inventory"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{min:0,maxlength:"8"},model:{value:e.warning,callback:function(a){t.$set(e,"warning",a)},expression:"item.warning"}})],1),t._v(" "),a("td",[a("i",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteSkus(e,r)}}})])],2)})],2),t._v(" "),a("span",{staticClass:"gray"},[t._v("注：商品实际销售SKU不存在的组合，可删除，系统将默认保存")])]):t._e(),t._v(" "),t.productStandardInfos.length>0?a("el-form-item",{attrs:{label:"商品属性",prop:"name"}},t._l(t.productStandardInfos,function(e,r){return a("section",{key:e.id,staticClass:"standard-group",style:0===r?{marginTop:0}:""},[a("div",{staticClass:"standard-group-header"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"standard-group-name"},[t._v(t._s(e.attrGroupName))])]),t._v(" "),a("div",{staticClass:"fr"},[a("label",{staticClass:"standard-group-desc"},[t._v("规格值名称")]),t._v(" "),a("el-input",{staticStyle:{width:"110px"},attrs:{maxlength:"30"},model:{value:t.customAttributeValue["value"+r],callback:function(e){t.$set(t.customAttributeValue,"value"+r,e)},expression:"customAttributeValue['value'+index]"}}),t._v(" "),a("cms-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){t.addCustomAttribute(r)}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"standard-group-body",staticStyle:{padding:"20px"}},t._l(e.attrs,function(e,o){return a("div",{key:e.id,staticClass:"clearfix",class:[1==e.valueType?"w-50":"w-100"]},[a("label",{staticClass:"fl  attribute-name"},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.isAttrRequired(e),expression:"isAttrRequired(standard)"}],staticClass:"goods-astrick"},[t._v("*")]),t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),3===e.valueType&&e.attrValueList.length>0?a("ul",{staticClass:"fl"},t._l(e.attrValueList,function(r){return a("li",{key:r.id,staticClass:"type-checkbox-items"},[a("el-checkbox",{attrs:{label:r.id},on:{change:function(a){t.setProductInfos(r,e,1)}}},[a("span",{staticClass:"type-value"},[t._v(t._s(r.attrValue))])])],1)}),0):t._e(),t._v(" "),2===e.valueType&&e.attrValueList.length>0?a("ul",{staticClass:"fl"},[a("el-radio-group",{model:{value:t.attributeGroups[e.id+"s"],callback:function(a){t.$set(t.attributeGroups,e.id+"s",a)},expression:"attributeGroups[standard.id+'s']"}},t._l(e.attrValueList,function(r){return a("li",{key:r.id,staticClass:"type-radio-items"},[a("el-radio",{attrs:{label:r.id},on:{change:function(a){t.setProductInfos(r,e,2)}}},[a("span",{staticClass:"type-value"},[t._v(t._s(r.attrValue))])])],1)}),0)],1):t._e(),t._v(" "),1===e.valueType?a("div",[a("el-input",{staticStyle:{width:"220px",position:"relative",top:"0px"},attrs:{maxlength:"50"},on:{blur:function(a){t.setProductInfos(a,e,3,e.attrVc)}},model:{value:e.attrVal,callback:function(a){t.$set(e,"attrVal",a)},expression:"standard.attrVal"}}),a("br"),t._v(" "),2===e.attrType?a("div",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteCustomAttribute(e,r,o)}}}):t._e()],1):t._e()])}),0)])}),0):t._e()],1),t._v(" "),a("div",{staticClass:"product-footer",class:[t.fixed?"fixed-footer":""]},[a("cms-button",{staticStyle:{background:"#f7f7f7",color:"#444"},on:{click:t.prevStep}},[t._v("上一步")]),t._v(" "),a("cms-button",{directives:[{name:"color",rawName:"v-color"}],staticStyle:{background:"#efae00"},on:{click:t.save}},[t._v("立即发布")])],1)],1)},staticRenderFns:[]};var M={components:{step1:d,step2:D,step3:a("C7Lr")($,P,!1,function(t){a("wvko")},"data-v-1762cdd0",null).exports,step4:a("C7Lr")(null,null,!1,null,null,null).exports},data:function(){return{}},computed:{currentView:function(){return this.$store.state.product.step}},methods:{setStep:function(t){this.$store.dispatch("setStep",t)},clearInfo:function(){this.$store.dispatch("clearProductInfo")}},activated:function(){console.log("active"),"save"===this.$route.query.type&&this.$store.dispatch("setStep","step1")},created:function(){this.$store.dispatch("setStep","step1")}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main-layout"},[a("div",{staticClass:"fixed-bar"},[a("cms-prompt",{staticClass:"pos-prompt "},[a("li",[t._v("带\n          "),a("span",{staticStyle:{color:"#ff0000"}},[t._v(" * ")]),t._v(" 为必填项 ")])]),t._v(" "),a("ul",{staticClass:"cms-steps"},[a("li",{staticClass:"cms-step",class:"step1"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("1")]),t._v(" "),t._m(0)]),t._v(" "),a("li",{staticClass:"cms-step",class:"step2"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("2")]),t._v(" "),t._m(1)]),t._v(" "),a("li",{staticClass:"cms-step",class:"step3"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("3")]),t._v(" "),t._m(2)])])],1),t._v(" "),a("div",{staticClass:"product-layout",attrs:{id:"productLayout"}},[a("keep-alive",[a(t.currentView,{tag:"component"})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-fenlei-sel"}),this._v("\n            选择商品分类\n          ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-zongjie"}),this._v("\n            填写商品信息\n          ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-gaojishuxing"}),this._v("\n            设置规格/属性信息\n          ")])}]};var N=a("C7Lr")(M,V,!1,function(t){a("GyzD")},"data-v-6e7ea90a",null);e.default=N.exports},NDfU:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i});var r=a("HNM5"),o=function(t){return r.a.post("/admin/store/producttypeattr/delete",t)},i=function(t){return r.a.get("/admin/store/producttypeattr/list",{params:t})}},QvHC:function(t,e,a){var r=a("+QyY"),o=a("Uydw")(!1);r(r.S,"Object",{values:function(t){return o(t)}})},UdxI:function(t,e,a){"use strict";e.a=function(t){var e=[];r=[],o=[],i=[];for(var a=0,s=0,l=0;l<t.length;l++)t[l].length>0?(i[s]=0,r[s]=t[l],s++):a++;if(a===t.length)return[];o=r.length-1;for(var c=1,d=0;d<r.length;d++)c*=r[d].length;for(var u=0;u<c;u++){for(var p={name:[],salesPrice:"0.0",marketPrice:"0.0",costPrice:"0.0",inventory:"0",warning:"0",id:"",attrCodes:[]},f=0;f<r.length;f++)p.name.push(r[f][i[f]].attrValue),p["properties"+f]=r[f][i[f]].attrValue,p.attrCodes.push(r[f][i[f]].attrCode);e.push(p),n()}return e};var r=[],o=0,i=[];function n(){i[o]++,i[o]>=r[o].length&&(i[o]=0,--o>=0&&n(),o=r.length-1)}},Uydw:function(t,e,a){var r=a("xw+U"),o=a("vh3Q"),i=a("pNzz").f;t.exports=function(t){return function(e){for(var a,n=o(e),s=r(n),l=s.length,c=0,d=[];l>c;)i.call(n,a=s[c++])&&d.push(t?[a,n[a]]:n[a]);return d}}},VX3H:function(t,e,a){a("QvHC"),t.exports=a("Hx55").Object.values},lPr8:function(t,e,a){var r,o;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
!function(i){"use strict";void 0===(o="function"==typeof(r=i)?r.call(e,a,e,t):r)||(t.exports=o)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,a,r,o,i,n,s,l,c,d,u,p,f,h,m,v,g,b,_,y,C,x,I,k,D=[],w=!1,S=!1,T=!1,$=[],P=!1,M=!1,V=/\s+/g,N="Sortable"+(new Date).getTime(),E=window,L=E.document,R=E.parseInt,A=E.setTimeout,O=E.jQuery||E.Zepto,F=E.Polymer,X={capture:!1,passive:!1},Y=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),H=!!navigator.userAgent.match(/Edge/i),j=H||Y?"cssFloat":"float",q="draggable"in L.createElement("div"),B=function(){if(Y)return!1;var t=L.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),G=!1,U=!1,z=Math.abs,W=Math.min,K=[],J=function(t,e){var a=mt(t),r=R(a.width),o=xt(t,0,e),i=xt(t,1,e),n=o&&mt(o),s=i&&mt(i),l=n&&R(n.marginLeft)+R(n.marginRight)+Vt(o).width,c=s&&R(s.marginLeft)+R(s.marginRight)+Vt(i).width;return"flex"===a.display?"column"===a.flexDirection||"column-reverse"===a.flexDirection?"vertical":"horizontal":o&&("block"===n.display||"flex"===n.display||"table"===n.display||"grid"===n.display||l>=r&&"none"===a[j]||i&&"none"===a[j]&&l+c>r)?"vertical":"horizontal"},Q=function(t,e){if(!t||!t.getBoundingClientRect)return E;var a=t,r=!1;do{if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var o=mt(a);if(a.clientWidth<a.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!a||!a.getBoundingClientRect||a===L.body)return E;if(r||e)return a;r=!0}}}while(a=a.parentNode);return E},Z=St(function(t,e,a,r){if(e.scroll){var o=a?a[N]:window,i=e.scrollSensitivity,n=e.scrollSpeed,d=t.clientX,u=t.clientY,p=(window.innerWidth,window.innerHeight,!1);l!==a&&(tt(),s=e.scroll,c=e.scrollFn,!0===s&&(s=Q(a,!0),l=s));var f=0,h=s;do{var m,v,g,_,y,C,x,I,k,S=h,T=Vt(S),$=T.top,P=T.bottom,M=T.left,V=T.right,R=T.width,A=T.height;if(S!==E?(m=S.scrollWidth,v=S.scrollHeight,g=mt(S),C=R<m&&("auto"===g.overflowX||"scroll"===g.overflowX),x=A<v&&("auto"===g.overflowY||"scroll"===g.overflowY),I=S.scrollLeft,k=S.scrollTop):(m=L.documentElement.scrollWidth,v=L.documentElement.scrollHeight,g=mt(L.documentElement),C=R<m&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),x=A<v&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY),I=L.documentElement.scrollLeft,k=L.documentElement.scrollTop),_=C&&(z(V-d)<=i&&I+R<m)-(z(M-d)<=i&&!!I),y=x&&(z(P-u)<=i&&k+A<v)-(z($-u)<=i&&!!k),!D[f])for(var O=0;O<=f;O++)D[O]||(D[O]={});D[f].vx==_&&D[f].vy==y&&D[f].el===S||(D[f].el=S,D[f].vx=_,D[f].vy=y,clearInterval(D[f].pid),!S||0==_&&0==y||(p=!0,D[f].pid=setInterval(function(){r&&0===this.layer&&ct.active._emulateDragOver(!0);var e=D[this.layer].vy?D[this.layer].vy*n:0,a=D[this.layer].vx?D[this.layer].vx*n:0;"function"==typeof c&&"continue"!==c.call(o,a,e,t,b,D[this.layer].el)||(D[this.layer].el===E?E.scrollTo(E.pageXOffset+a,E.pageYOffset+e):(D[this.layer].el.scrollTop+=e,D[this.layer].el.scrollLeft+=a))}.bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==E&&(h=Q(h,!1)));w=p}},30),tt=function(){D.forEach(function(t){clearInterval(t.pid)}),D=[]},et=function(t){function e(t,a){return function(r,o,i,n){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==t&&(a||s))return!0;if(null==t||!1===t)return!1;if(a&&"clone"===t)return t;if("function"==typeof t)return e(t(r,o,i,n),a)(r,o,i,n);var l=(a?r:o).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var a={},r=t.group;r&&"object"==typeof r||(r={name:r}),a.name=r.name,a.checkPull=e(r.pull,!0),a.checkPut=e(r.put),a.revertClone=r.revertClone,t.group=a},at=function(e){t&&t.parentNode&&t.parentNode[N]&&t.parentNode[N]._computeIsAligned(e)},rt=function(t,e){for(var a=e;!a[N];)a=a.parentNode;return t===a},ot=function(t,e,a){for(var r=t.parentNode;r&&!r[N];)r=r.parentNode;r&&r[N][a](Tt(e,{artificialBubble:!0}))},it=function(){!B&&a&&mt(a,"display","none")},nt=function(){!B&&a&&mt(a,"display","")};L.addEventListener("click",function(t){if(T)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),T=!1,!1},!0);var st,lt=function(e){if(t){var a=function(t,e){for(var a=0;a<$.length;a++)if(!$[a].children.length){var r=Vt($[a]),o=$[a][N].options.emptyInsertThreshold,i=t>=r.left-o&&t<=r.right+o,n=e>=r.top-o&&e<=r.bottom+o;if(i&&n)return $[a]}}(e.clientX,e.clientY);a&&a[N]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:a,rootEl:a})}};function ct(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Tt({},e),t[N]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return J(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:R(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ct.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var r in a)!(r in e)&&(e[r]=a[r]);for(var o in et(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&q,e.supportPointer?pt(t,"pointerdown",this._onTapStart):(pt(t,"mousedown",this._onTapStart),pt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(pt(t,"dragover",this),pt(t,"dragenter",this)),$.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function dt(t,e,a,r){if(t){a=a||L;do{if(">*"===e&&t.parentNode===a||wt(t,e)||r&&t===a)return t;if(t===a)break}while(t=ut(t))}return null}function ut(t){return t.host&&t!==L&&t.host.nodeType?t.host:t.parentNode}function pt(t,e,a){t.addEventListener(e,a,X)}function ft(t,e,a){t.removeEventListener(e,a,X)}function ht(t,e,a){if(t&&e)if(t.classList)t.classList[a?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(V," ").replace(" "+e+" "," ");t.className=(r+(a?" "+e:"")).replace(V," ")}}function mt(t,e,a){var r=t&&t.style;if(r){if(void 0===a)return L.defaultView&&L.defaultView.getComputedStyle?a=L.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),void 0===e?a:a[e];e in r||-1!==e.indexOf("webkit")||(e="-webkit-"+e),r[e]=a+("string"==typeof a?"":"px")}}function vt(t){var e="";do{var a=mt(t,"transform");a&&"none"!==a&&(e=a+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function gt(t,e,a){if(t){var r=t.getElementsByTagName(e),o=0,i=r.length;if(a)for(;o<i;o++)a(r[o],o);return r}return[]}function bt(t,e,a,o,i,n,s,l,c){var d,u=(t=t||e[N]).options,p="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||Y||H?(d=L.createEvent("Event")).initEvent(a,!0,!0):d=new CustomEvent(a,{bubbles:!0,cancelable:!0}),d.to=i||e,d.from=n||e,d.item=o||e,d.clone=r,d.oldIndex=s,d.newIndex=l,d.originalEvent=c,e&&e.dispatchEvent(d),u[p]&&u[p].call(t,d)}function _t(t,e,a,r,o,i,n,s){var l,c,d=t[N],u=d.options.onMove;return!window.CustomEvent||Y||H?(l=L.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=a,l.draggedRect=r,l.related=o||e,l.relatedRect=i||Vt(e),l.willInsertAfter=s,l.originalEvent=n,t.dispatchEvent(l),u&&(c=u.call(d,l,n)),c}function yt(t){t.draggable=!1}function Ct(){G=!1}function xt(e,r,o){for(var i=0,n=0,s=e.children;n<s.length;){if("none"!==s[n].style.display&&s[n]!==a&&s[n]!==t&&dt(s[n],o.draggable,e,!1)){if(i===r)return s[n];i++}n++}return null}function It(t){var e=t.lastElementChild;return e===a&&(e=t.children[t.childElementCount-2]),e||null}function kt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,a=e.length,r=0;a--;)r+=e.charCodeAt(a);return r.toString(36)}function Dt(t,e){var a=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==r&&a++;return a}function wt(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}function St(t,e){return function(){if(!st){var a=arguments,r=this;st=A(function(){1===a.length?t.call(r,a[0]):t.apply(r,a),st=void 0},e)}}}function Tt(t,e){if(t&&e)for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function $t(t){return F&&F.dom?F.dom(t).cloneNode(!0):O?O(t).clone(!0)[0]:t.cloneNode(!0)}function Pt(t){return A(t,0)}function Mt(t){return clearTimeout(t)}function Vt(t,e,a){if(t.getBoundingClientRect||t===E){var r,o,i,n,s,l,c;if(t!==E?(o=(r=t.getBoundingClientRect()).top,i=r.left,n=r.bottom,s=r.right,l=r.height,c=r.width):(o=0,i=0,n=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),a&&t!==E){if(e=e||t.parentNode,!Y)do{if(e&&e.getBoundingClientRect&&"none"!==mt(e,"transform")){var d=e.getBoundingClientRect();o-=d.top+R(mt(e,"border-top-width")),i-=d.left+R(mt(e,"border-left-width")),n=o+r.height,s=i+r.width;break}}while(e=e.parentNode);var u=vt(t),p=u&&u.a,f=u&&u.d;u&&(n=(o/=f)+(l/=f),s=(i/=p)+(c/=p))}return{top:o,left:i,bottom:n,right:s,width:c,height:l}}}return L.addEventListener("dragover",lt),L.addEventListener("mousemove",lt),ct.prototype={constructor:ct,_computeIsAligned:function(e){var r;if(a&&!B?(it(),r=L.elementFromPoint(e.clientX,e.clientY),nt()):r=e.target,r=dt(r,this.options.draggable,this.el,!1),!U&&t&&t.parentNode===this.el){for(var o,i,n,s,l,c,d,u,p=this.el.children,f=0;f<p.length;f++)dt(p[f],this.options.draggable,this.el,!1)&&p[f]!==r&&(p[f].sortableMouseAligned=(o=e.clientX,i=e.clientY,n=p[f],s=this._getDirection(e,null),this.options,void 0,void 0,void 0,void 0,l=Vt(n),c="vertical"===s?l.left:l.top,d="vertical"===s?l.right:l.bottom,c<(u="vertical"===s?o:i)&&u<d));dt(r,this.options.draggable,this.el,!0)||(y=null),U=!0,A(function(){U=!1},30)}},_getDirection:function(e,a){return"function"==typeof this.options.direction?this.options.direction.call(this,e,a,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var a,r=this,o=this.el,i=this.options,s=i.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],d=(c||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,p=i.filter;if(function(t){K.length=0;var e=t.getElementsByTagName("input"),a=e.length;for(;a--;){var r=e[a];r.checked&&K.push(r)}}(o),(!Y||e.artificialBubble||rt(o,d))&&!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||i.disabled||u.isContentEditable))if(d=dt(d,i.draggable,o,!1)){if(n!==d){if(a=Dt(d,i.draggable),"function"==typeof p){if(p.call(this,e,d,this))return bt(r,u,"filter",d,o,o,a),void(s&&e.cancelable&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(t){if(t=dt(u,t.trim(),o,!1))return bt(r,t,"filter",d,o,o,a),!0})))return void(s&&e.cancelable&&e.preventDefault());i.handle&&!dt(u,i.handle,o,!1)||this._prepareDragStart(e,c,d,a)}}else Y&&ot(o,e,"_onTapStart")}},_handleAutoScroll:function(e,a){if(t&&this.options.scroll){var r=e.clientX,o=e.clientY,i=L.elementFromPoint(r,o),n=this;if(a||H||Y){Z(e,n.options,i,a);var s=Q(i,!0);!w||h&&r===m&&o===v||(h&&clearInterval(h),h=setInterval(function(){if(t){var i=Q(L.elementFromPoint(r,o),!0);i!==s&&(s=i,tt(),Z(e,n.options,s,a))}},10),m=r,v=o)}else{if(!n.options.bubbleScroll||Q(i,!0)===window)return void tt();Z(e,n.options,Q(i,!1),!1)}}},_prepareDragStart:function(a,r,s,l){var c,u=this,f=u.el,h=u.options,m=f.ownerDocument;s&&!t&&s.parentNode===f&&(o=f,e=(t=s).parentNode,i=t.nextSibling,n=s,p=h.group,d=l,g={target:t,clientX:(r||a).clientX,clientY:(r||a).clientY},this._lastX=(r||a).clientX,this._lastY=(r||a).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",c=function(){u._disableDelayedDrag(),t.draggable=u.nativeDraggable,u._triggerDragStart(a,r),bt(u,o,"choose",t,o,o,d),ht(t,h.chosenClass,!0)},h.ignore.split(",").forEach(function(e){gt(t,e.trim(),yt)}),h.supportPointer?(pt(m,"pointerup",u._onDrop),pt(m,"pointercancel",u._onDrop)):(pt(m,"mouseup",u._onDrop),pt(m,"touchend",u._onDrop),pt(m,"touchcancel",u._onDrop)),h.delay?(pt(m,"mouseup",u._disableDelayedDrag),pt(m,"touchend",u._disableDelayedDrag),pt(m,"touchcancel",u._disableDelayedDrag),pt(m,"mousemove",u._delayedDragTouchMoveHandler),pt(m,"touchmove",u._delayedDragTouchMoveHandler),h.supportPointer&&pt(m,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=A(c,h.delay)):c())},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;W(z(e.clientX-this._lastX),z(e.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),ft(t,"mouseup",this._disableDelayedDrag),ft(t,"touchend",this._disableDelayedDrag),ft(t,"touchcancel",this._disableDelayedDrag),ft(t,"mousemove",this._delayedDragTouchMoveHandler),ft(t,"touchmove",this._delayedDragTouchMoveHandler),ft(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,a){a=a||("touch"==e.pointerType?e:null),!this.nativeDraggable||a?this.options.supportPointer?pt(L,"pointermove",this._onTouchMove):pt(L,a?"touchmove":"mousemove",this._onTouchMove):(pt(t,"dragend",this),pt(o,"dragstart",this._onDragStart));try{L.selection?Pt(function(){L.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(e){if(S=!1,o&&t){this.nativeDraggable&&(pt(L,"dragover",this._handleAutoScroll),pt(L,"dragover",at));var a=this.options;!e&&ht(t,a.dragClass,!1),ht(t,a.ghostClass,!0),mt(t,"transform",""),ct.active=this,e&&this._appendGhost(),bt(this,o,"start",t,o,o,d)}else this._nulling()},_emulateDragOver:function(e){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!e)return;this._lastX=b.clientX,this._lastY=b.clientY,it();for(var a=L.elementFromPoint(b.clientX,b.clientY),r=a;a&&a.shadowRoot;)r=a=a.shadowRoot.elementFromPoint(b.clientX,b.clientY);if(r)do{if(r[N])if(r[N]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:a,rootEl:r})&&!this.options.dragoverBubble)break;a=r}while(r=r.parentNode);t.parentNode[N]._computeIsAligned(b),nt()}},_onTouchMove:function(t){if(g){if(!t.cancelable)return;var e=this.options,r=e.fallbackTolerance,o=e.fallbackOffset,i=t.touches?t.touches[0]:t,n=a&&vt(a),s=a&&n&&n.a,l=a&&n&&n.d,c=(i.clientX-g.clientX+o.x)/(s||1),d=(i.clientY-g.clientY+o.y)/(l||1),u=t.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";if(!ct.active&&!S){if(r&&W(z(i.clientX-this._lastX),z(i.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}this._handleAutoScroll(i,!0),_=!0,b=i,mt(a,"webkitTransform",u),mt(a,"mozTransform",u),mt(a,"msTransform",u),mt(a,"transform",u),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!a){var e=Vt(t,this.options.fallbackOnBody?L.body:o,!0),r=(mt(t),this.options);ht(a=t.cloneNode(!0),r.ghostClass,!1),ht(a,r.fallbackClass,!0),ht(a,r.dragClass,!0),mt(a,"box-sizing","border-box"),mt(a,"margin",0),mt(a,"top",e.top),mt(a,"left",e.left),mt(a,"width",e.width),mt(a,"height",e.height),mt(a,"opacity","0.8"),mt(a,"position","fixed"),mt(a,"zIndex","100000"),mt(a,"pointerEvents","none"),r.fallbackOnBody&&L.body.appendChild(a)||o.appendChild(a)}},_onDragStart:function(e,a){var i=this,n=e.dataTransfer,s=i.options;(r=$t(t)).draggable=!1,r.style["will-change"]="",this._hideClone(),ht(r,i.options.chosenClass,!1),i._cloneId=Pt(function(){i.options.removeCloneOnHide||o.insertBefore(r,t),bt(i,o,"clone",t)}),!a&&ht(t,s.dragClass,!0),a?(T=!0,i._loopId=setInterval(i._emulateDragOver,50)):(ft(L,"mouseup",i._onDrop),ft(L,"touchend",i._onDrop),ft(L,"touchcancel",i._onDrop),ft(L,"pointercancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,t)),pt(L,"drop",i),mt(t,"transform","translateZ(0)")),S=!0,i._dragStartId=Pt(i._dragStarted.bind(i,a)),pt(L,"selectstart",i)},_onDragOver:function(r){var n,s,l,c=this.el,u=r.target,h=this.options,m=h.group,v=ct.active,g=p===m,b=h.sort,D=this;if(!G&&(!Y||r.rootEl||r.artificialBubble||rt(c,u))){if(void 0!==r.preventDefault&&r.cancelable&&r.preventDefault(),_=!0,u=dt(u,h.draggable,c,!0),dt(r.target,null,t,!0)||u.animated)return q();if(u!==t&&(T=!1),v&&!h.disabled&&(g?b||(l=!o.contains(t)):f===this||(this.lastPutMode=p.checkPull(this,v,t,r))&&m.checkPut(this,v,t,r))){var S=this._getDirection(r,u);if(n=Vt(t),l)return this._hideClone(),e=o,i?o.insertBefore(t,i):o.appendChild(t),q();if(0===c.children.length||c.children[0]===a||function(t,e,a){var r=Vt(It(a)),o="vertical"===e?t.clientY:t.clientX,i="vertical"===e?t.clientX:t.clientY,n="vertical"===e?r.bottom:r.right,s="vertical"===e?r.left:r.top,l="vertical"===e?r.right:r.bottom;return i>s&&i<l&&o>n}(r,S,c)&&!t.animated){if(0!==c.children.length&&c.children[0]!==a&&c===r.target&&(u=It(c)),u&&(s=Vt(u)),g?v._hideClone():v._showClone(this),!1!==_t(o,c,t,n,u,s,r,!!u))return c.appendChild(t),e=c,k=null,B(),this._animate(n,t),u&&this._animate(s,u),q()}else if(u&&u!==t&&void 0!==u.parentNode[N]&&u!==c){var $,V=0,R=u.sortableMouseAligned,O=t.parentNode!==c,F=function(t,e){var a=Q(a,!0),r=Vt(t)[e];for(;a;){var o=Vt(a)[e];if(!("top"===e||"left"===e?r>=o:r<=o))return!0;if(a===E)break;a=Q(a,!1)}return!1}(u,"vertical"===S?"top":"left");if(y!==u&&(x=null,$=Vt(u)["vertical"===S?"top":"left"],P=!1),function(e,a,r){var o=e===t&&k||Vt(e),i=a===t&&k||Vt(a),n="vertical"===r?o.left:o.top,s="vertical"===r?o.right:o.bottom,l="vertical"===r?o.width:o.height,c="vertical"===r?i.left:i.top,d="vertical"===r?i.right:i.bottom,u="vertical"===r?i.width:i.height;return n===c||s===d||n+l/2===c+u/2}(t,u,S)&&R||O||F||h.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&(M=h.invertSwap||O||w||F),V=function(e,a,r,o,i,n,s){var l=Vt(a),c="vertical"===r?e.clientY:e.clientX,d="vertical"===r?l.height:l.width,u="vertical"===r?l.top:l.left,p="vertical"===r?l.bottom:l.right,f=Vt(t),h=!1;if(!n)if(s&&I<d*o)if(!P&&(1===C?c>u+d*i/2:c<p-d*i/2)&&(P=!0),P)h=!0;else{"vertical"===r?f.top:f.left,"vertical"===r?f.bottom:f.right;if(1===C?c<u+I:c>p-I)return-1*C}else if(c>u+d*(1-o)/2&&c<p-d*(1-o)/2)return c>u+d/2?-1:1;if((h=h||n)&&(c<u+d*i/2||c>p-d*i/2))return c>u+d/2?1:-1;return 0}(r,u,S,h.swapThreshold,null==h.invertedSwapThreshold?h.swapThreshold:h.invertedSwapThreshold,M,y===u),x="swap"):(V=function(e,a){var r=Dt(t,a.draggable),o=Dt(e,a.draggable);return r<o?1:-1}(u,h),x="insert"),0===V)return q();k=null,y=u,C=V,s=Vt(u);var X=u.nextElementSibling,H=!1,j=_t(o,c,t,n,u,s,r,H=1===V);if(!1!==j)return 1!==j&&-1!==j||(H=1===j),G=!0,A(Ct,30),g?v._hideClone():v._showClone(this),H&&!X?c.appendChild(t):u.parentNode.insertBefore(t,H?X:u),e=t.parentNode,void 0===$||M||(I=z($-Vt(u)["vertical"===S?"top":"left"])),B(),!O&&this._animate(s,u),this._animate(n,t),q()}if(c.contains(t))return q()}return Y&&!r.rootEl&&ot(c,r,"_onDragOver"),!1}function q(){return v&&(ht(t,f?f.options.ghostClass:v.options.ghostClass,!1),ht(t,h.ghostClass,!0)),f!==D&&D!==ct.active?f=D:D===ct.active&&(f=null),(u===t&&!t.animated||u===c&&!u.animated)&&(y=null),h.dragoverBubble||r.rootEl||u===L||(D._handleAutoScroll(r),t.parentNode[N]._computeIsAligned(r)),!h.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),!0}function B(){bt(D,o,"change",u,c,o,d,Dt(t,h.draggable),r)}},_animate:function(e,a){var r=this.options.animation;if(r){var o=Vt(a);if(a===t&&(k=o),1===e.nodeType&&(e=Vt(e)),e.left+e.width/2!==o.left+o.width/2||e.top+e.height/2!==o.top+o.height/2){var i=vt(this.el),n=i&&i.a,s=i&&i.d;mt(a,"transition","none"),mt(a,"transform","translate3d("+(e.left-o.left)/(n||1)+"px,"+(e.top-o.top)/(s||1)+"px,0)"),a.offsetWidth,mt(a,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),mt(a,"transform","translate3d(0,0,0)")}"number"==typeof a.animated&&clearTimeout(a.animated),a.animated=A(function(){mt(a,"transition",""),mt(a,"transform",""),a.animated=!1},r)}},_offUpEvents:function(){var t=this.el.ownerDocument;ft(L,"touchmove",this._onTouchMove),ft(L,"pointermove",this._onTouchMove),ft(t,"mouseup",this._onDrop),ft(t,"touchend",this._onDrop),ft(t,"pointerup",this._onDrop),ft(t,"touchcancel",this._onDrop),ft(t,"pointercancel",this._onDrop),ft(L,"selectstart",this)},_onDrop:function(n){var s=this.el,l=this.options;S=!1,w=!1,M=!1,P=!1,clearInterval(this._loopId),clearInterval(h),tt(),clearTimeout(st),st=void 0,clearTimeout(this._dragStartTimer),Mt(this._cloneId),Mt(this._dragStartId),ft(L,"mousemove",this._onTouchMove),this.nativeDraggable&&(ft(L,"drop",this),ft(s,"dragstart",this._onDragStart),ft(L,"dragover",this._handleAutoScroll),ft(L,"dragover",at)),this._offUpEvents(),n&&(_&&(n.cancelable&&n.preventDefault(),!l.dropBubble&&n.stopPropagation()),a&&a.parentNode&&a.parentNode.removeChild(a),(o===e||f&&"clone"!==f.lastPutMode)&&r&&r.parentNode&&r.parentNode.removeChild(r),t&&(this.nativeDraggable&&ft(t,"dragend",this),yt(t),t.style["will-change"]="",ht(t,f?f.options.ghostClass:this.options.ghostClass,!1),ht(t,this.options.chosenClass,!1),bt(this,o,"unchoose",t,e,o,d,null,n),o!==e?((u=Dt(t,l.draggable))>=0&&(bt(null,e,"add",t,e,o,d,u,n),bt(this,o,"remove",t,e,o,d,u,n),bt(null,e,"sort",t,e,o,d,u,n),bt(this,o,"sort",t,e,o,d,u,n)),f&&f.save()):t.nextSibling!==i&&(u=Dt(t,l.draggable))>=0&&(bt(this,o,"update",t,e,o,d,u,n),bt(this,o,"sort",t,e,o,d,u,n)),ct.active&&(null!=u&&-1!==u||(u=d),bt(this,o,"end",t,e,o,d,u,n),this.save()))),this._nulling()},_nulling:function(){o=t=e=a=i=r=n=s=l=D.length=h=m=v=g=b=_=u=d=y=C=k=f=p=ct.active=null,K.forEach(function(t){t.checked=!0}),K.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var t,e=[],a=this.el.children,r=0,o=a.length,i=this.options;r<o;r++)dt(t=a[r],i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||kt(t));return e},sort:function(t){var e={},a=this.el;this.toArray().forEach(function(t,r){var o=a.children[r];dt(o,this.options.draggable,a,!1)&&(e[t]=o)},this),t.forEach(function(t){e[t]&&(a.removeChild(e[t]),a.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return dt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var a=this.options;if(void 0===e)return a[t];a[t]=e,"group"===t&&et(a)},destroy:function(){var t=this.el;t[N]=null,ft(t,"mousedown",this._onTapStart),ft(t,"touchstart",this._onTapStart),ft(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ft(t,"dragover",this),ft(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),$.splice($.indexOf(this.el),1),this.el=t=null},_hideClone:function(){r.cloneHidden||(mt(r,"display","none"),r.cloneHidden=!0,r.parentNode&&this.options.removeCloneOnHide&&r.parentNode.removeChild(r))},_showClone:function(e){"clone"===e.lastPutMode?r.cloneHidden&&(o.contains(t)&&!this.options.group.revertClone?o.insertBefore(r,t):i?o.insertBefore(r,i):o.appendChild(r),this.options.group.revertClone&&this._animate(t,r),mt(r,"display",""),r.cloneHidden=!1):this._hideClone()}},pt(L,"touchmove",function(t){(ct.active||S)&&t.cancelable&&t.preventDefault()}),ct.utils={on:pt,off:ft,css:mt,find:gt,is:function(t,e){return!!dt(t,e,t,!1)},extend:Tt,throttle:St,closest:dt,toggleClass:ht,clone:$t,index:Dt,nextTick:Pt,cancelNextTick:Mt,detectDirection:J,getChild:xt},ct.create=function(t,e){return new ct(t,e)},ct.version="1.8.1",ct})},otJg:function(t,e){},wvko:function(t,e){}});
//# sourceMappingURL=3.f6f587734dc13104ea5a.js.map
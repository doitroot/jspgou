webpackJsonp([30],{YCuu:function(e,t){},iS6c:function(e,t){},"u+n9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),r=a.n(s),o=a("5HJ5"),i=a("yyHI"),n={name:"cmsArea",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{cityProps:{value:"areaCode",label:"areaName",children:"childs"},areas:[]}},computed:{areaList:function(){return this.$store.state.dict.area}},watch:{data:{handler:function(){this.areas=this.$cms.deepCopy(this.data)},deep:!0,immediate:!0}},methods:{getAreas:function(e){var t=[],a=this.$refs.area.currentLabels,s=e;console.log(s),s.forEach(function(e,s){var r={code:e,areaName:a[s]};t.push(r)}),this.$emit("change",t)}},created:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{ref:"area",attrs:{options:e.areaList,props:e.cityProps,filterable:"",separator:"-",placeholder:"请选择地区支持输入搜索"},on:{change:e.getAreas},model:{value:e.areas,callback:function(t){e.areas=t},expression:"areas"}})],1)},staticRenderFns:[]};var d=a("C7Lr")(n,l,!1,function(e){a("YCuu")},null,null).exports,c=a("x1ym"),u={companyName:"",customerName:"",addressType:"",provinceCode:"",provinceName:"",cityCode:"",cityName:"",areaCode:"",areaName:"",address:"",tel:"",postCode:"",isDefault:!0},m={name:"",mixins:[o.a],components:{cmsArea:d},data:function(){return{timer:[],activeStatus:"",shippingList:[],deliveryList:[],areaData:[],addressForm:r()({},u),rules:{customerName:[c.a.required()],areaCode:[c.a.required("必须选择一个地区","change")],address:[c.a.required("必须填写一个地址","blur"),c.a.max(50)],tel:[c.a.required(),c.a.tel()],postCode:[c.a.number(),c.a.$length(6)],isDefault:[c.a.required()]},addrInfo:"收货地址",addressType:1,addrVisable:!1}},filters:{},methods:{getArea:function(e){this.addressForm.provinceCode=e[0].code,this.addressForm.provinceName=e[0].areaName,this.addressForm.cityCode=e[1].code,this.addressForm.cityName=e[1].areaName,this.addressForm.areaCode=e[2].code,this.addressForm.areaName=e[2].areaName},shippingToggleDefault:function(e,t){var a=this;e?Object(i.m)({id:t}).then(function(e){200===e.code&&(a.$successMessage("操作成功"),a.getTableData())}):Object(i.n)({id:t}).then(function(e){200!==e.code&&(a.$errorMessage(e.message),a.getTableData())})},deliveryToggleDefault:function(e,t){var a=this;e?Object(i.m)({id:t}).then(function(e){200===e.code?(a.$successMessage("操作成功"),a.getTableData()):a.$errorMessage(e.message)}):Object(i.n)({id:t}).then(function(e){200!==e.code&&(a.$errorMessage(e.message),a.getTableData())})},setAddressInfo:function(e,t,a,s){"save"===a?(this.addrInfo=e,this.addressForm.addressType=t,this.addressType=a,this.addrVisable=!0):(this.addrInfo=e,this.addressForm.addressType=t,this.addressForm=r()(this.addressForm,s),this.areaData=[s.provinceCode,s.cityCode,s.areaCode],this.addressType=a,this.addrVisable=!0)},submitAddr:function(e){var t=this;this.$refs.form.validate(function(a){a&&("save"===e?t.saveAddressInfo():t.updateAddressInfo())})},saveAddressInfo:function(){var e=this;Object(i.q)(this.addressForm).then(function(t){200===t.code?(e.$successMessage("新增成功"),e.handleClose(),e.getTableData()):e.$errorMessage(t.message)})},updateAddressInfo:function(){var e=this;Object(i.r)(this.addressForm).then(function(t){200===t.code?(e.$successMessage("修改成功"),e.getTableData(),e.handleClose()):e.$errorMessage(t.message)})},deleteData:function(e){var t=this;this.$confirm("是否确认删除该地址","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(a){Object(i.o)({ids:[e]}).then(function(e){200===e.code?(t.$successMessage("删除成功"),t.getTableData()):t.$errorMessage(e.message)})}).catch(function(){})},getTableData:function(){var e=this;this.loading=!0,Object(i.p)().then(function(t){200===t.code&&(e.shippingList=t.data.filter(function(e){return 2===e.addressType}),e.deliveryList=t.data.filter(function(e){return 1===e.addressType}),e.loading=!1)})},handleClose:function(){this.addressForm=r()({},u),this.addrVisable=!1,this.$refs.form.clearValidate(),this.addrInfo="",this.areaData=[]}},created:function(){this.getTableData()}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"cms-list-layout"},[a("cms-prompt",{attrs:{collapse:"true"}},[a("li",[e._v("发货或收货地址中各只能同时存在一个默认地址")]),e._v(" "),a("li",[e._v("发货或收货地址各最多只能添加20条地址")]),e._v(" "),a("li",[e._v("默认地址在系统或平台需要处理卖家信息时会使用，请谨慎设置")])]),e._v(" "),a("div",{staticClass:"max-warp"},[a("h3",{staticClass:"cms-segmentation"},[e._v("发货地址\n      "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.setAddressInfo("新增发货地址",1,"save")}}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deliveryList,stripe:""}},[a("el-table-column",{attrs:{prop:"customerName",label:"联系人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-overflow"},[e._v("\n            "+e._s(t.row.customerName)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-overflow"},[e._v(e._s(t.row.provinceName)+e._s(t.row.cityName)+e._s(t.row.areaName)+e._s(t.row.address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isDefault",label:"是否默认"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cms-switch",{attrs:{id:t.row.id},on:{change:e.deliveryToggleDefault},model:{value:t.row.isDefault,callback:function(a){e.$set(t.row,"isDefault",a)},expression:"scope.row.isDefault"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"175",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.setAddressInfo("修改发货地址",1,"update",t.row)}}},[e._v("编辑")]),e._v(" "),t.row.isDefault?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),e.deleteData(t.row.id)}}},[e._v("删除")])],1)}}])})],1)],1),e._v(" "),a("div",{staticClass:"max-warp"},[a("h3",{staticClass:"cms-segmentation"},[e._v("收货地址\n      "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.setAddressInfo("新增收货地址",2,"save")}}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shippingList,stripe:""}},[a("el-table-column",{attrs:{prop:"customerName",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-overflow"},[e._v(e._s(t.row.provinceName)+e._s(t.row.cityName)+e._s(t.row.areaName)+e._s(t.row.address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isDefault",label:"是否默认"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cms-switch",{attrs:{id:t.row.id},on:{change:e.shippingToggleDefault},model:{value:t.row.isDefault,callback:function(a){e.$set(t.row,"isDefault",a)},expression:"scope.row.isDefault"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"175",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.setAddressInfo("修改收货地址",2,"update",t.row)}}},[e._v("编辑")]),e._v(" "),t.row.isDefault?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),e.deleteData(t.row.id)}}},[e._v("删除")])],1)}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.addrInfo,visible:e.addrVisable,"before-close":e.handleClose,width:"650px"}},[a("div",{staticStyle:{padding:"15px"}},[a("el-form",{ref:"form",attrs:{model:e.addressForm,"label-width":"110px",rules:e.rules}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{maxlength:"150"},model:{value:e.addressForm.companyName,callback:function(t){e.$set(e.addressForm,"companyName",t)},expression:"addressForm.companyName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名",prop:"customerName"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:e.addressForm.customerName,callback:function(t){e.$set(e.addressForm,"customerName",t)},expression:"addressForm.customerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在地",prop:"areaCode"}},[a("cms-area",{attrs:{data:e.areaData},on:{change:e.getArea}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{attrs:{maxlength:"150"},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{attrs:{maxlength:"13"},model:{value:e.addressForm.tel,callback:function(t){e.$set(e.addressForm,"tel",t)},expression:"addressForm.tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮编"}},[a("el-input",{attrs:{maxlength:"13"},model:{value:e.addressForm.postCode,callback:function(t){e.$set(e.addressForm,"postCode",t)},expression:"addressForm.postCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否默认",prop:"isDefault"}},[a("cms-switch",{model:{value:e.addressForm.isDefault,callback:function(t){e.$set(e.addressForm,"isDefault",t)},expression:"addressForm.isDefault"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitAddr(e.addressType)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.handleClose}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var p=a("C7Lr")(m,f,!1,function(e){a("iS6c")},"data-v-05e6b4cc",null);t.default=p.exports}});
//# sourceMappingURL=30.b1ef6cf8c9ce379790cb.js.map
webpackJsonp([85],{cqmj:function(t,e){},uCdS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("aA9S"),s=a.n(r),i=a("lcoF"),o=a("x1ym"),l=a("PUYW"),n=a("mNbs"),c={id:"",isEnable:!0,mediaId:"",msgType:"",ruleName:"",sortNum:null,thumbMediaId:"",hqMusicUrll:"",musicUrl:"",description:"",title:"",content:"",wechatReplyKeywordList:[]},d={name:"keywordSave",mixins:[i.a],components:{mediaWarpper:l.a},data:function(){return{formData:s()({},c),keywordList:[],rules:{ruleName:[o.a.required("请填写规则名称")],sortNum:[o.a.required("请填写匹配优先级"),o.a.number()]}}},methods:{update:function(t){var e=this.$cms.deepCopy(this.formData),a=[];this.keywordList.forEach(function(t){t.type?(t.wordkeyLike="",t.wordkeyEq=t.value):(t.wordkeyLike=t.value,t.wordkeyEq=""),a.push(t)}),e.wechatReplyKeywordList=a,delete e.wechatMaterial,this.updateForm(n.h,e,"/wechatAutoResponse/keywordReplyList","list")},getFormData:function(t){var e=this;Object(n.e)({id:t}).then(function(t){e.formData=s()(c,t.data),"text"===t.data.msgType&&(e.formData.wechatMaterial={mediaType:"text",content:t.data.content}),"music"===t.data.msgType&&(e.formData.wechatMaterial={mediaType:"music",title:t.data.title,musicUrl:t.data.musicUrl,hqMusicUrll:t.data.hqMusicUrll});var a=t.data.wechatReplyKeywordList;e.formData.wechatReplyKeywordList=t.data.wechatReplyKeywordList,a.length>0&&a.forEach(function(t){var a=s()({},t);""===t.wordkeyEq?(a.value=t.wordkeyLike,a.type=!1):(a.value=t.wordkeyEq,a.type=!0),e.keywordList.push(a)})})},deleteData:function(t){this.keywordList.splice(t,1)},addKeyword:function(){this.keywordList.push({value:"",type:!1})},getMediaData:function(t){t[0]?(this.formData.mediaId=t[0].id,this.formData.msgType=t[0].mediaType,this.formData.appId=t[0].appId):(this.formData.hqMusicUrll=t.hqMusicUrll,this.formData.musicUrl=t.musicUrl,this.formData.thumbMediaId=t.thumbMediaId,this.formData.description=t.description,this.formData.title=t.title,this.formData.content=t.content,this.formData.msgType=t.msgType)},rest:function(){this.$refs.form.resetFields(),this.destroyed(),this.formData=this.$cms.deepCopy(c),this.keywordList=[]}},created:function(){this.getFormData(this.$route.query.id),this.formData.id=this.$route.query.id}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("cms-breadcrumb",{attrs:{to:"/wechatAutoResponse/keywordReplyList"},on:{click:t.rest}},[a("li",[t._v(t._s(t.$route.name))])]),t._v(" "),a("div",{staticClass:"cms-form-layout"},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.formData,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"规则名称:",prop:"ruleName"}},[a("el-input",{ref:"first",attrs:{autofocus:!0,maxlength:"100"},model:{value:t.formData.ruleName,callback:function(e){t.$set(t.formData,"ruleName",e)},expression:"formData.ruleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"匹配优先级:",prop:"sortNum"}},[a("el-input",{attrs:{maxlength:"2"},model:{value:t.formData.sortNum,callback:function(e){t.$set(t.formData,"sortNum",t._n(e))},expression:"formData.sortNum"}}),t._v(" "),a("div",{staticClass:"gray"},[t._v("在多组规则关键词都匹配的情况下，优先匹配优先级越大的")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否禁用",prop:"isEnable"}},[a("cms-switch",{model:{value:t.formData.isEnable,callback:function(e){t.$set(t.formData,"isEnable",e)},expression:"formData.isEnable"}}),t._v(" "),a("div",{staticClass:"gray"},[t._v("设置为“是”，标识当前规则暂不生效")])],1),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("关键词列表")]),t._v(" "),a("el-table",{ref:"dataTable",staticClass:"keyword-table",attrs:{data:t.keywordList}},[a("el-table-column",{attrs:{label:"关键词"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入匹配的关键词",maxlength:"50"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"matchingRule",label:"匹配规则"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("cms-switch",{attrs:{"on-text":"完全","off-text":"模糊",size:"large"},model:{value:e.row.type,callback:function(a){t.$set(e.row,"type",a)},expression:"scope.row.type"}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"175",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("cms-button",{attrs:{icon:"error",size:"small",type:"info"},on:{click:function(a){a.stopPropagation(),t.deleteData(e.$index)}}},[t._v("删除")])],1)}}])})],1),t._v(" "),a("div",{staticClass:"addKeyword",on:{click:function(e){t.addKeyword()}}},[t._v("＋ 添加关键词")]),t._v(" "),a("div",{staticStyle:{width:"100%",cursor:"pointer"}},[a("h3",{staticClass:"cms-segmentation"},[t._v("触发后回复内容\n        ")]),t._v(" "),t.status?a("media-warpper",{staticStyle:{margin:"0"},attrs:{show:!0,data:t.formData.wechatMaterial},on:{change:t.getMediaData}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"cms-form-footer"},[a("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){t.update(!0)}}},[t._v("修改")])],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(d,m,!1,function(t){a("cqmj")},"data-v-ba07f1a6",null);e.default=u.exports}});
//# sourceMappingURL=85.e9c8220666ec95167ba9.js.map
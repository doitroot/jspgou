{"version":3,"sources":["webpack:///src/views/shop/product/category/list.vue","webpack:///./src/views/shop/product/category/list.vue?bf63","webpack:///./src/views/shop/product/category/list.vue"],"names":["category_list","mixins","data","typeList","tableData","expandAll","queryParams","parentId","selfId","columnState","sortIds","sorts","methods","sortNum","el","id","_this","this","val","target","value","test","className","Object","category","then","res","code","$successMessage","$errorMessage","$cmsMessage","message","type","timer","fastClick","showTab","status","_this2","ids","virtualTab","_this3","showRow","row","show","_show","toggleExpanded","trIndex","_this4","record","_expanded","_load","chidView","loading","arr","utils_eval","i","length","splice","state","from_default","forEach","v","nodeIds","indexOf","push","iconShow","index","isChild","getTableData","callBack","params","_this5","deleteData","_this6","$confirm","confirmButtonText","cancelButtonText","catch","query","page","created","product_category_list","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","collapse","_v","staticStyle","border-top","directives","name","rawName","expression","icon","size","on","click","$event","$routerLink","width","row-style","label","min-width","scopedSlots","_u","key","fn","scope","$index","style","marginLeft","_level","class","_s","cateName","prop","$cms","float","bondPrice","commissionRate","maxlength","nativeOn","keyup","_k","keyCode","model","callback","$$v","$set","change","fixed","align","typeName","_e","toString","rate","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/49.ef9a36ff01fc3bfc71b3.js","sourcesContent":[" <!--商品分类列表-->\n<template>\n  <div class=\"cms-list-layout\">\n    <cms-prompt collapse='true'>\n      <li>显示商品分类列表信息</li>\n      <li>可对商品分类进行新增、修改、删除及查看、新增下级商品分类</li>\n      <li>商城最多支持四级分类</li>\n    </cms-prompt>\n    <cms-sticky>\n    <section class=\"cms-batch\" style=\"border-top:0;\">\n      <cms-button v-prem=\"'/productCategory/save'\" icon=\"add\" type=\"success\" size=\"small\"\n       @click=\"$routerLink('/productCategory/save','save',{nodeIds:'0'})\">添加分类</cms-button>\n    </section>\n    </cms-sticky>\n    <el-table :data=\"tableData\" :row-style=\"showRow\" style=\"width:100%\" v-loading='loading'>\n      <el-table-column label=\"分类名称\" min-width=\"200\">\n        <template slot-scope=\"scope\">\n          <div class=\"menu-name\" :style=\"{marginLeft:(scope.row._level*16)+'px'}\" v-if=\"iconShow(scope.$index,scope.row)\" @click=\"toggleExpanded(scope.$index)\">\n            <span class=\"tree-ctrl\">\n              <i :class=\"scope.row._expanded?'el-icon-caret-right':'el-icon-caret-bottom'\"></i>\n            </span>\n            <span>{{scope.row.cateName}}</span>\n          </div>\n          <div v-else :style=\"{marginLeft:(scope.row._level*16)+'px'}\">\n            <span class=\"icon-dot\">○</span>\n            <span>{{scope.row.cateName}}</span>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"保证金\" prop=\"bondPrice\" min-width=\"135\">\n        <template slot-scope=\"scope\">\n          <span>{{$cms.float(scope.row.bondPrice)}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"佣金比例\" prop=\"commissionRate\">\n        <template slot-scope=\"scope\">\n          {{scope.row.commissionRate}}%\n        </template>\n      </el-table-column>\n      <el-table-column label=\"排序\" prop=\"sortNum\">\n        <template slot-scope=\"scope\">\n          <el-input  @keyup.enter.native=\"sortNum($event,scope.row.id)\" maxlength=\"2\" v-model=\"scope.row.sortNum\"> </el-input>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"是否显示\" prop=\"show\">\n        <template slot-scope=\"scope\">\n          <cms-switch @change=\"showTab(scope.row.show,scope.row.id)\" v-model=\"scope.row.show\"></cms-switch>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width='420' fixed=\"right\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <cms-button  icon='add' size='small' type='info' \n          v-if=\"scope.row.nodeIds.length==1\"\n          @click=\"$routerLink('/productCategory/navigation','save',{\n            typeName:scope.row.cateName,\n            id:scope.row.id\n          })\">设置分类导航</cms-button>\n          <cms-button \n            v-if=\"scope.row.nodeIds.length<4\"\n          v-prem=\"'/productCategory/save'\" icon='add' size='small' type='info' @click=\"$routerLink('/productCategory/save','save',{nodeIds:scope.row.nodeIds.toString(),rate:scope.row.commissionRate})\">新增下级分类</cms-button>\n          <cms-button v-prem=\"'/productCategory/update'\" icon='edit' size='small' type='info' @click=\"$routerLink('/productCategory/update','update',{id:scope.row.id})\">编辑</cms-button>\n          <cms-button v-prem=\"'/productCategory/delete'\" icon='delete' size='small' type='info' @click.stop=\"deleteData(scope.row,scope.$index)\">删除</cms-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport treeToArray from '@/utils/eval.js'\nimport {\n  productCategoryList,\n  productCategoryDelete,\n  productCategoryShow,\n  productCategoryHide,\n  productCategoryVirtual,\n  productCategoryDisVirtual,\n  productCategorySort\n} from '@/api/product/category.js'\nimport list from '@/mixins/list'\nexport default {\n  mixins: [list],\n  data() {\n    return {\n      typeList: [],\n      tableData: [],\n      expandAll: false,\n      queryParams: {\n        parentId: ''\n      },\n      selfId: 0, // 当前点击的id 不可删除\n      columnState: true, // 判断行隐藏\n      sortIds: [],\n      sorts: []\n    }\n  },\n  methods: {\n    sortNum(el, id) {\n      // 数字排序\n      const val = el.target.value\n      const reg = /^[1-9][0-9]{0,1}$/\n      if (val === '') {\n        return false\n      } else {\n        if (reg.test(val)) {\n          el.target.className = 'el-input__inner'\n          productCategorySort({ sorts: [{\n            id: id,\n            sortNum: val\n          }] }).then(res => {\n            if (res.code === 200) {\n              this.$successMessage('修改成功')\n            } else {\n              this.$errorMessage('修改失败')\n            }\n          })\n        } else {\n          el.target.className = 'cms-error el-input__inner'\n          this.$cmsMessage({\n            message: '只能输入1-99的正整数',\n            type: 'error',\n            timer: '1000',\n            fastClick: false\n          })\n        }\n      }\n    },\n    showTab(status, id) { // 修改显示隐藏\n      if (status) {\n        productCategoryShow({ ids: [id] }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('操作成功')\n          } else {\n            this.$errorMessage('操作失败,' + res.message)\n          }\n        })\n      } else {\n        productCategoryHide({ ids: [id] }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('操作成功')\n          } else {\n            this.$errorMessage('操作失败,' + res.message)\n          }\n        })\n      }\n    },\n    virtualTab(status, id) { // 修改是否虚拟\n      if (status) {\n        productCategoryVirtual({ ids: [id] }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('操作成功')\n          } else {\n            this.$errorMessage('操作失败,' + res.message)\n          }\n        })\n      } else {\n        productCategoryDisVirtual({ ids: [id] }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('操作成功')\n          } else {\n            this.$errorMessage('操作失败,' + res.message)\n          }\n        })\n      }\n    },\n    showRow: function(row) {\n      const show = row.row._show\n      row.row._show = show\n      return show\n        ? 'animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;'\n        : 'display:none;'\n    },\n    // 切换下级是否展开\n    toggleExpanded: function(trIndex) {\n      const record = this.tableData[trIndex]\n      if (record._expanded) {\n        // 判断展开\n        if (!record._load) {\n          // 判断是否加载过\n          this.queryParams.parentId = record.id\n          this.loading = true\n          productCategoryList(this.queryParams).then(res => {\n            if (res.code === 200) {\n              const arr = treeToArray(res.data)\n              for (let i = 0; i < arr.length; i++) {\n                this.tableData.splice(trIndex + (i + 1), 0, arr[i])\n              }\n              record._expanded = false\n              record._load = true\n              this.loading = false\n            }\n          })\n        } else {\n          this.chidView(record, true)\n          record._expanded = false\n        }\n      } else {\n        record._expanded = true\n        this.chidView(record, false)\n      }\n    },\n    chidView(record, state) {\n      // 子集显示，核心判断这个方法\n      const arr = []\n      Array.from(this.tableData).forEach(v => {\n        if (v.nodeIds.indexOf(record.id) > -1 && v.id !== record.id) {\n          v._show = state\n        }\n        arr.push(v)\n      })\n      this.tableData = arr\n    },\n    // 图标显示\n    iconShow(index, record) {\n      return !record.isChild\n    },\n    getTableData(callBack, params) {\n      this.loading = true\n      callBack(params).then(res => {\n        if (res.code === 200) {\n          this.tableData = treeToArray(res.data)\n          this.loading = false\n        }\n      })\n    },\n    deleteData(row, index) {\n      // 删除菜单\n      this.$confirm('删除分类可能会影响系统正常运行,请确定是否删除!', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'error'\n      })\n        .then(() => {\n          this.loading = true\n          productCategoryDelete({ ids: [row.id] }).then(res => {\n            this.loading = false\n            if (res.code === 200) {\n              if (row.isChild) {\n                this.tableData.splice(index, 1)\n              } else {\n                this.queryParams.parentId = ''\n                this.getTableData(productCategoryList, this.queryParams)\n              }\n              this.$successMessage('删除成功')\n            } else {\n              this.$errorMessage('删除失败,' + res.message)\n            }\n          })\n        })\n        .catch(() => {})\n    },\n    query() {\n      this.queryParams.page = 1\n      this.getTableData(productCategoryList, this.queryParams)\n    }\n  },\n  created() {\n    this.getTableData(productCategoryList, this.queryParams)\n  }\n}\n</script>\n<style rel=\"stylesheet/css\">\n</style>\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n$color-blue: #188ae2;\n\n.menu-name {\n  position: relative;\n  cursor: pointer;\n  user-select: none;\n}\n.tree-ctrl {\n  cursor: pointer;\n  color: $color-blue;\n  margin-left: 0px;\n}\n.icon-dot {\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  position: relative;\n  top: 1px;\n  left: 4px;\n  color: $color-blue;\n  font-size: 18px;\n  font-weight: bold;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/shop/product/category/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cms-list-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":\"true\"}},[_c('li',[_vm._v(\"显示商品分类列表信息\")]),_vm._v(\" \"),_c('li',[_vm._v(\"可对商品分类进行新增、修改、删除及查看、新增下级商品分类\")]),_vm._v(\" \"),_c('li',[_vm._v(\"商城最多支持四级分类\")])]),_vm._v(\" \"),_c('cms-sticky',[_c('section',{staticClass:\"cms-batch\",staticStyle:{\"border-top\":\"0\"}},[_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/productCategory/save'),expression:\"'/productCategory/save'\"}],attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.$routerLink('/productCategory/save','save',{nodeIds:'0'})}}},[_vm._v(\"添加分类\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"row-style\":_vm.showRow}},[_c('el-table-column',{attrs:{\"label\":\"分类名称\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.iconShow(scope.$index,scope.row))?_c('div',{staticClass:\"menu-name\",style:({marginLeft:(scope.row._level*16)+'px'}),on:{\"click\":function($event){_vm.toggleExpanded(scope.$index)}}},[_c('span',{staticClass:\"tree-ctrl\"},[_c('i',{class:scope.row._expanded?'el-icon-caret-right':'el-icon-caret-bottom'})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.cateName))])]):_c('div',{style:({marginLeft:(scope.row._level*16)+'px'})},[_c('span',{staticClass:\"icon-dot\"},[_vm._v(\"○\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.cateName))])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"保证金\",\"prop\":\"bondPrice\",\"min-width\":\"135\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.$cms.float(scope.row.bondPrice)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"佣金比例\",\"prop\":\"commissionRate\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.commissionRate)+\"%\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"排序\",\"prop\":\"sortNum\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"maxlength\":\"2\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.sortNum($event,scope.row.id)}},model:{value:(scope.row.sortNum),callback:function ($$v) {_vm.$set(scope.row, \"sortNum\", $$v)},expression:\"scope.row.sortNum\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否显示\",\"prop\":\"show\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('cms-switch',{on:{\"change\":function($event){_vm.showTab(scope.row.show,scope.row.id)}},model:{value:(scope.row.show),callback:function ($$v) {_vm.$set(scope.row, \"show\", $$v)},expression:\"scope.row.show\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"420\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.nodeIds.length==1)?_c('cms-button',{attrs:{\"icon\":\"add\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.$routerLink('/productCategory/navigation','save',{\n          typeName:scope.row.cateName,\n          id:scope.row.id\n        })}}},[_vm._v(\"设置分类导航\")]):_vm._e(),_vm._v(\" \"),(scope.row.nodeIds.length<4)?_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/productCategory/save'),expression:\"'/productCategory/save'\"}],attrs:{\"icon\":\"add\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.$routerLink('/productCategory/save','save',{nodeIds:scope.row.nodeIds.toString(),rate:scope.row.commissionRate})}}},[_vm._v(\"新增下级分类\")]):_vm._e(),_vm._v(\" \"),_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/productCategory/update'),expression:\"'/productCategory/update'\"}],attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.$routerLink('/productCategory/update','update',{id:scope.row.id})}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/productCategory/delete'),expression:\"'/productCategory/delete'\"}],attrs:{\"icon\":\"delete\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleteData(scope.row,scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4a1d1544\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/shop/product/category/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a1d1544\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a1d1544\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=1!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a1d1544\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4a1d1544\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shop/product/category/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
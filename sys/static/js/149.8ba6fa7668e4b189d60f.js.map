{"version":3,"sources":["webpack:///src/views/wechat/public/fans/list.vue","webpack:///./src/views/wechat/public/fans/list.vue?e1e6","webpack:///./src/views/wechat/public/fans/list.vue"],"names":["defaultData","nickname","page","size","tagidList","black","fans_list","mixins","list","data","nameListActive","fansVisible","addTagVisible","setTagsVisible","form","tagName","percentage","selfIndex","timer","queryParams","assign_default","fansTagItems","fansTotal","checkedTags","checkedIds","activeTagId","computed","color","this","$store","state","system","methods","validateRepeat","rule","value","callback","forEach","v","Error","tabsClick","tab","e","name","encodeQuery","params","Object","emoji","getTableData","wechat","getTableDataByTagId","id","showEmojiName","str","showTagNames","tagList","length","tagsIds","$cms","arrayToNumber","i","j","push","syncFansList","_this","clearInterval","setInterval","setPercentage","then","res","code","setTimeout","$successMessage","$errorMessage","message","syncFansListById","_this2","batchStatus","loading","$loading","target","text","ids","close","catch","syncfansTags","_this3","res1","fansSize","res2","total","totalElements","tableData","content","setFansTags","item","status","saveTags","_this4","tagid","getFansTags","blackFans","_this5","$confirm","confirmButtonText","cancelButtonText","type","returnFans","_this6","returnFan","_this7","_this8","cancelFansTags","$refs","resetFields","addFansTags","_this9","validate","valid","userCount","delFansTag","_this10","editFansTag","val","_this11","$prompt","inputValue","inputValidator","_ref","tagname","created","public_fans_list","render","_vm","_h","$createElement","_c","_self","staticClass","on","tab-click","model","$$v","expression","attrs","label","_v","collapse","nativeOn","keyup","$event","_k","keyCode","key","$set","trim","colorPicker","click","directives","rawName","fixClass","_s","title","placement","width","ref","prop","show-message","rules","max","trigger","validator","required","staticStyle","autofocus","placeholder","text-align","margin","slot","_l","style","display","icon","min-height","stripe","selection-change","getCheckItems","row-click","checkRows","fixed","scopedSlots","_u","fn","scope","src","row","headimgurl","alt","min-width","domProps","innerHTML","index","$index","stopPropagation","_e","$moment","subscribeTime","align","$routerLink","change","getPage","center","visible","top","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2LAuMAA,GACAC,SAAA,GACAC,KAAA,EACAC,KAAA,GACAC,UAAA,GACAC,OAAA,GAEAC,GACAC,QAAAC,EAAA,GACAC,KAFA,WAGA,OACAC,eAAA,OACAC,aAAA,EACAC,eAAA,EACAC,gBAAA,EACAC,MACAC,QAAA,IAEAC,WAAA,EACAC,WAAA,EACAC,MAAA,KACAC,YAAAC,OAAApB,GACAqB,gBACAC,UAAA,EACAC,eACAC,cACAC,YAAA,KAGAC,UACAC,MADA,WAEA,OAAAC,KAAAC,OAAAC,MAAAC,OAAAJ,QAGAK,SACAC,eADA,SACAC,EAAAC,EAAAC,GACAR,KAAAP,aAAAgB,QAAA,SAAAC,GACAA,EAAAvB,UAAAoB,GACAC,EAAA,IAAAG,MAAA,qBAIAC,UARA,SAQAC,EAAAC,GACA,UAAAD,EAAAE,MACAf,KAAAT,YAAAd,OAAA,EACAuB,KAAAT,YAAAf,UAAA,IAEAwB,KAAAT,YAAAd,OAAA,EAEAuB,KAAAgB,eAEAA,YAjBA,WAkBA,IAAAC,GACA3C,KAAA,EACAC,KAAAyB,KAAAT,YAAAhB,KACAF,SAAA,KAAA2B,KAAAT,YAAAlB,SAAA,GAAA6C,OAAAC,EAAA,EAAAD,CAAAlB,KAAAT,YAAAlB,UACAI,MAAAuB,KAAAT,YAAAd,OAEAuB,KAAAoB,aAAAC,EAAA,EAAAJ,IAEAK,oBA1BA,SA0BAC,GAEA,IAAAN,GACA3C,KAAA,EACAC,KAAA,GACAF,SAAA,GACAG,UAAA+C,GAEAvB,KAAAT,YAAAlB,SAAA,GACA2B,KAAAH,YAAA0B,EACAvB,KAAAoB,aAAAC,EAAA,EAAAJ,IAEAO,cAtCA,SAsCAC,GAEA,IAAAV,EAAAG,OAAAC,EAAA,EAAAD,CAAAO,GAEA,OADAV,EAAAG,OAAAC,EAAA,EAAAD,CAAAH,IAGAW,aA5CA,SA4CAC,GACA,OAAA3B,KAAAP,aAAAmC,OACA,WAEA,QAAAD,EACA,cAIA,IAFA,IAAAE,EAAA7B,KAAA8B,KAAAC,cAAAJ,GACAZ,KACAiB,EAAA,EAAAA,EAAAH,EAAAD,OAAAI,IACA,QAAAC,EAAA,EAAAA,EAAAjC,KAAAP,aAAAmC,OAAAK,IACA,GAAAJ,EAAAG,KAAAhC,KAAAP,aAAAwC,GAAAV,GAAA,CACAR,EAAAmB,KAAAlC,KAAAP,aAAAwC,GAAA9C,SACA,MAIA,OAAA4B,GAIAoB,aAjEA,WAiEA,IAAAC,EAAApC,KAEAA,KAAAjB,aAAA,EACAsD,cAAArC,KAAAV,OACAU,KAAAV,MAAA,KACAU,KAAAV,MAAAgD,YAAAtC,KAAAuC,cAAA,KACMrB,OAAAG,EAAA,EAAAH,GAANsB,KAAA,SAAAC,GACAJ,cAAAD,EAAA9C,OACA,MAAAmD,EAAAC,MACAN,EAAAhD,WAAA,IACAuD,WAAA,WACAP,EAAAQ,gBAAA,QACAR,EAAAhB,aAAAC,EAAA,EAAAe,EAAA7C,aACA6C,EAAArD,aAAA,EACAqD,EAAAhD,WAAA,GACA,OAEAgD,EAAAS,cAAAJ,EAAAK,SACAV,EAAArD,aAAA,MAIAgE,iBAvFA,WAuFA,IAAAC,EAAAhD,KAEA,GAAAA,KAAAiD,YAAA,CACA,IAAAC,EAAAlD,KAAAmD,UACAC,OAAA,cACAC,KAAA,eAEQnC,OAAAG,EAAA,EAAAH,EAARoC,IAAAtD,KAAAsD,MACAd,KAAA,SAAAC,GACAS,EAAAK,QACA,MAAAd,EAAAC,MACAM,EAAAJ,gBAAA,SACAI,EAAA5B,aAAAC,EAAA,EAAA2B,EAAAzD,eAEA2D,EAAAK,QACAP,EAAAH,cAAAJ,EAAAK,YAGAU,MAAA,SAAA1C,GACAoC,EAAAK,eAGAvD,KAAA6C,cAAA,aAGAY,aAhHA,WAgHA,IAAAC,EAAA1D,KAEMkB,OAAAG,EAAA,EAAAH,GAANsB,KAAA,SAAAC,GACA,IAAAS,EAAAQ,EAAAP,UACAC,OAAA,cACAC,KAAA,SAEA,MAAAZ,EAAAC,KACUxB,OAAAG,EAAA,EAAAH,GAAVsB,KAAA,SAAAmB,GACAD,EAAAjE,aAAAkE,EAAA9E,KAAA8C,QACA+B,EAAAhE,UAAAiE,EAAA9E,KAAA+E,SACY1C,OAAAG,EAAA,EAAAH,CAAZwC,EAAAnE,aAAAiD,KAAA,SAAAqB,GACAX,EAAAK,QACAG,EAAAI,MAAAD,EAAAhF,KAAAkF,cACAL,EAAAM,UAAAH,EAAAhF,KAAAoF,QACAP,EAAAd,gBAAA,aAIAM,EAAAK,QACAG,EAAAb,cAAAJ,EAAAK,aAIAP,cAxIA,WAyIA,KAAAvC,KAAAZ,WACAY,KAAAZ,WAAA,GAEAY,KAAAZ,WAAAY,KAAAZ,WAAA,GAGA8E,YA/IA,SA+IAZ,EAAAa,EAAAC,GAEAA,GACApE,KAAAL,YAAAK,KAAA8B,KAAAC,cAAAoC,GACAnE,KAAAJ,YAAA0D,GACAtD,KAAAf,gBAAA,GAEAe,KAAAiD,aACAjD,KAAAJ,WAAAI,KAAAsD,IACAtD,KAAAL,eACAK,KAAAf,gBAAA,GAEAe,KAAA6C,cAAA,aAIAwB,SA/JA,WA+JA,IAAAC,EAAAtE,KAEMkB,OAAAG,EAAA,EAAAH,EACNoC,IAAAtD,KAAAJ,WACA2E,MAAAvE,KAAAL,cACA6C,KAAA,SAAAC,GACA6B,EAAArF,gBAAA,EACA,MAAAwD,EAAAC,MACA4B,EAAA1B,gBAAA,QACA0B,EAAAE,cACAF,EAAAtD,eAEAsD,EAAAzB,cAAAJ,EAAAK,YAIA2B,UA/KA,SA+KAnB,GAAA,IAAAoB,EAAA1E,KACAA,KAAAiD,YACAjD,KAAA2E,SAAA,oEACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAtC,KAAA,WACUtB,OAAAG,EAAA,EAAAH,EAAVoC,QAAAd,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAgC,EAAA9B,gBAAA,QACA8B,EAAA1D,eAEA0D,EAAA7B,cAAAJ,EAAAK,aAKA9C,KAAA6C,cAAA,aAGAkC,WAnMA,SAmMAzB,GAAA,IAAA0B,EAAAhF,KACAsD,EAAA1B,OAAA,EACQV,OAAAG,EAAA,EAAAH,EAARoC,QAAAd,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAsC,EAAApC,gBAAA,QACAoC,EAAAhE,eAEAgE,EAAAnC,cAAAJ,EAAAK,WAIA9C,KAAA6C,cAAA,aAGAoC,UAjNA,SAiNA1D,GAAA,IAAA2D,EAAAlF,KACMkB,OAAAG,EAAA,EAAAH,EAANoC,KAAA/B,KAAAiB,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAwC,EAAAtC,gBAAA,QACAsC,EAAAlE,eAEAkE,EAAArC,cAAAJ,EAAAK,YAIA0B,YA3NA,WA2NA,IAAAW,EAAAnF,KAEMkB,OAAAG,EAAA,EAAAH,GAANsB,KAAA,SAAAC,GACA0C,EAAA1F,aAAAgD,EAAA5D,KAAA8C,QACAwD,EAAAzF,UAAA+C,EAAA5D,KAAA+E,SACAuB,EAAAnE,iBAGAoE,eAnOA,WAqOApF,KAAAqF,MAAA,KAAAC,cACAtF,KAAAhB,eAAA,GAEAuG,YAxOA,WAwOA,IAAAC,EAAAxF,KAEAA,KAAAqF,MAAA,KAAAI,SAAA,SAAAC,GACA,IAAAA,EAcA,SAbUxE,OAAAG,EAAA,EAAAH,EAAV/B,QAAAqG,EAAAtG,KAAAC,UAAAqD,KAAA,SAAAC,GACA,MAAAA,EAAAC,KACA8C,EAAA/F,aAAAyC,MACAX,GAAAkB,EAAA5D,KAAA0C,GACApC,QAAAsD,EAAA5D,KAAAM,QACAwG,UAAAlD,EAAA5D,KAAA8G,YAGAH,EAAA3C,cAAA,QAEA2C,EAAAJ,sBAOAQ,WA7PA,SA6PArE,GAAA,IAAAsE,EAAA7F,KACAA,KAAA2E,SAAA,oBACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAtC,KAAA,WACA,IAAAU,EAAA2C,EAAA1C,UACAC,OAAA,cACAC,KAAA,YAEQnC,OAAAG,EAAA,EAAAH,EAARqD,MAAAhD,IAAAiB,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAmD,EAAAjD,gBAAA,QACAiD,EAAArB,eACAqB,EAAAhD,cAAAJ,EAAAK,SACAI,EAAAK,UACAC,MAAA,SAAA1C,GACAoC,EAAAK,YAEAC,MAAA,WACA,YAGAsC,YApRA,SAoRAC,EAAAxE,GAAA,IAAAyE,EAAAhG,KACAA,KAAAiG,QAAA,aACArB,kBAAA,KACAC,iBAAA,KACAC,KAAA,UACAoB,WAAAH,EACAI,eAAA,SAAA9C,GACA,WAAAA,EACA,aAEAA,EAAAzB,OAAA,KACA,mBAMAY,KAAA,SAAA4D,GAAA,IAAA7F,EAAA6F,EAAA7F,MACA2C,EAAA8C,EAAA7C,UACAC,OAAA,cACAC,KAAA,SAEQnC,OAAAG,EAAA,EAAAH,EAARqD,MAAAhD,EAAA8E,QAAA9F,IAAAiC,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAsD,EAAApD,gBAAA,QACAoD,EAAAxB,eACAwB,EAAAnD,cAAAJ,EAAAK,SACAI,EAAAK,UACAC,MAAA,SAAA1C,GACAoC,EAAAK,YAEAC,MAAA,WACA,aAIA8C,QAnVA,WAqVAtG,KAAAwE,gBC9hBe+B,GADEC,OAJjB,WAA0B,IAAAC,EAAAzG,KAAa0G,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA8BF,EAAA,WAAgBG,IAAIC,YAAAP,EAAA7F,WAA0BqG,OAAQ1G,MAAAkG,EAAA,eAAAjG,SAAA,SAAA0G,GAAoDT,EAAA3H,eAAAoI,GAAuBC,WAAA,oBAA8BP,EAAA,eAAoBQ,OAAOC,MAAA,OAAAtG,KAAA,UAA8B0F,EAAAa,GAAA,KAAAV,EAAA,eAAgCQ,OAAOC,MAAA,MAAAtG,KAAA,YAA8B,GAAA0F,EAAAa,GAAA,KAAAV,EAAA,cAAmCQ,OAAOG,SAAA,UAAmBX,EAAA,MAAAH,EAAAa,GAAA,0BAAAb,EAAAa,GAAA,KAAAV,EAAA,MAAAH,EAAAa,GAAA,0BAAAb,EAAAa,GAAA,KAAAV,EAAA,WAA4HE,YAAA,mBAA6BF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,SAAAH,EAAAa,GAAA,UAAAb,EAAAa,GAAA,KAAAV,EAAA,YAA0DY,UAAUC,MAAA,SAAAC,GAAyB,iBAAAA,IAAAjB,EAAAkB,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,IAAA,SAA+FpB,EAAAzF,YAAA0G,GAAf,OAA+CT,OAAQ1G,MAAAkG,EAAAlH,YAAA,SAAAiB,SAAA,SAAA0G,GAA0DT,EAAAqB,KAAArB,EAAAlH,YAAA,4BAAA2H,IAAAa,OAAAb,IAAkFC,WAAA,2BAAoC,GAAAV,EAAAa,GAAA,KAAAV,EAAA,OAA4BE,YAAA,gBAA0BF,EAAA,cAAmBQ,OAAO7I,KAAA,QAAAyJ,aAAA,GAAkCjB,IAAKkB,MAAAxB,EAAAzF,eAAyByF,EAAAa,GAAA,cAAAb,EAAAa,GAAA,KAAAV,EAAA,OAA6CsB,aAAanH,KAAA,UAAAoH,QAAA,YAAA5H,MAAAkG,EAAA,QAAAU,WAAA,YAA4EL,YAAA,eAA2BF,EAAA,cAAmBsB,aAAanH,KAAA,OAAAoH,QAAA,SAAA5H,MAAA,SAAAkG,EAAA3H,eAAAqI,WAAA,8BAA0GC,OAASgB,SAAA,yBAAkCxB,EAAA,MAAWE,YAAA,sBAAgCF,EAAA,MAAWE,YAAA,qBAA+BF,EAAA,QAAaE,YAAA,KAAAC,IAAqBkB,MAAA,SAAAP,GAAyBjB,EAAAnF,oBAAA,QAA8BmF,EAAAa,GAAA,QAAAb,EAAA4B,GAAA5B,EAAA/G,WAAA,OAAA+G,EAAAa,GAAA,KAAAV,EAAA,QAAqEE,YAAA,OAAiBF,EAAA,KAAUE,YAAA,kBAAAM,OAAqCkB,MAAA,UAAiBvB,IAAKkB,MAAAxB,EAAAhD,gBAA0BgD,EAAAa,GAAA,iCAAAV,EAAA,cAA2DQ,OAAOmB,UAAA,SAAAC,MAAA,OAAmCvB,OAAQ1G,MAAAkG,EAAA,cAAAjG,SAAA,SAAA0G,GAAmDT,EAAAzH,cAAAkI,GAAsBC,WAAA,mBAA6BP,EAAA,WAAgB6B,IAAA,OAAArB,OAAkBH,MAAAR,EAAAvH,QAAkB0H,EAAA,gBAAqBE,YAAA,gBAAAM,OAAmCC,MAAA,OAAAqB,KAAA,UAAAC,gBAAA,EAAAC,QAA8DC,IAAA,GAAA/F,QAAA,YAAAgG,QAAA,WACxuEC,UAAA,SAAAzI,EAAAC,EAAAC,GAA6CiG,EAAApG,eAAAC,EAAAC,EAAAC,IAA0CsI,QAAA,SACvFE,UAAA,EAAAlG,QAAA,WAAAgG,SAAA,sBAAqElC,EAAA,YAAiBqC,aAAaT,MAAA,QAAepB,OAAQ8B,UAAA,GAAAL,IAAA,GAAAM,YAAA,kBAAuDlC,OAAQ1G,MAAAkG,EAAAvH,KAAA,QAAAsB,SAAA,SAAA0G,GAAkDT,EAAAqB,KAAArB,EAAAvH,KAAA,UAAAgI,IAAmCC,WAAA,mBAA4B,OAAAV,EAAAa,GAAA,KAAAV,EAAA,OAAgCqC,aAAaG,aAAA,SAAAC,OAAA,gBAA6CzC,EAAA,aAAkBQ,OAAO7I,KAAA,OAAAuG,KAAA,QAA4BiC,IAAKkB,MAAAxB,EAAArB,kBAA4BqB,EAAAa,GAAA,QAAAb,EAAAa,GAAA,KAAAV,EAAA,aAA6CQ,OAAOtC,KAAA,UAAAvG,KAAA,QAA+BwI,IAAKkB,MAAAxB,EAAAlB,eAAyBkB,EAAAa,GAAA,YAAAb,EAAAa,GAAA,KAAAV,EAAA,KAAyCE,YAAA,eAAAM,OAAkCkC,KAAA,YAAAhB,MAAA,UAAoCgB,KAAA,eAAkB,SAAA7C,EAAAa,GAAA,KAAAb,EAAA8C,GAAA9C,EAAA,sBAAAtC,GAAiE,OAAAyC,EAAA,MAAgBiB,IAAA1D,EAAA5C,GAAAuF,YAAA,kBAAA0C,OAAkDzJ,MAAA0G,EAAA5G,aAAAsE,EAAA5C,GAAAkF,EAAA1G,MAAA,MAAkD6G,EAAA,OAAYE,YAAA,iBAAAC,IAAiCkB,MAAA,SAAAP,GAAyBjB,EAAAnF,oBAAA6C,EAAA5C,QAAmCqF,EAAA,QAAaE,YAAA,uBAAiCL,EAAAa,GAAAb,EAAA4B,GAAAlE,EAAAhF,YAAAsH,EAAAa,GAAA,KAAAV,EAAA,QAAwDqC,aAAaQ,QAAA,kBAA0BhD,EAAAa,GAAA,IAAAb,EAAA4B,GAAAlE,EAAAwB,WAAA,SAAAc,EAAAa,GAAA,KAAAV,EAAA,OAAmEE,YAAA,kBAA4BF,EAAA,KAAUE,YAAA,eAAAC,IAA+BkB,MAAA,SAAAP,GAAyBjB,EAAAX,YAAA3B,EAAAhF,QAAAgF,EAAA5C,QAAwCkF,EAAAa,GAAA,KAAAV,EAAA,KAAsBE,YAAA,gBAAAC,IAAgCkB,MAAA,SAAAP,GAAyBjB,EAAAb,WAAAzB,EAAA5C,eAAgC,KAAAkF,EAAAa,GAAA,KAAAV,EAAA,OAA8B4C,MAAA,SAAA/C,EAAA3H,eAAA,qBAAwD,qBAAsB8H,EAAA,uBAAAH,EAAA3H,eAAA8H,EAAA,WAAiEE,YAAA,cAAwBF,EAAA,cAAmBQ,OAAOsC,KAAA,MAAA5E,KAAA,UAAAvG,KAAA,SAA6CwI,IAAKkB,MAAA,SAAAP,GAAyBjB,EAAAvC,YAAAuC,EAAAnD,IAAA,WAAoCmD,EAAAa,GAAA,UAAAb,EAAAa,GAAA,KAAAV,EAAA,cAAgDQ,OAAOsC,KAAA,MAAA5E,KAAA,UAAAvG,KAAA,SAA6CwI,IAAKkB,MAAAxB,EAAAtE,gBAA0BsE,EAAAa,GAAA,YAAAb,EAAAa,GAAA,KAAAV,EAAA,cAAkDQ,OAAOsC,KAAA,MAAA5E,KAAA,UAAAvG,KAAA,SAA6CwI,IAAKkB,MAAA,SAAAP,GAAyBjB,EAAA1D,iBAAA0D,EAAAnD,SAAgCmD,EAAAa,GAAA,YAAAb,EAAAa,GAAA,KAAAV,EAAA,cAAkDQ,OAAOsC,KAAA,QAAA5E,KAAA,QAAAvG,KAAA,SAA6CwI,IAAKkB,MAAA,SAAAP,GAAyBjB,EAAAhC,UAAAgC,EAAAnD,SAAyBmD,EAAAa,GAAA,eAAAV,EAAA,WAAsCE,YAAA,cAAwBF,EAAA,cAAmBQ,OAAOsC,KAAA,QAAA5E,KAAA,QAAAvG,KAAA,SAA6CwI,IAAKkB,MAAA,SAAAP,GAAyBjB,EAAA1B,WAAA0B,EAAAnD,SAA0BmD,EAAAa,GAAA,mBAAAb,EAAAa,GAAA,KAAAV,EAAA,YAAuD6B,IAAA,YAAAQ,aAA6BT,MAAA,OAAAmB,aAAA,SAAoCvC,OAAQvI,KAAA4H,EAAAzC,UAAA4F,OAAA,IAAiC7C,IAAK8C,mBAAApD,EAAAqD,cAAAC,YAAAtD,EAAAuD,aAAgEpD,EAAA,mBAAwBQ,OAAOtC,KAAA,YAAA0D,MAAA,KAAAyB,MAAA,UAAgDxD,EAAAa,GAAA,KAAAV,EAAA,mBAAoCQ,OAAOC,MAAA,OAAAmB,MAAA,KAAAE,KAAA,QAA0CwB,YAAAzD,EAAA0D,KAAsBtC,IAAA,UAAAuC,GAAA,SAAAC,GAAiC,OAAAzD,EAAA,OAAiBE,YAAA,aAAuBF,EAAA,OAAYQ,OAAOkD,IAAAD,EAAAE,IAAAC,WAAAC,IAAA,sBAAqDhE,EAAAa,GAAA,KAAAV,EAAA,mBAAoCQ,OAAOsB,KAAA,OAAArB,MAAA,OAAAqD,YAAA,OAA+CR,YAAAzD,EAAA0D,KAAsBtC,IAAA,UAAAuC,GAAA,SAAAC,GAAiC,OAAAzD,EAAA,OAAkB+D,UAAUC,UAAAnE,EAAA4B,GAAA5B,EAAAjF,cAAA6I,EAAAE,IAAAlM,cAA2DoI,EAAAa,GAAA,KAAAV,EAAA,OAAwBE,YAAA,oBAA8BL,EAAA8C,GAAA9C,EAAA/E,aAAA2I,EAAAE,IAAA/L,WAAA,SAAA2F,EAAA0G,GAAsE,OAAAjE,EAAA,QAAkBsB,aAAanH,KAAA,OAAAoH,QAAA,SAAA5H,MAAAsK,EAAA,GAAApE,EAAApH,YAAAgL,EAAAS,OAAA3D,WAAA,sCAA0HU,IAAAgD,EAAA/D,YAAA,mBAAAC,IAA+CkB,MAAA,SAAAP,GAAyBA,EAAAqD,kBAAyBtE,EAAAvC,YAAAmG,EAAAE,IAAAhJ,GAAA8I,EAAAE,IAAA/L,WAAA,OAAyDiI,EAAAa,GAAAb,EAAA4B,GAAAlE,QAAyBsC,EAAAa,GAAA,KAAAb,EAAA/E,aAAA2I,EAAAE,IAAA/L,WAAAoD,OAAA,GAAA6E,EAAApH,YAAAgL,EAAAS,OAAAlE,EAAA,QAA0GE,YAAA,kBAAAC,IAAkCkB,MAAA,SAAAP,GAAyBA,EAAAqD,kBAAyBtE,EAAApH,UAAAgL,EAAAS,WAA6BrE,EAAAa,GAAA,IAAAb,EAAA4B,GAAA5B,EAAA/E,aAAA2I,EAAAE,IAAA/L,WAAAoD,QAAA,SAAA6E,EAAAuE,KAAAvE,EAAAa,GAAA,KAAAV,EAAA,KAAwGE,YAAA,uBAAAC,IAAuCkB,MAAA,SAAAP,GAAyBA,EAAAqD,kBAAyBtE,EAAAvC,YAAAmG,EAAAE,IAAAhJ,GAAA8I,EAAAE,IAAA/L,WAAA,QAAyD,UAAWiI,EAAAa,GAAA,KAAAV,EAAA,mBAAoCQ,OAAOsB,KAAA,WAAArB,MAAA,OAAAqD,YAAA,OAAmDR,YAAAzD,EAAA0D,KAAsBtC,IAAA,UAAAuC,GAAA,SAAAC,GAAiC,OAAA5D,EAAAa,GAAAb,EAAA4B,GAAA5B,EAAAwE,QAAA,IAAAZ,EAAAE,IAAAW,wBAAuEzE,EAAAa,GAAA,KAAAV,EAAA,mBAAoCQ,OAAOC,MAAA,KAAAmB,MAAA,MAAAyB,MAAA,QAAAkB,MAAA,UAA4DjB,YAAAzD,EAAA0D,KAAsBtC,IAAA,UAAAuC,GAAA,SAAAC,GAAiC,OAAAzD,EAAA,UAAkB,SAAAH,EAAA3H,eAAA8H,EAAA,cAAmDsB,aAAanH,KAAA,OAAAoH,QAAA,SAAA5H,MAAA,mBAAA4G,WAAA,uBAAwFC,OAASsC,KAAA,OAAAnL,KAAA,QAAAuG,KAAA,QAA2CiC,IAAKkB,MAAA,SAAAP,GAAyBA,EAAAqD,kBAAyBtE,EAAA2E,YAAA,6BAA6C7J,GAAA8I,EAAAE,IAAAhJ,SAAoBkF,EAAAa,GAAA,UAAAV,EAAA,OAAAA,EAAA,cAA8CQ,OAAOsC,KAAA,OAAAnL,KAAA,QAAAuG,KAAA,QAA2CiC,IAAKkB,MAAA,SAAAP,GAAyBA,EAAAqD,kBAAyBtE,EAAA2E,YAAA,2BAA2C7J,GAAA8I,EAAAE,IAAAhJ,SAAoBkF,EAAAa,GAAA,YAAAb,EAAAa,GAAA,KAAAV,EAAA,cAAkDQ,OAAOsC,KAAA,OAAAnL,KAAA,QAAAuG,KAAA,QAA2CiC,IAAKkB,MAAA,SAAAP,GAAyBjB,EAAAxB,UAAAoF,EAAAE,IAAAhJ,QAA8BkF,EAAAa,GAAA,0BAAgC,WAAAb,EAAAa,GAAA,KAAAV,EAAA,kBAA+CQ,OAAOtD,MAAA2C,EAAA3C,OAAkBiD,IAAKsE,OAAA5E,EAAA6E,WAAsB7E,EAAAa,GAAA,KAAAV,EAAA,aAA8BQ,OAAOkB,MAAA,OAAAiD,OAAA,GAAAC,QAAA/E,EAAA1H,YAAAyJ,MAAA,QAAAiD,IAAA,QAAkF1E,IAAK2E,iBAAA,SAAAhE,GAAkCjB,EAAA1H,YAAA2I,MAAyBd,EAAA,OAAYE,YAAA,mBAA6BL,EAAAa,GAAA,qBAAAV,EAAA,eAAgDQ,OAAOhI,WAAAqH,EAAArH,eAA6B,KAAAqH,EAAAa,GAAA,KAAAV,EAAA,aAAoCQ,OAAOkB,MAAA,OAAAiD,OAAA,GAAAC,QAAA/E,EAAAxH,eAAAuJ,MAAA,QAAAiD,IAAA,QAAqF1E,IAAK2E,iBAAA,SAAAhE,GAAkCjB,EAAAxH,eAAAyI,MAA4Bd,EAAA,OAAYE,YAAA,eAAyBF,EAAA,qBAA0BK,OAAO1G,MAAAkG,EAAA,YAAAjG,SAAA,SAAA0G,GAAiDT,EAAA9G,YAAAuH,GAAoBC,WAAA,gBAA2BV,EAAA8C,GAAA9C,EAAA,sBAAAtC,GAA0C,OAAAyC,EAAA,eAAyBiB,IAAA1D,EAAA5C,GAAA6F,OAAmBC,MAAAlD,EAAA5C,MAAiBkF,EAAAa,GAAAb,EAAA4B,GAAAlE,EAAAhF,cAAiC,OAAAsH,EAAAa,GAAA,KAAAV,EAAA,OAA+BE,YAAA,gBAAAM,OAAmCkC,KAAA,UAAgBA,KAAA,WAAe1C,EAAA,aAAkBQ,OAAOtC,KAAA,UAAAvG,KAAA,QAA+BwI,IAAKkB,MAAAxB,EAAApC,YAAsBoC,EAAAa,GAAA,QAAAb,EAAAa,GAAA,KAAAV,EAAA,aAA6CQ,OAAOtC,KAAA,OAAAvG,KAAA,QAA4BwI,IAAKkB,MAAA,SAAAP,GAAyBjB,EAAAxH,gBAAA,MAA2BwH,EAAAa,GAAA,mBAE52MqE,oBCDjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpN,EACA6H,GATF,EAVA,SAAAwF,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/149.8ba6fa7668e4b189d60f.js","sourcesContent":[" <!--品牌列表-->\n<template>\n  <div class=\"cms-list-layout\">\n    <el-tabs v-model=\"nameListActive\" @tab-click=\"tabsClick\">\n      <el-tab-pane label=\"粉丝列表\" name=\"fans\"></el-tab-pane>\n      <el-tab-pane label=\"黑名单\" name=\"black\"></el-tab-pane>\n    </el-tabs>\n    <cms-prompt collapse=\"true\">\n      <li>初始绑定公众号，需要进行同步微信粉丝数据</li>\n      <li>可对当前公众下所有粉丝及标签进行管理</li>\n    </cms-prompt>\n    <!-- 筛选区 -->\n    <section class=\"cms-list-query\">\n      <div class=\"query-group\">\n        <label>粉丝昵称</label>\n        <el-input v-model.trim=\"queryParams.nickname\" @keyup.native.enter=\"encodeQuery\"></el-input>\n      </div>\n      <div class=\"query-group\">\n        <cms-button size=\"small\" :colorPicker=\"true\" @click=\"encodeQuery\">查询</cms-button>\n      </div>\n    </section>\n    <div v-loading=\"loading\" class=\"fans__body\">\n      <!--用户标签-->\n      <cms-sticky fixClass=\"tag__warpper--fixed\" v-show=\"nameListActive === 'fans'\" >\n        <dl class=\"fans-tag__warpper\">\n          <dt class=\"fans-tag__header\">\n            <span class=\"fl\" @click=\"getTableDataByTagId('')\">全部用户({{fansTotal}})</span>\n            <span class=\"fr\">\n              <i class=\"el-icon-refresh\" title=\"同步粉丝标签\" @click=\"syncfansTags\"></i>\n              &nbsp;\n              <el-popover placement=\"bottom\" width=\"240\" v-model=\"addTagVisible\">\n                <el-form ref=\"form\" :model=\"form\">\n                  <el-form-item\n                    class=\"error__inline\"\n                    label=\"粉丝标签\"\n                    prop=\"tagName\"\n                    :show-message=\"true\"\n                    :rules=\"[{max:10,message:'最大限制10个字符', trigger: 'change'},\n                    { validator: (rule, value, callback)=>{validateRepeat(rule, value, callback)},  trigger:'blur' },\n                    {required: true, message: '标签名称不能为空', trigger:  ['blur', 'change']}]\"\n                  >\n                    <el-input\n                      autofocus\n                      style=\"width:100%;\"\n                      :max=\"10\"\n                      v-model=\"form.tagName\"\n                      placeholder=\"输入标签名称,最多10个字符\"\n                    ></el-input>\n                  </el-form-item>\n                </el-form>\n                <div style=\"text-align:center; margin:12px 0 0 0\">\n                  <el-button size=\"mini\" type=\"info\" @click=\"cancelFansTags\">取消</el-button>\n                  <el-button type=\"primary\" size=\"mini\" @click=\"addFansTags\">确定</el-button>\n                </div>\n                <i class=\"el-icon-plus\" title=\"新增粉丝标签\" slot=\"reference\"></i>\n              </el-popover>\n            </span>\n          </dt>\n          <dd\n            class=\"fans-tag__items\"\n            v-for=\"item in fansTagItems\"\n            :key=\"item.id\"\n            :style=\"{color:activeTagId==item.id ? color : ''}\"\n          >\n          <div class=\"fans-tag__text\"   @click=\"getTableDataByTagId(item.id)\">\n              <span class=\"fans-tag__overflow\">{{item.tagName}}</span>\n            <span style=\"display:inline-block;\">({{item.userCount}})</span>\n          </div>\n          <div class=\"fans-tag__opt\">\n            <i class=\"el-icon-edit\" @click=\"editFansTag(item.tagName,item.id)\"></i>\n            <i class=\"el-icon-close\" @click=\"delFansTag(item.id)\"></i>\n          </div>\n          </dd>\n        </dl>\n      </cms-sticky>\n      <div :style=\"nameListActive === 'fans'?'margin-left:220px;':'margin-left:0px;'\">\n        <!-- 操作区 -->\n        <cms-sticky>\n          <section class=\"cms-batch\" v-if=\"nameListActive === 'fans'\">\n            <cms-button\n              icon=\"add\"\n              type=\"success\"\n              size=\"small\"\n              @click=\"setFansTags(ids,'',false)\"\n            >设置标签</cms-button>\n            <cms-button icon=\"add\" type=\"success\" size=\"small\" @click=\"syncFansList\">同步所有粉丝</cms-button>\n            <cms-button icon=\"add\" type=\"success\" size=\"small\" @click=\"syncFansListById(ids)\">同步选中粉丝</cms-button>\n            <cms-button icon=\"error\" type=\"error\" size=\"small\" @click=\"blackFans(ids)\">加入黑名单</cms-button>\n          </section>\n          <section class=\"cms-batch\" v-else>\n            <cms-button icon=\"error\" type=\"error\" size=\"small\" @click=\"returnFans(ids)\">批量移出黑名单</cms-button>\n          </section>\n        </cms-sticky>\n        <el-table\n          :data=\"tableData\"\n          style=\"width: 100%;min-height:500px\"\n          stripe\n          @selection-change=\"getCheckItems\"\n          @row-click=\"checkRows\"\n          ref=\"dataTable\"\n        >\n          <el-table-column type=\"selection\" width=\"46\" fixed=\"left\"></el-table-column>\n          <el-table-column label=\"粉丝头像\" width=\"90\" prop=\"logo\">\n            <div slot-scope=\"scope\" class=\"fans-img\">\n              <img :src=\"scope.row.headimgurl\" alt=\"nickname\">\n            </div>\n          </el-table-column>\n          <el-table-column prop=\"name\" label=\"粉丝昵称\" min-width=\"160\">\n            <template slot-scope=\"scope\">\n              <div v-html=\"showEmojiName(scope.row.nickname)\"></div>\n              <div class=\"table-tag__body\">\n                <span\n                  class=\"table-tag__label\"\n                  @click.stop=\"setFansTags(scope.row.id,scope.row.tagidList,true)\"\n                  v-show=\"index<5||selfIndex===scope.$index\"\n                  v-for=\"(item,index) in showTagNames(scope.row.tagidList)\"\n                  :key=\"index\"\n                >{{item}}</span>\n                <span\n                  class=\"table-tag__more\"\n                  v-if=\"showTagNames(scope.row.tagidList).length>5 && selfIndex!==scope.$index\"\n                  @click.stop=\"selfIndex=scope.$index\"\n                >共{{showTagNames(scope.row.tagidList).length}}个标签</span>\n                <i\n                  @click.stop=\"setFansTags(scope.row.id,scope.row.tagidList,true)\"\n                  class=\"el-icon-caret-bottom\"\n                ></i>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"initials\" label=\"关注时间\" min-width=\"120\">\n            <template slot-scope=\"scope\">{{$moment(scope.row.subscribeTime*1000)}}</template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"310\" fixed=\"right\" align=\"center\">\n            <div slot-scope=\"scope\">\n              <cms-button\n              v-if=\"nameListActive === 'fans'\"\n                v-prem=\"'/wechatFans/send'\"\n                icon=\"edit\"\n                size=\"small\"\n                type=\"info\"\n                @click.stop=\"$routerLink('/wechatFans/send','update',{id:scope.row.id})\"\n              >发送消息</cms-button>\n              <div v-else>\n                <cms-button\n                  icon=\"edit\"\n                  size=\"small\"\n                  type=\"info\"\n                  @click.stop=\"$routerLink('/wechatFans/view','view',{id:scope.row.id})\"\n                >查看历史消息</cms-button>\n                <cms-button\n                  icon=\"edit\"\n                  size=\"small\"\n                  type=\"info\"\n                  @click=\"returnFan(scope.row.id)\"\n                >移出黑名单</cms-button>\n              </div>\n            </div>\n          </el-table-column>\n        </el-table>\n      </div>\n    </div>\n    <cms-pagination @change=\"getPage\" :total=\"total\"></cms-pagination>\n    <!-- 粉丝同步进度提示 -->\n    <el-dialog title=\"同步进度\" center :visible.sync=\"fansVisible\" width=\"600px\" top=\"30vh\">\n      <div class=\"progress__body\">正在同步粉丝列表:\n        <el-progress :percentage=\"percentage\"></el-progress>\n      </div>\n    </el-dialog>\n    <!-- 粉丝标签设置 -->\n    <el-dialog title=\"设置标签\" center :visible.sync=\"setTagsVisible\" width=\"600px\" top=\"20vh\">\n      <div class=\"tags__body\">\n        <el-checkbox-group v-model=\"checkedTags\">\n          <el-checkbox :label=\"item.id\" v-for=\"item in fansTagItems\" :key=\"item.id\">{{item.tagName}}</el-checkbox>\n        </el-checkbox-group>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"saveTags\">确定</el-button>\n        <el-button type=\"info\" size=\"mini\" @click=\"setTagsVisible=false\">取消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport list from '@/mixins/list'\nimport { encodeUnicode, decodeUnicode, emojiString } from './emoji.js'\nimport {\n  weChatFansPage,\n  weChatFansSync,\n  weChatFansTags,\n  wechatfansSyncTags,\n  saveWechatfansTag,\n  deleteWechatfansTag,\n  editWechatfansTag,\n  setWechatfans,\n  setWechatfansBlack,\n  weChatFansSyncById,\n  setWechatfansCancelBlack\n} from '@/api/wechat/index.js'\nvar defaultData = {\n  nickname: '',\n  page: 1,\n  size: 10,\n  tagidList: '',\n  black: false\n}\nexport default {\n  mixins: [list],\n  data() {\n    return {\n      nameListActive: 'fans', // tab切换，默认粉丝列表\n      fansVisible: false,\n      addTagVisible: false,\n      setTagsVisible: false, // 设置标签弹窗\n      form: {\n        tagName: ''\n      },\n      percentage: 0,\n      selfIndex: -1,\n      timer: null,\n      queryParams: Object.assign({}, defaultData),\n      fansTagItems: [],\n      fansTotal: 0,\n      checkedTags: [], // 选中的标签ids\n      checkedIds: [], // 选中的id\n      activeTagId: '' // 选中的标签id\n    }\n  },\n  computed: {\n    color() {\n      return this.$store.state.system.color\n    }\n  },\n  methods: {\n    validateRepeat(rule, value, callback) { // 验证当前标签名是否存在\n      this.fansTagItems.forEach(v => {\n        if (v.tagName === value) {\n          callback(new Error('该标签名已存在，请重新输入'))\n        }\n      })\n    },\n    tabsClick(tab, e) { // 切换当前列表是否黑名单\n      if (tab.name === 'black') {\n        this.queryParams.black = true\n        this.queryParams.tagidList = ''\n      } else {\n        this.queryParams.black = false\n      }\n      this.encodeQuery()\n    },\n    encodeQuery() { // 获取粉丝列表\n      const params = {\n        page: 1,\n        size: this.queryParams.size,\n        nickname: this.queryParams.nickname === '' ? '' : encodeUnicode(this.queryParams.nickname),\n        black: this.queryParams.black\n      }\n      this.getTableData(weChatFansPage, params)\n    },\n    getTableDataByTagId(id) {\n      // 通过标签查询粉丝\n      const params = {\n        page: 1,\n        size: 10,\n        nickname: '',\n        tagidList: id\n      }\n      this.queryParams.nickname = ''\n      this.activeTagId = id\n      this.getTableData(weChatFansPage, params)\n    },\n    showEmojiName(str) {\n      // 处理显示emoji昵称\n      let name = decodeUnicode(str)\n      name = emojiString(name)\n      return name\n    },\n    showTagNames(tagList) {\n      if (this.fansTagItems.length === 0) {\n        return '[]'\n      } else {\n        if (tagList === '') {\n          return ['无标签']\n        } else {\n          const tagsIds = this.$cms.arrayToNumber(tagList)\n          const name = []\n          for (let i = 0; i < tagsIds.length; i++) {\n            for (let j = 0; j < this.fansTagItems.length; j++) {\n              if (tagsIds[i] === this.fansTagItems[j].id) {\n                name.push(this.fansTagItems[j].tagName)\n                break\n              }\n            }\n          }\n          return name\n        }\n      }\n    },\n    syncFansList() {\n      // 同步粉丝列表\n      this.fansVisible = true\n      clearInterval(this.timer)\n      this.timer = null\n      this.timer = setInterval(this.setPercentage, 1000)\n      weChatFansSync().then(res => {\n        clearInterval(this.timer)\n        if (res.code === 200) {\n          this.percentage = 100\n          setTimeout(() => {\n            this.$successMessage('同步成功')\n            this.getTableData(weChatFansPage, this.queryParams)\n            this.fansVisible = false\n            this.percentage = 0\n          }, 1000)\n        } else {\n          this.$errorMessage(res.message)\n          this.fansVisible = false\n        }\n      })\n    },\n    syncFansListById() {\n      // 同步单个粉丝列表\n      if (this.batchStatus) {\n        const loading = this.$loading({\n          target: '.fans__body',\n          text: '正在同步,请稍候..'\n        })\n        weChatFansSyncById({ ids: this.ids })\n          .then(res => {\n            loading.close()\n            if (res.code === 200) {\n              this.$successMessage('同步成功!')\n              this.getTableData(weChatFansPage, this.queryParams)\n            } else {\n              loading.close()\n              this.$errorMessage(res.message)\n            }\n          })\n          .catch(e => {\n            loading.close()\n          })\n      } else {\n        this.$errorMessage('至少选择一个用户')\n      }\n    },\n    syncfansTags() {\n      // 同步粉丝标签\n      wechatfansSyncTags().then(res => {\n        const loading = this.$loading({\n          target: '.fans__body',\n          text: '正在同步'\n        })\n        if (res.code === 200) {\n          weChatFansTags().then(res1 => {\n            this.fansTagItems = res1.data.tagList\n            this.fansTotal = res1.data.fansSize\n            weChatFansPage(this.queryParams).then(res2 => {\n              loading.close()\n              this.total = res2.data.totalElements\n              this.tableData = res2.data.content\n              this.$successMessage('同步成功')\n            })\n          })\n        } else {\n          loading.close()\n          this.$errorMessage(res.message)\n        }\n      })\n    },\n    setPercentage() {\n      if (this.percentage === 99) {\n        this.percentage = 99\n      } else {\n        this.percentage = this.percentage + 1\n      }\n    },\n    setFansTags(ids, item, status) {\n      // 设置粉丝标签\n      if (status) {\n        this.checkedTags = this.$cms.arrayToNumber(item)\n        this.checkedIds = [ids]\n        this.setTagsVisible = true\n      } else {\n        if (this.batchStatus) {\n          this.checkedIds = this.ids\n          this.checkedTags = []\n          this.setTagsVisible = true\n        } else {\n          this.$errorMessage('至少选择一条数据')\n        }\n      }\n    },\n    saveTags() {\n      // 保存粉丝标签设置\n      setWechatfans({\n        ids: this.checkedIds,\n        tagid: this.checkedTags\n      }).then(res => {\n        this.setTagsVisible = false\n        if (res.code === 200) {\n          this.$successMessage('设置成功')\n          this.getFansTags()\n          this.encodeQuery()\n        } else {\n          this.$errorMessage(res.message)\n        }\n      })\n    },\n    blackFans(ids) { // 拉黑粉丝\n      if (this.batchStatus) {\n        this.$confirm('加入黑名单后，你将无法接收该用户发来的消息，且该用户无法接收公众号发出的消息，无法参与留言和赞赏，确认加入黑名单?', '确认提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          setWechatfansBlack({ ids: ids }).then(res => {\n            if (res.code === 200) {\n              this.$successMessage('操作成功')\n              this.encodeQuery()\n            } else {\n              this.$errorMessage(res.message)\n            }\n          })\n        })\n      } else {\n        this.$errorMessage('至少选择一位粉丝')\n      }\n    },\n    returnFans(ids) { // 移出黑名单\n      if (ids.length > 0) {\n        setWechatfansCancelBlack({ ids: ids }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('操作成功')\n            this.encodeQuery()\n          } else {\n            this.$errorMessage(res.message)\n          }\n        })\n      } else {\n        this.$errorMessage('至少选择一位粉丝')\n      }\n    },\n    returnFan(id) { // 移出黑名单-单个\n      setWechatfansCancelBlack({ ids: [id] }).then(res => {\n        if (res.code === 200) {\n          this.$successMessage('操作成功')\n          this.encodeQuery()\n        } else {\n          this.$errorMessage(res.message)\n        }\n      })\n    },\n    getFansTags() {\n      // 获取粉丝标签\n      weChatFansTags().then(res => {\n        this.fansTagItems = res.data.tagList\n        this.fansTotal = res.data.fansSize\n        this.encodeQuery()\n      })\n    },\n    cancelFansTags() {\n      // 清除验证\n      this.$refs['form'].resetFields()\n      this.addTagVisible = false\n    },\n    addFansTags() {\n      // 新增粉丝标签\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          saveWechatfansTag({ tagName: this.form.tagName }).then(res => {\n            if (res.code === 200) {\n              this.fansTagItems.push({\n                id: res.data.id,\n                tagName: res.data.tagName,\n                userCount: res.data.userCount\n              })\n            } else {\n              this.$errorMessage('新增失败')\n            }\n            this.cancelFansTags()\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    delFansTag(id) {\n      this.$confirm('是否确认删除粉丝标签?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const loading = this.$loading({\n          target: '.fans__body',\n          text: '正在删除...'\n        })\n        deleteWechatfansTag({ tagid: id }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('删除成功')\n            this.getFansTags()\n          } else { this.$errorMessage(res.message) }\n          loading.close()\n        }).catch(e => {\n          loading.close()\n        })\n      }).catch(() => {\n        return false\n      })\n    },\n    editFansTag(val, id) {\n      this.$prompt('', '粉丝标签修改', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        inputValue: val,\n        inputValidator: (text) => {\n          if (text === '') {\n            return '必须输入一个名字'\n          } else {\n            if (text.length > 10) {\n              return '标签名字不能超过10个字符'\n            } else {\n              return true\n            }\n          }\n        }\n      }).then(({ value }) => {\n        const loading = this.$loading({\n          target: '.fans__body',\n          text: '正在操作'\n        })\n        editWechatfansTag({ tagid: id, tagname: value }).then(res => {\n          if (res.code === 200) {\n            this.$successMessage('修改成功')\n            this.getFansTags()\n          } else { this.$errorMessage(res.message) }\n          loading.close()\n        }).catch(e => {\n          loading.close()\n        })\n      }).catch(() => {\n        return false\n      })\n    }\n  },\n  created() {\n    // 首次触发\n    this.getFansTags() // 要先获取粉丝标签，再去获取粉丝列表\n  }\n}\n</script>\n<style lang='scss'>\n.progress__body {\n  height: 100px;\n  padding: 20px;\n}\n.fans__body {\n  width: 100%;\n  position: relative;\n  min-height: 500px;\n}\n.fans-tag {\n  &__warpper {\n    width: 220px;\n    float: left;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    left: 0;\n    border: 1px solid #f0f0f0;\n    cursor: pointer;\n  }\n  &__header {\n    height: 40px;\n    line-height: 40px;\n    box-sizing: border-box;\n    padding: 0 12px;\n    background: #f7f7f7;\n    font-size: 14px;\n    border-bottom: 1px solid #f0f0f0;\n  }\n  &__items {\n    height: 32px;\n    line-height: 32px;\n    width: 100%;\n    overflow: hidden;\n    font-size: 14px;\n    padding: 0 10px;\n    &:hover {\n      background: #f7f7f7;\n      .fans-tag__opt{\n        display: block;\n      }\n    }\n  }\n  &__text{\n    float: left;\n    width:150px;\n  }\n   &__opt{\n    float: right;\n    display: none\n  }\n  &__overflow {\n    float: left;\n    max-width: 125px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n\n\n.tags {\n  &__body {\n    height: 250px;\n    overflow: auto;\n    .el-checkbox {\n      display: inline-block;\n      width: 115px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      word-wrap: normal;\n      vertical-align: top;\n      margin-right: 20px;\n      margin-bottom: 10px;\n    }\n    .el-checkbox + .el-checkbox {\n      margin-left: 0;\n    }\n  }\n}\n\n.table-tag {\n  &__label {\n    display: inline-block;\n    vertical-align: middle;\n    padding: 1px 0.7em;\n    font-size: 14px;\n    line-height: 1.3;\n    color: #8d8d8d;\n    border: 1px solid #9e9e9e;\n    background-color: #fff;\n    overflow: hidden;\n    border-radius: 30px;\n    margin-right: 5px;\n  }\n  &__more {\n    cursor: pointer;\n    font-size: 14px;\n    color: #8d8d8d;\n  }\n}\n.el-icon-caret-bottom {\n  color: #8d8d8d;\n  cursor: pointer;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/wechat/public/fans/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cms-list-layout\"},[_c('el-tabs',{on:{\"tab-click\":_vm.tabsClick},model:{value:(_vm.nameListActive),callback:function ($$v) {_vm.nameListActive=$$v},expression:\"nameListActive\"}},[_c('el-tab-pane',{attrs:{\"label\":\"粉丝列表\",\"name\":\"fans\"}}),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"黑名单\",\"name\":\"black\"}})],1),_vm._v(\" \"),_c('cms-prompt',{attrs:{\"collapse\":\"true\"}},[_c('li',[_vm._v(\"初始绑定公众号，需要进行同步微信粉丝数据\")]),_vm._v(\" \"),_c('li',[_vm._v(\"可对当前公众下所有粉丝及标签进行管理\")])]),_vm._v(\" \"),_c('section',{staticClass:\"cms-list-query\"},[_c('div',{staticClass:\"query-group\"},[_c('label',[_vm._v(\"粉丝昵称\")]),_vm._v(\" \"),_c('el-input',{nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.encodeQuery($event)}},model:{value:(_vm.queryParams.nickname),callback:function ($$v) {_vm.$set(_vm.queryParams, \"nickname\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"queryParams.nickname\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"query-group\"},[_c('cms-button',{attrs:{\"size\":\"small\",\"colorPicker\":true},on:{\"click\":_vm.encodeQuery}},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"fans__body\"},[_c('cms-sticky',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.nameListActive === 'fans'),expression:\"nameListActive === 'fans'\"}],attrs:{\"fixClass\":\"tag__warpper--fixed\"}},[_c('dl',{staticClass:\"fans-tag__warpper\"},[_c('dt',{staticClass:\"fans-tag__header\"},[_c('span',{staticClass:\"fl\",on:{\"click\":function($event){_vm.getTableDataByTagId('')}}},[_vm._v(\"全部用户(\"+_vm._s(_vm.fansTotal)+\")\")]),_vm._v(\" \"),_c('span',{staticClass:\"fr\"},[_c('i',{staticClass:\"el-icon-refresh\",attrs:{\"title\":\"同步粉丝标签\"},on:{\"click\":_vm.syncfansTags}}),_vm._v(\"\\n             \\n            \"),_c('el-popover',{attrs:{\"placement\":\"bottom\",\"width\":\"240\"},model:{value:(_vm.addTagVisible),callback:function ($$v) {_vm.addTagVisible=$$v},expression:\"addTagVisible\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',{staticClass:\"error__inline\",attrs:{\"label\":\"粉丝标签\",\"prop\":\"tagName\",\"show-message\":true,\"rules\":[{max:10,message:'最大限制10个字符', trigger: 'change'},\n                  { validator: function (rule, value, callback){_vm.validateRepeat(rule, value, callback)},  trigger:'blur' },\n                  {required: true, message: '标签名称不能为空', trigger:  ['blur', 'change']}]}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"autofocus\":\"\",\"max\":10,\"placeholder\":\"输入标签名称,最多10个字符\"},model:{value:(_vm.form.tagName),callback:function ($$v) {_vm.$set(_vm.form, \"tagName\", $$v)},expression:\"form.tagName\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"center\",\"margin\":\"12px 0 0 0\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":_vm.cancelFansTags}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.addFansTags}},[_vm._v(\"确定\")])],1),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"reference\",\"title\":\"新增粉丝标签\"},slot:\"reference\"})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.fansTagItems),function(item){return _c('dd',{key:item.id,staticClass:\"fans-tag__items\",style:({color:_vm.activeTagId==item.id ? _vm.color : ''})},[_c('div',{staticClass:\"fans-tag__text\",on:{\"click\":function($event){_vm.getTableDataByTagId(item.id)}}},[_c('span',{staticClass:\"fans-tag__overflow\"},[_vm._v(_vm._s(item.tagName))]),_vm._v(\" \"),_c('span',{staticStyle:{\"display\":\"inline-block\"}},[_vm._v(\"(\"+_vm._s(item.userCount)+\")\")])]),_vm._v(\" \"),_c('div',{staticClass:\"fans-tag__opt\"},[_c('i',{staticClass:\"el-icon-edit\",on:{\"click\":function($event){_vm.editFansTag(item.tagName,item.id)}}}),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){_vm.delFansTag(item.id)}}})])])})],2)]),_vm._v(\" \"),_c('div',{style:(_vm.nameListActive === 'fans'?'margin-left:220px;':'margin-left:0px;')},[_c('cms-sticky',[(_vm.nameListActive === 'fans')?_c('section',{staticClass:\"cms-batch\"},[_c('cms-button',{attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.setFansTags(_vm.ids,'',false)}}},[_vm._v(\"设置标签\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":_vm.syncFansList}},[_vm._v(\"同步所有粉丝\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.syncFansListById(_vm.ids)}}},[_vm._v(\"同步选中粉丝\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"icon\":\"error\",\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){_vm.blackFans(_vm.ids)}}},[_vm._v(\"加入黑名单\")])],1):_c('section',{staticClass:\"cms-batch\"},[_c('cms-button',{attrs:{\"icon\":\"error\",\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){_vm.returnFans(_vm.ids)}}},[_vm._v(\"批量移出黑名单\")])],1)]),_vm._v(\" \"),_c('el-table',{ref:\"dataTable\",staticStyle:{\"width\":\"100%\",\"min-height\":\"500px\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"selection-change\":_vm.getCheckItems,\"row-click\":_vm.checkRows}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"46\",\"fixed\":\"left\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"粉丝头像\",\"width\":\"90\",\"prop\":\"logo\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{staticClass:\"fans-img\"},[_c('img',{attrs:{\"src\":scope.row.headimgurl,\"alt\":\"nickname\"}})])}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"粉丝昵称\",\"min-width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.showEmojiName(scope.row.nickname))}}),_vm._v(\" \"),_c('div',{staticClass:\"table-tag__body\"},[_vm._l((_vm.showTagNames(scope.row.tagidList)),function(item,index){return _c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(index<5||_vm.selfIndex===scope.$index),expression:\"index<5||selfIndex===scope.$index\"}],key:index,staticClass:\"table-tag__label\",on:{\"click\":function($event){$event.stopPropagation();_vm.setFansTags(scope.row.id,scope.row.tagidList,true)}}},[_vm._v(_vm._s(item))])}),_vm._v(\" \"),(_vm.showTagNames(scope.row.tagidList).length>5 && _vm.selfIndex!==scope.$index)?_c('span',{staticClass:\"table-tag__more\",on:{\"click\":function($event){$event.stopPropagation();_vm.selfIndex=scope.$index}}},[_vm._v(\"共\"+_vm._s(_vm.showTagNames(scope.row.tagidList).length)+\"个标签\")]):_vm._e(),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-caret-bottom\",on:{\"click\":function($event){$event.stopPropagation();_vm.setFansTags(scope.row.id,scope.row.tagidList,true)}}})],2)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"initials\",\"label\":\"关注时间\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm.$moment(scope.row.subscribeTime*1000)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"310\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[(_vm.nameListActive === 'fans')?_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/wechatFans/send'),expression:\"'/wechatFans/send'\"}],attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.$routerLink('/wechatFans/send','update',{id:scope.row.id})}}},[_vm._v(\"发送消息\")]):_c('div',[_c('cms-button',{attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.$routerLink('/wechatFans/view','view',{id:scope.row.id})}}},[_vm._v(\"查看历史消息\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.returnFan(scope.row.id)}}},[_vm._v(\"移出黑名单\")])],1)],1)}}])})],1)],1)],1),_vm._v(\" \"),_c('cms-pagination',{attrs:{\"total\":_vm.total},on:{\"change\":_vm.getPage}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"同步进度\",\"center\":\"\",\"visible\":_vm.fansVisible,\"width\":\"600px\",\"top\":\"30vh\"},on:{\"update:visible\":function($event){_vm.fansVisible=$event}}},[_c('div',{staticClass:\"progress__body\"},[_vm._v(\"正在同步粉丝列表:\\n      \"),_c('el-progress',{attrs:{\"percentage\":_vm.percentage}})],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"设置标签\",\"center\":\"\",\"visible\":_vm.setTagsVisible,\"width\":\"600px\",\"top\":\"20vh\"},on:{\"update:visible\":function($event){_vm.setTagsVisible=$event}}},[_c('div',{staticClass:\"tags__body\"},[_c('el-checkbox-group',{model:{value:(_vm.checkedTags),callback:function ($$v) {_vm.checkedTags=$$v},expression:\"checkedTags\"}},_vm._l((_vm.fansTagItems),function(item){return _c('el-checkbox',{key:item.id,attrs:{\"label\":item.id}},[_vm._v(_vm._s(item.tagName))])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.saveTags}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.setTagsVisible=false}}},[_vm._v(\"取消\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4af0e33e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/wechat/public/fans/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4af0e33e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4af0e33e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/wechat/public/fans/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
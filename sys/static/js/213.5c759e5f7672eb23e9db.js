webpackJsonp([213],{"/Akv":function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=r("aA9S"),s=r.n(t),o=r("x1ym"),l=r("lcoF"),m=r("NDfU"),u={name:"",isSaleAttr:!1,required:!1,custom:!1,valueType:2,sortNum:10,typeId:0,attrType:1,attrGroupName:"",remark:"",attrValues:""},i={mixins:[l.a],data:function(){return{status:!0,formData:s()({},u),saveRules:{name:[o.a.required("商品类型名称"),o.a.len(1,150)],typeId:[o.a.required("必须选择商品类型")],isSaleAttr:[o.a.required("此项必填")],custom:[o.a.required("此项必填")],valueType:[o.a.required("此项必填")],sortNum:[o.a.required("此项必填"),o.a.number()],required:[o.a.required("此项必填")]},productTypes:[],groupNames:[]}},methods:{tabSale:function(e){(e&&3===this.formData.valueType||1===this.formData.valueType)&&(this.formData.valueType=2)},getProductTypes:function(){var e=this;Object(m.i)().then(function(a){e.productTypes=a.data,e.setGroupNames()})},setGroupNames:function(e){var a=this,r=this.productTypes.filter(function(e){return e.id===a.formData.typeId});this.groupNames=r[0].groupName.split(",")},save:function(e){var a=this,r={typeAttr:this.$cms.deepCopy(this.formData),attrValues:this.formData.attrValues};this.saveForm(m.d,r,e,"/productType/standard/list","list",{id:this.$route.query.typeId,name:this.$route.query.typeName}).then(function(e){a.formData.typeId=parseInt(a.$route.query.typeId)})}},created:function(){"save"===this.$route.query.type&&(this.formData=s()({},u),this.formData.typeId=parseInt(this.$route.query.typeId),this.getProductTypes(),this.destroyed())}},n={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("cms-breadcrumb",{attrs:{to:"/productType/standard/list",type:"list",params:{id:e.$route.query.typeId,name:e.$route.query.typeName}},on:{click:e.rest}},[r("li",[e._v(e._s(e.$route.name))])]),e._v(" "),r("div",{staticClass:"cms-form-layout"},[r("cms-prompt",{attrs:{collapse:"true"}},[r("li",[e._v("带 * 为必填项")])]),e._v(" "),r("el-form",{ref:"form",attrs:{rules:e.saveRules,model:e.formData,"label-width":"210px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"商品类型:",prop:"typeId",error:e.errorMessage.typeId}},[e._v("\n        "+e._s(e.$route.query.typeName)+"\n      ")]),e._v(" "),r("el-form-item",{attrs:{label:"属性名称:",prop:"name",error:e.errorMessage.name}},[r("el-input",{model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"属性分组:",prop:"attrGroupName",error:e.errorMessage.attrGroupName}},[r("el-select",{model:{value:e.formData.attrGroupName,callback:function(a){e.$set(e.formData,"attrGroupName",a)},expression:"formData.attrGroupName"}},e._l(e.groupNames,function(e,a){return r("el-option",{key:a,attrs:{label:e,value:e}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否为销售属性:",prop:"isSaleAttr",error:e.errorMessage.isSaleAttr}},[r("cms-switch",{on:{change:e.tabSale},model:{value:e.formData.isSaleAttr,callback:function(a){e.$set(e.formData,"isSaleAttr",a)},expression:"formData.isSaleAttr"}}),e._v(" "),r("div",{staticClass:"gray"},[e._v("选择作为销售属性，将成为构成商品SKU信息元素，不作为商品规格参数展示在商品详情内")])],1),e._v(" "),r("el-form-item",{attrs:{label:"是否必填:",prop:"required",error:e.errorMessage.required}},[r("cms-switch",{model:{value:e.formData.required,callback:function(a){e.$set(e.formData,"required",a)},expression:"formData.required"}}),e._v(" "),r("div",{staticClass:"gray"},[e._v("选择是，商品保存时必须要填写相应的属性值，非销售属性推荐非必填")])],1),e._v(" "),r("el-form-item",{attrs:{label:"属性值是否开启自定义:",prop:"custom",error:e.errorMessage.custom}},[r("cms-switch",{model:{value:e.formData.custom,callback:function(a){e.$set(e.formData,"custom",a)},expression:"formData.custom"}}),e._v(" "),r("div",{staticClass:"gray"},[e._v("选择是，允许商家在不满足个性化需求时可自定义添加选项")])],1),e._v(" "),r("el-form-item",{attrs:{label:"属性值类型:",prop:"valueType",error:e.errorMessage.valueType}},[r("el-radio-group",{model:{value:e.formData.valueType,callback:function(a){e.$set(e.formData,"valueType",a)},expression:"formData.valueType"}},[r("el-radio",{attrs:{label:2}},[e._v("单选")]),e._v(" "),e.formData.isSaleAttr?e._e():r("el-radio",{attrs:{label:1}},[e._v("文本 ")]),e._v(" "),e.formData.isSaleAttr?e._e():r("el-radio",{attrs:{label:3}},[e._v("多选")]),e._v(" "),e.formData.isSaleAttr?r("el-radio",{attrs:{label:4}},[e._v("图片(单选)")]):e._e()],1),e._v(" "),r("div",{staticClass:"gray"},[e._v("选择“文本”，属性值为自定义填写；选择“单选/多选”,属性值只能从属性值选项中选择； 选择“图片”，属性值只能上传图片\n        ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"属性值选项:",prop:"attrValues",error:e.errorMessage.attrValues,rules:2===e.formData.valueType||3===e.formData.valueType?[{required:!0,message:"请输入待选项",trigger:"blur"}]:[]}},[r("el-input",{attrs:{maxlength:"150",type:"textarea",rows:6,disabled:1===e.formData.valueType},model:{value:e.formData.attrValues,callback:function(a){e.$set(e.formData,"attrValues",a)},expression:"formData.attrValues"}}),e._v(" "),r("div",{staticClass:"gray"},[e._v("多个请换行填写，显示先后顺序即填写先后顺序")])],1),e._v(" "),r("el-form-item",{attrs:{label:"排序:",prop:"sortNum",error:e.errorMessage.sortNum}},[r("el-input",{attrs:{maxlength:"2"},model:{value:e.formData.sortNum,callback:function(a){e.$set(e.formData,"sortNum",e._n(a))},expression:"formData.sortNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注:",prop:"remark",error:e.errorMessage.namremarke}},[r("el-input",{attrs:{maxlength:"255",type:"textarea",rows:6},model:{value:e.formData.remark,callback:function(a){e.$set(e.formData,"remark",a)},expression:"formData.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"cms-form-footer"},[r("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/productType/standard/save",expression:"'/productType/standard/save'"},{name:"color",rawName:"v-color"}],on:{click:function(a){e.save(!1)}}},[e._v("保存并新增")]),e._v(" "),r("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/productType/standard/save",expression:"'/productType/standard/save'"},{name:"color",rawName:"v-color"}],on:{click:function(a){e.save(!0)}}},[e._v("保存")]),e._v(" "),r("cms-button",{attrs:{type:"rest"},on:{click:e.rest}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},p=r("C7Lr")(i,n,!1,null,null,null);a.default=p.exports}});
//# sourceMappingURL=213.5c759e5f7672eb23e9db.js.map
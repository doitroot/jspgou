webpackJsonp([227],{"7JKM":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("aA9S"),s=t.n(r),l=t("x1ym"),i=t("lcoF"),o=t("HNM5"),m=function(a){return o.a.post("/admin/platform/email/update",a)},n={id:"",smtpService:"",smtpPort:"",emailName:"",testemail:"",emailPassword:"",isSsl:!0},c={name:"mailboxShow",mixins:[i.a],data:function(){return{formData:s()({},n),rules:{smtpService:[l.a.required(),l.a.len(1,20)],emailName:[l.a.required("请输入邮箱地址"),l.a.email(),l.a.len(1,50)],emailPassword:[l.a.required(),l.a.english(),l.a.len(1,50)],testemail:[l.a.required(),l.a.email(),l.a.len(1,50)],smtpPort:[l.a.required(),l.a.len(1,20)]}}},computed:{isCanUser:function(){return!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.formData.testemail)}},methods:{getFormData:function(){var a,e=this;o.a.get("/admin/platform/email/get",{params:a}).then(function(a){e.formData=a.data})},saveData:function(){"string"==typeof this.formData.testemail&&""!==this.formData.testemail?this.rules.testemail=[l.a.email()]:this.rules.testemail=[{required:!1}],this.updateForm(m,this.formData,"","","",!1)},sendTestEmail:function(){var a,e=this;(a={toAddress:this.formData.testemail},o.a.get("/admin/platform/email/sendTestEmail",{params:a})).then(function(a){200===a.code?0===a.data&&e.$successMessage("发送成功"):e.$errorMessage("发送失败")})}},created:function(){this.getFormData()}},f={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:"true"}},[t("li",[a._v(" 设置系统使用的邮箱信息")])]),a._v(" "),t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"form",staticStyle:{"margin-top":"20px"},attrs:{rules:a.rules,model:a.formData,"label-width":"210px"}},[t("el-form-item",{attrs:{label:"SMTP 服务器：",prop:"smtpService",error:a.errorMessage.smtpService}},[t("el-input",{ref:"first",attrs:{autofocus:!0},model:{value:a.formData.smtpService,callback:function(e){a.$set(a.formData,"smtpService",e)},expression:"formData.smtpService"}}),a._v(" "),t("div",{staticClass:"gray"},[a._v("设置 SMTP 邮件服务器主机地址，不推荐使用QQ个人邮箱")])],1),a._v(" "),t("el-form-item",{attrs:{label:"SMTP 端口：",prop:"smtpPort",error:a.errorMessage.smtpPort}},[t("el-input",{model:{value:a.formData.smtpPort,callback:function(e){a.$set(a.formData,"smtpPort",e)},expression:"formData.smtpPort"}}),a._v(" "),t("div",{staticClass:"gray"},[a._v("邮件服务器端口，25默认http协议，465默认为https协议，推荐使用465")])],1),a._v(" "),t("el-form-item",{attrs:{label:"发送邮件帐号：",prop:"emailName",error:a.errorMessage.emailName}},[t("el-input",{model:{value:a.formData.emailName,callback:function(e){a.$set(a.formData,"emailName",e)},expression:"formData.emailName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"发送邮件密码：",prop:"emailPassword",error:a.errorMessage.emailPassword}},[t("el-input",{attrs:{type:"password"},model:{value:a.formData.emailPassword,callback:function(e){a.$set(a.formData,"emailPassword",e)},expression:"formData.emailPassword"}}),a._v(" "),t("div",{staticClass:"gray"},[a._v("一般为验证邮箱密码，如果使用网易邮箱，请填写授权码")])],1),a._v(" "),t("el-form-item",{staticClass:"textemail",attrs:{label:"测试邮箱地址："}},[t("el-input",{model:{value:a.formData.testemail,callback:function(e){a.$set(a.formData,"testemail",e)},expression:"formData.testemail"}}),a._v(" "),t("el-button",{attrs:{type:"text",size:"small",disabled:a.isCanUser},on:{click:a.sendTestEmail}},[a._v("发送测试邮件")])],1),a._v(" "),t("el-form-item",{attrs:{label:"是否使用SSL协议：",prop:"isSsl"}},[t("el-radio-group",{model:{value:a.formData.isSsl,callback:function(e){a.$set(a.formData,"isSsl",e)},expression:"formData.isSsl"}},[t("el-radio",{attrs:{label:!1}},[a._v("否")]),a._v(" "),t("el-radio",{attrs:{label:!0}},[a._v("是")])],1)],1)],1),a._v(" "),t("div",{staticClass:"cms-form-footer"},[t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){a.saveData()}}},[a._v("保存")])],1)],1)},staticRenderFns:[]},u=t("C7Lr")(c,f,!1,null,null,null);e.default=u.exports}});
//# sourceMappingURL=227.9ec37f3e0a1fe00a33be.js.map
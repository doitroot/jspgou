webpackJsonp([89],{UQaN:function(t,e){},tbLO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("aA9S"),s=a.n(o),n=a("lcoF"),r=a("PUYW"),i=a("mNbs"),l=a("x1ym"),c={keyEq:[],keyLike:[],wechatReplyContent:{thumbMediaId:"",hqMusicUrll:"",musicUrl:"",description:"",title:"",content:"",isEnable:!1,msgType:"",ruleName:"",sortNum:null,mediaid:""}},m={name:"keywordSave",mixins:[n.a],components:{mediaWarpper:r.a},data:function(){return{formData:s()({},c),keywordList:[],rules:{"wechatReplyContent.ruleName":[l.a.required("请填写规则名称")],"wechatReplyContent.sortNum":[l.a.required("请填写匹配优先级"),l.a.number()]},restData:!1}},methods:{save:function(t){var e=this.formData.wechatReplyContent,a=[],o=[];this.keywordList.forEach(function(t){t.type?a.push(t.value):o.push(t.value)}),this.formData.keyEq=a,this.formData.keyLike=o,""!==e.mediaid||""!==e.musicUrl||""!==e.hqMusicUrll||e.content&&""!==e.content?""===e.thumbMediaId&&"music"===e.msgType?this.$errorMessage("请选择资源空间内音乐文件"):this.saveForm(i.g,this.formData,t,"/wechatAutoResponse/keywordReplyList","list"):this.$errorMessage("关键词必须添加一个回复内容")},deleteData:function(t){this.keywordList.splice(t,1)},addKeyword:function(){this.keywordList.push({value:"",type:!1})},getMediaData:function(t){t[0]?(this.formData.wechatReplyContent.mediaid=t[0].id,this.formData.wechatReplyContent.msgType=t[0].mediaType):(this.formData.wechatReplyContent.hqMusicUrll=t.hqMusicUrll,this.formData.wechatReplyContent.musicUrl=t.musicUrl,this.formData.wechatReplyContent.thumbMediaId=t.thumbMediaId,this.formData.wechatReplyContent.description=t.description,this.formData.wechatReplyContent.title=t.title,this.formData.wechatReplyContent.content=t.content,this.formData.wechatReplyContent.msgType=t.msgType)},rest:function(){this.$refs.form.resetFields(),this.formData=s()({},c),this.formData.wechatReplyContent.hqMusicUrll="",this.formData.wechatReplyContent.musicUrl="",this.formData.wechatReplyContent.description="",this.formData.wechatReplyContent.title="",this.formData.wechatReplyContent.content="",this.formData.wechatReplyContent.msgType=null,this.formData.wechatReplyContent.mediaid="",this.formData.wechatReplyContent.thumbMediaId="",this.keywordList=[],this.restData=!0}},created:function(){}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("cms-breadcrumb",{attrs:{to:"/wechatAutoResponse/keywordReplyList"},on:{click:t.rest}},[a("li",[t._v(t._s(t.$route.name))])]),t._v(" "),a("div",{staticClass:"cms-form-layout"},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.formData,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"规则名称",prop:"wechatReplyContent.ruleName"}},[a("el-input",{ref:"first",attrs:{autofocus:!0,maxlength:"100"},model:{value:t.formData.wechatReplyContent.ruleName,callback:function(e){t.$set(t.formData.wechatReplyContent,"ruleName",e)},expression:"formData.wechatReplyContent.ruleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"匹配优先级",prop:"wechatReplyContent.sortNum"}},[a("el-input",{attrs:{maxlength:"2"},model:{value:t.formData.wechatReplyContent.sortNum,callback:function(e){t.$set(t.formData.wechatReplyContent,"sortNum",t._n(e))},expression:"formData.wechatReplyContent.sortNum"}}),t._v(" "),a("div",{staticClass:"gray"},[t._v("在多组规则关键词都匹配的情况下，优先匹配优先级越大的")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否禁用",prop:"wechatReplyContent.isEnable"}},[a("cms-switch",{model:{value:t.formData.wechatReplyContent.isEnable,callback:function(e){t.$set(t.formData.wechatReplyContent,"isEnable",e)},expression:"formData.wechatReplyContent.isEnable"}}),t._v(" "),a("div",{staticClass:"gray"},[t._v("设置为“是”，标识当前规则暂不生效")])],1),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("关键词列表")]),t._v(" "),a("el-table",{ref:"dataTable",staticClass:"keyword-table",attrs:{data:t.keywordList}},[a("el-table-column",{attrs:{label:"关键词"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入匹配的关键词",maxlength:"50"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"matchingRule",label:"匹配规则"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("cms-switch",{attrs:{"on-text":"完全","off-text":"模糊",size:"large"},model:{value:e.row.type,callback:function(a){t.$set(e.row,"type",a)},expression:"scope.row.type"}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"175",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("cms-button",{attrs:{icon:"error",size:"small",type:"info"},on:{click:function(a){a.stopPropagation(),t.deleteData(e.$index)}}},[t._v("删除")])],1)}}])})],1),t._v(" "),a("div",{staticClass:"addKeyword",on:{click:function(e){t.addKeyword()}}},[t._v("＋ 添加关键词")]),t._v(" "),a("div",{staticStyle:{width:"100%",cursor:"pointer"}},[a("h3",{staticClass:"cms-segmentation"},[t._v("触发后回复内容\n          ")]),t._v(" "),t.status?a("media-warpper",{staticStyle:{margin:"0"},attrs:{restData:t.restData,show:!0},on:{change:t.getMediaData}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"cms-form-footer"},[a("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){t.save(!1)}}},[t._v("保存并新增")]),t._v(" "),a("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){t.save(!0)}}},[t._v("保存")]),t._v(" "),a("cms-button",{attrs:{type:"rest"},on:{click:t.rest}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var d=a("C7Lr")(m,u,!1,function(t){a("UQaN")},"data-v-affbdf0e",null);e.default=d.exports}});
//# sourceMappingURL=89.fdf81a861b84a11d0c5d.js.map
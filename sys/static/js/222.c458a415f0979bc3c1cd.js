webpackJsonp([222],{"AT/s":function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=r("aA9S"),o=r.n(t),s=r("x1ym"),n=r("lcoF"),l=r("GqAp"),i={id:"",areaCode:"",areaName:"",parentIds:[],parentId:null,sortNum:10,remark:"",areaDictCode:""},d={mixins:[n.a],data:function(){var e=this;return{options:[],props:{value:"id",label:"areaName",children:"childs"},formData:o()({},i),rules:{areaName:[s.a.required("此项必填"),s.a.len(1,20)],areaCode:[s.a.required("必填"),s.a.len(1,10),s.a.number(),s.a.custom(function(a,r,t){Object(l.c)({id:e.$route.query.id,areaCode:r}).then(function(e){e.data?t(new Error("区域编码已存在，不允许重复添加")):t()})})],menuid:[s.a.required()],areaDictCode:[s.a.required("请选择区域类型","change")],sortNum:[s.a.required("此项必填"),s.a.number()]}}},methods:{getFormData:function(e){var a=this;this.loading=!0,Object(l.b)({id:e}).then(function(e){a.formData=e.data,e.data.nodeIds.length<=1?(a.formData.parentIds=[],a.loading=!1):(e.data.nodeIds.pop(),a.formData.parentIds=e.data.nodeIds,a.loading=!1)})},getMenuTree:function(){var e=this;Object(l.h)().then(function(a){var r=a.data;r.forEach(function(a){a.id===e.$route.query.id?a.disabled=!0:a.childs&&a.childs.forEach(function(a){a.id===e.$route.query.id?a.disabled=!0:a.childs&&a.childs.forEach(function(a){a.id===e.$route.query.id&&(a.disabled=!0)})})}),e.options=r.concat()})},update:function(){var e=this;this.$refs.form.validate(function(a){if(a){e.formData.parentIds.length>0?e.formData.parentId=e.formData.parentIds[e.formData.parentIds.length-1]:delete e.formData.parentId,delete e.formData.nodeIds,delete e.formData.parentIds;var r=e.$cms.deepCopy(e.formData);e.loading=!0,Object(l.g)(r).then(function(a){e.loading=!1,200===a.code?(e.$routerLink("/region/list","list"),e.$successMessage("修改成功")):e.$errorMessage(a.message)}).catch(function(){e.loading=!1})}})},getAll:function(){this.getFormData(this.$route.query.id),this.getMenuTree()},reset:function(){this.getAll(),this.$refs.form.clearValidate()}},created:function(){this.formData=o()({},i),this.getAll()}},m={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("cms-breadcrumb",{attrs:{to:"/region/list",type:"list"}},[r("li",[e._v(e._s(e.$route.name))])]),e._v(" "),r("div",{staticClass:"cms-form-layout"},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[r("el-form-item",{attrs:{label:"上级区域",prop:"parentIds",error:e.errorMessage.parentIds}},[r("el-cascader",{attrs:{filterable:"",options:e.options,props:e.props,"change-on-select":!0},model:{value:e.formData.parentIds,callback:function(a){e.$set(e.formData,"parentIds",a)},expression:"formData.parentIds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域编号",prop:"areaCode",error:e.errorMessage.areaCode}},[r("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.areaCode,callback:function(a){e.$set(e.formData,"areaCode",a)},expression:"formData.areaCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域名称",prop:"areaName",error:e.errorMessage.areaName}},[r("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.areaName,callback:function(a){e.$set(e.formData,"areaName",a)},expression:"formData.areaName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域类型",prop:"areaDictCode",error:e.errorMessage.areaDictCode}},[r("el-radio-group",{model:{value:e.formData.areaDictCode,callback:function(a){e.$set(e.formData,"areaDictCode",a)},expression:"formData.areaDictCode"}},[r("el-radio",{attrs:{label:"1"}},[e._v("省/直辖市")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("地市")]),e._v(" "),r("el-radio",{attrs:{label:"3"}},[e._v("区")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sortNum"}},[r("el-input",{attrs:{maxlength:"2"},model:{value:e.formData.sortNum,callback:function(a){e.$set(e.formData,"sortNum",e._n(a))},expression:"formData.sortNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容",maxlength:"100"},model:{value:e.formData.remark,callback:function(a){e.$set(e.formData,"remark",a)},expression:"formData.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"cms-form-footer"},[r("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(a){e.update(!1)}}},[e._v("修改")]),e._v(" "),r("cms-button",{attrs:{type:"rest"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},c=r("C7Lr")(d,m,!1,null,null,null);a.default=c.exports}});
//# sourceMappingURL=222.c458a415f0979bc3c1cd.js.map
webpackJsonp([58],{"gB/R":function(t,e){},nBld:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"d",function(){return c}),a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i});var s=a("HNM5"),n=function(t){return s.a.get("/admin/platform/storeStatistics/page",{params:t})},c=function(t){return s.a.post("/admin/platform/storeStatistics/update",t)},o=function(t){return s.a.get("/admin/platform/comment/page",{params:t})},i=function(t){return s.a.post("/admin/platform/comment/update",t)}},"pv+n":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("aA9S"),n=a.n(s),c=a("5HJ5"),o=a("nBld"),i={storeId:"",memberName:"",orderCode:"",page:1,size:10},r={mixins:[c.a],data:function(){return{queryParams:n()({},i),tableData:[],loading:!1,selecteAll:!1,flag:!0,updateParams:{commentdList:[],commenthList:[]}}},methods:{getAll:function(){var t=this;this.selecteAll=!this.selecteAll,this.tableData.forEach(function(e){e.rowCheck=!t.selecteAll,t.$set(e,"rowCheck",!t.selecteAll),e.commentdList.forEach(function(e){t.$set(e,"goodsCheck",!t.selecteAll)})})},getRows:function(t){var e=this;t.commentdList.forEach(function(a){e.$set(a,"goodsCheck",!t.rowCheck)})},getGoods:function(t,e,a){this.$set(e[a],"goodsCheck",e[a].goodsCheck);var s=0;e.forEach(function(t){t.goodsCheck&&(s+=1)}),e.length===s?this.$set(t,"rowCheck",!0):this.$set(t,"rowCheck",!1)},getTableData:function(){var t=this;this.loading=!0,Object(o.a)(this.queryParams).then(function(e){200===e.code?(e.data.content.forEach(function(t){t.rowCheck=!1,t.commentdList.forEach(function(t){t.goodsCheck=!1})}),t.tableData=e.data.content,t.total=e.data.totalElements,t.loading=!1):(t.$errorMessage(e.message),t.loading=!1)})},batchUpdate:function(){var t=this;this.tableData.forEach(function(e){if(e.rowCheck){var a={id:e.id,express:e.express,matchV:e.matchV,service:e.service};""!==e.express&&""!==e.matchV&&""!==e.service||(t.flag=!1),t.updateParams.commenthList.push(a)}e.commentdList.forEach(function(e){if(e.goodsCheck){var a={id:"",matchV:""};""===e.matchV&&(t.flag=!1),a.id=e.id,a.matchV=e.matchV,t.updateParams.commentdList.push(a)}})}),0===this.updateParams.commentdList.length||0===this.updateParams.commenthList.length?this.$errorMessage("至少选中一条订单项"):Object(o.b)(this.updateParams).then(function(e){200===e.code?(t.$successMessage("修改成功"),t.getTableData(),t.updateParams={commentdList:[],commenthList:[]},t.selecteAll=!1):t.$errorMessage(e.message)})},update:function(t){var e=this;t.commentdList.forEach(function(t){var a={id:"",matchV:""};""===t.matchV&&(e.flag=!1),a.id=t.id,a.matchV=t.matchV,e.updateParams.commentdList.push(a)}),""!==t.express&&""!==t.matchV&&""!==t.service||(this.flag=!1);var a={id:t.id,express:t.express,matchV:t.matchV,service:t.service};this.updateParams.commenthList.push(a),this.flag?t.rowCheck?Object(o.b)(this.updateParams).then(function(t){200===t.code?(e.$successMessage("修改成功"),e.getTableData(),e.updateParams={commentdList:[],commenthList:[]}):e.$errorMessage(t.message)}):this.$errorMessage("请勾选订单项"):(this.$errorMessage("请全部填写完整后再保存"),this.flag=!0)},arraySpanMethod:function(t){var e=t.row,a=(t.column,t.rowIndex),s=t.columnIndex,n=this.tableData[a].commentdList.length;if(1===e.commentdList.length){if(a%2==0&&1===s)return[1,2];if(a%2==1&&1!==s)return[1,1]}return a%2==0&&1===s?[0,0]:1!==s&&5!==s?{rowspan:n,colspan:1}:1===s||5===s?[0,0]:void 0}},created:function(){this.queryParams.storeId=this.$route.query.id,this.getTableData()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-list-layout"},[a("cms-prompt",{attrs:{collapse:"true"}},[a("li",[t._v("可查看商家评分构成详细信息")])]),t._v(" "),a("section",{staticClass:"cms-list-query"},[a("div",{staticClass:"query-group"},[a("label",[t._v("买家账户")]),t._v(" "),a("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.query(e):null}},model:{value:t.queryParams.memberName,callback:function(e){t.$set(t.queryParams,"memberName",e)},expression:"queryParams.memberName"}})],1),t._v(" "),a("div",{staticClass:"query-group"},[a("label",[t._v("订单号")]),t._v(" "),a("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.query(e):null}},model:{value:t.queryParams.orderCode,callback:function(e){t.$set(t.queryParams,"orderCode",e)},expression:"queryParams.orderCode"}})],1),t._v(" "),a("div",{staticClass:"query-group"},[a("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:t.query}},[t._v("查询")])],1)]),t._v(" "),a("section",{staticClass:"cms-batch"},[a("cms-button",{attrs:{size:"small",disabled:0==t.tableData.length,colorPicker:!0},on:{click:t.batchUpdate}},[t._v("保存修改")])],1),t._v(" "),a("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"comment-table-wrap",attrs:{border:""}},[t.loading?t._e():a("tr",{staticStyle:{height:"35px","line-height":"35px","background-color":"#F7F7F7","font-weight":"normal"}},[a("th",{staticStyle:{width:"30px"}},[a("el-checkbox",{nativeOn:{click:function(e){return t.getAll(e)}},model:{value:t.selecteAll,callback:function(e){t.selecteAll=e},expression:"selecteAll"}})],1),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("订单号")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("商家服务态度")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("商家发货速度")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("商家符合度")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("经验值")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("买家账户")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("评论时间")]),t._v(" "),a("th",{staticClass:"comment-th"},[t._v("操作选项")])]),t._v(" "),t._l(t.tableData,function(e,s){return a("tbody",{key:s},[a("tr",{staticStyle:{"min-height":"30px","background-color":"#FAFAFA"},on:{click:function(a){t.getRows(e)}}},[a("td",{staticStyle:{"text-align":"center"}},[a("el-checkbox",{model:{value:e.rowCheck,callback:function(a){t.$set(e,"rowCheck",a)},expression:"item.rowCheck"}})],1),t._v(" "),a("td",{staticStyle:{padding:"5px"},attrs:{colspan:"8"}},[t._v(t._s(e.orderCode))])]),t._v(" "),t._l(e.commentdList,function(s,n){return a("tr",{key:n,staticClass:"comment-table",staticStyle:{padding:"5px 0"}},[a("td",{staticStyle:{"text-align":"center"}},[a("el-checkbox",{on:{change:function(a){t.getGoods(e,e.commentdList,n)}},model:{value:s.goodsCheck,callback:function(e){t.$set(s,"goodsCheck",e)},expression:"comment.goodsCheck"}})],1),t._v(" "),a("td",{staticClass:"comment-name"},[t._v(t._s(s.product.name))]),t._v(" "),0==n?a("td",{staticClass:"comment-value",attrs:{rowspan:e.commentdList.length}},[a("el-input-number",{attrs:{min:0,max:5},model:{value:e.service,callback:function(a){t.$set(e,"service",a)},expression:"item.service"}})],1):t._e(),t._v(" "),0==n?a("td",{staticClass:"comment-value",attrs:{rowspan:e.commentdList.length}},[a("el-input-number",{attrs:{min:0,max:5},model:{value:e.express,callback:function(a){t.$set(e,"express",a)},expression:"item.express"}})],1):t._e(),t._v(" "),0==n?a("td",{staticClass:"comment-value",attrs:{rowspan:e.commentdList.length}},[a("el-input-number",{attrs:{min:0,max:5},model:{value:e.matchV,callback:function(a){t.$set(e,"matchV",a)},expression:"item.matchV"}})],1):t._e(),t._v(" "),a("td",{staticClass:"comment-value"},[a("el-input-number",{attrs:{min:0,max:5},model:{value:s.matchV,callback:function(e){t.$set(s,"matchV",e)},expression:"comment.matchV"}})],1),t._v(" "),0==n?a("td",{staticStyle:{"text-align":"center",padding:"0 5px"},attrs:{rowspan:e.commentdList.length}},[t._v("\n          "+t._s(e.memberName)+"\n        ")]):t._e(),t._v(" "),0==n?a("td",{staticStyle:{"text-align":"center"},attrs:{rowspan:e.commentdList.length}},[t._v("\n          "+t._s(t.$moment(e.createTime))+"\n        ")]):t._e(),t._v(" "),0==n?a("td",{staticStyle:{"text-align":"center"},attrs:{rowspan:e.commentdList.length}},[a("cms-button",{attrs:{icon:"edit",size:"small",type:"info"},on:{click:function(a){a.stopPropagation(),t.update(e)}}},[t._v("修改")])],1):t._e()])})],2)})],2),t._v(" "),0!=t.tableData.length?a("cms-pagination",{attrs:{total:t.total},on:{change:t.getPage}}):t._e()],1)},staticRenderFns:[]};var m=a("C7Lr")(r,l,!1,function(t){a("gB/R")},"data-v-de3d8752",null);e.default=m.exports}});
//# sourceMappingURL=58.01cea8a155fa70bf7b03.js.map
{"version":3,"sources":["webpack:///src/views/marketing/indexNavigation/list.vue","webpack:///./src/views/marketing/indexNavigation/list.vue?e4bb","webpack:///./src/views/marketing/indexNavigation/list.vue"],"names":["indexNavigation_list","mixins","list","components","categoryCascader","data","clientType","name","value","queryParams","page","size","formLoading","visible","formData","proCategoryId","alias","logoResId","sortNum","rules","required","len","number","methods","addIndexNav","this","editForm","assign_default","saveForm","submitForm","marketing","updateForm","callBack","_this","$refs","form","validate","valid","then","res","code","$successMessage","getTableData","close","$errorMessage","message","_this2","setTimeout","clearValidate","getTypeName","filter","v","tabClick","query","deleteData","id","deleteTableData","deleteDatas","deleteTableDatas","ids","el","_this3","val","target","test","className","Object","sorts","$cmsMessage","type","timer","fastClick","getCategory","console","log","created","marketing_indexNavigation_list","render","_vm","_h","$createElement","_c","_self","staticClass","on","tab-click","model","callback","$$v","$set","expression","_l","item","key","attrs","label","_v","icon","click","$event","directives","rawName","ref","staticStyle","width","tableData","stripe","selection-change","getCheckItems","row-click","checkRows","fixed","prop","min-width","scopedSlots","_u","fn","scope","_s","row","productCategory","cateName","src","$cms","filterUrl","logoResource","url","alt","_e","nativeOn","keyup","_k","keyCode","stopPropagation","align","total","change","getPage","title","close-on-click-modal","before-close","label-width","element-loading-text","multiple","input","placeholder","maxlength","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/100.f96b1960d4260880cb51.js","sourcesContent":["<template>\r\n  <div class=\"cms-list-layout\">\r\n    <el-tabs v-model=\"queryParams.clientType\" @tab-click=\"tabClick\">\r\n      <el-tab-pane\r\n        :label=\"item.name\"\r\n        :name=\"item.value\"\r\n        v-for=\"item in clientType\"\r\n        :key=\"item.name\"\r\n      ></el-tab-pane>\r\n    </el-tabs>\r\n    <section class=\"cms-batch\">\r\n      <cms-button icon=\"add\" type=\"success\" size=\"small\" @click=\"addIndexNav\">新增</cms-button>\r\n      <cms-button icon=\"error\" type=\"error\" size=\"small\" @click=\"deleteDatas()\">批量删除</cms-button>\r\n    </section>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\"\r\n      stripe\r\n      v-loading=\"loading\"\r\n      @selection-change=\"getCheckItems\"\r\n      @row-click=\"checkRows\"\r\n      ref=\"dataTable\"\r\n      class=\"brands-form\"\r\n    >\r\n      <el-table-column type=\"selection\" width=\"46\" fixed=\"left\"></el-table-column>\r\n      <el-table-column prop=\"id\" label=\"id\" width=\"60\"></el-table-column>\r\n      <el-table-column prop=\"alias\" label=\"分类名称\" min-width=\"200\">\r\n        <div slot-scope=\"scope\">{{scope.row.productCategory.cateName}}</div>\r\n      </el-table-column>\r\n      <el-table-column prop=\"alias\" label=\"别名\" min-width=\"150\"></el-table-column>\r\n      <el-table-column label=\"图标\" min-width=\"180\" prop=\"logo\" v-if=\"queryParams.clientType!=='pc'\">\r\n        <div slot-scope=\"scope\" class=\"table-img\">\r\n          <img\r\n            v-if=\"scope.row.logoResource\"\r\n            :src=\"$cms.filterUrl(scope.row.logoResource.url) \"\r\n            alt=\"mockimg\"\r\n          >\r\n        </div>\r\n      </el-table-column>\r\n      <el-table-column label=\"排序\" prop=\"sortNum\" min-width=\"150\">\r\n        <div slot-scope=\"scope\">\r\n          <el-input\r\n            v-model=\"scope.row.sortNum\"\r\n            @keyup.enter.native.stop=\"sortNum($event,scope.row.id)\"\r\n          ></el-input>\r\n        </div>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"175\" fixed=\"right\" align=\"center\">\r\n        <div slot-scope=\"scope\">\r\n          <cms-button\r\n            v-prem=\"'/brand/edit'\"\r\n            icon=\"edit\"\r\n            size=\"small\"\r\n            type=\"info\"\r\n            @click.stop=\"editForm(scope.row)\"\r\n          >编辑</cms-button>\r\n          <cms-button\r\n            v-prem=\"'/brand/delete'\"\r\n            icon=\"error\"\r\n            size=\"small\"\r\n            type=\"info\"\r\n            @click=\"deleteData(scope.row.id)\"\r\n          >删除</cms-button>\r\n        </div>\r\n      </el-table-column>\r\n    </el-table>\r\n    <cms-pagination @change=\"getPage\" :total=\"total\"></cms-pagination>\r\n    <el-dialog title=\"导航设置\" :visible=\"visible\" :close-on-click-modal=\"false\"\r\n    :before-close=\"close\">\r\n      <el-form\r\n        :model=\"formData\"\r\n        :rules=\"rules\"\r\n        label-width=\"110px\"\r\n        ref=\"form\"\r\n        v-loading=\"formLoading\"\r\n        element-loading-text=\"正在提交...\"\r\n      >\r\n        <el-form-item label=\"终端:\" prop=\"clientType\">{{getTypeName(formData.clientType)}}</el-form-item>\r\n        <el-form-item label=\"选择分类:\" prop=\"proCategoryId\">\r\n          <category-cascader :multiple=\"false\" v-model=\"formData.proCategoryId\" @input=\"getCategory\"></category-cascader>\r\n        </el-form-item>\r\n        <el-form-item label=\"别名:\" prop=\"alias\">\r\n          <el-input v-model=\"formData.alias\" placeholder></el-input>\r\n          <span class=\"gray\">商城默认优先显示别名数据</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"排序值:\" prop=\"sortNum\">\r\n          <el-input v-model=\"formData.sortNum\" maxlength=\"3\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"图标:\" prop=\"logoResId\" v-if=\"formData.clientType!=='pc'\">\r\n          <cms-picture-zone\r\n            v-model=\"formData.logoResId\"\r\n            v-if=\"visible\"\r\n            :data=\"formData.logoResource\"\r\n          >\r\n            <el-button size=\"mini\" type=\"primary\">上传图标</el-button>\r\n            <span class=\"gray\">建议上传85*85尺寸正方形图片</span>\r\n          </cms-picture-zone>\r\n        </el-form-item>\r\n        <div class=\"cms-form-footer\">\r\n          <el-button @click=\"updateForm\" type=\"primary\" size=\"small\" v-if=\"formData.id\">修改</el-button>\r\n          <el-button @click=\"saveForm\" type=\"primary\" size=\"small\" v-else>添加</el-button>\r\n          <el-button @click=\"close\" size=\"small\">取消</el-button>\r\n        </div>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport list from '@/mixins/list'\r\nimport rules from '@/rules'\r\nimport {\r\n  indexNavPage,\r\n  indexNavSave,\r\n  indexNavDelete,\r\n  indexNavSort,\r\n  indexNavUpdate\r\n} from '@/api/marketing/index.js'\r\nimport categoryCascader from '@/components/cms/categoryCascader'\r\nexport default {\r\n  mixins: [list],\r\n  components: { categoryCascader },\r\n  data() {\r\n    return {\r\n      clientType: [\r\n        {\r\n          name: 'PC端',\r\n          value: 'pc'\r\n        },\r\n        { name: 'WAP端', value: 'wap' },\r\n        { name: '小程序', value: 'miniprogram' }\r\n      ],\r\n      queryParams: {\r\n        page: 1,\r\n        size: 10,\r\n        clientType: 'pc'\r\n      },\r\n      formLoading: false,\r\n      visible: false,\r\n      formData: {\r\n        clientType: 'pc',\r\n        proCategoryId: '',\r\n        alias: '',\r\n        logoResId: '',\r\n        sortNum: 10\r\n      },\r\n      rules: {\r\n        clientType: [rules.required()],\r\n        proCategoryId: [rules.required('必须选择一个分类', 'change')],\r\n        alias: [rules.required(), rules.len(1, 30)],\r\n        logoResId: [rules.required('必须选择一个图标', 'change')],\r\n        sortNum: [rules.required(), rules.number()]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addIndexNav() {\r\n      this.visible = true\r\n    },\r\n    editForm(data) {\r\n      this.formData = Object.assign({}, data)\r\n      this.visible = true\r\n    },\r\n    saveForm() {\r\n      this.submitForm(indexNavSave)\r\n    },\r\n    updateForm() {\r\n      this.submitForm(indexNavUpdate)\r\n    },\r\n    submitForm(callBack) {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          this.formLoading = true\r\n          callBack(this.formData).then(res => {\r\n            this.formLoading = false\r\n            if (res.code === 200) {\r\n              this.$successMessage('操作成功')\r\n              this.getTableData(indexNavPage, this.queryParams)\r\n              this.close()\r\n            } else {\r\n              this.$errorMessage(res.message)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    close() {\r\n      this.visible = false\r\n      setTimeout(() => {\r\n        this.formData = Object.assign(\r\n          {},\r\n          {\r\n            clientType: this.queryParams.clientType,\r\n            proCategoryId: '',\r\n            alias: '',\r\n            logoResId: '',\r\n            sortNum: 10\r\n          }\r\n        )\r\n        this.$refs.form.clearValidate()\r\n      }, 5)\r\n    },\r\n    getTypeName(name) {\r\n      return this.clientType.filter(v => v.value === name)[0].name\r\n    },\r\n    tabClick() {\r\n      this.formData.clientType = this.queryParams.clientType\r\n      this.query()\r\n    },\r\n\r\n    deleteData(id) {\r\n      // 包装一层删除的操作\r\n      this.deleteTableData(indexNavDelete, id) // 这个才是真实的删除方法\r\n    },\r\n    deleteDatas() {\r\n      this.deleteTableDatas(indexNavDelete, this.ids) // 这个才是真实的删除方法\r\n    },\r\n    sortNum(el, id) {\r\n      // 数字排序\r\n      const val = el.target.value\r\n      const reg = /^[1-9][0-9]{0,1}$/\r\n      if (val === '') {\r\n        return false\r\n      } else {\r\n        if (reg.test(val)) {\r\n          el.target.className = 'el-input__inner'\r\n          indexNavSort({\r\n            sorts: [\r\n              {\r\n                id: id,\r\n                sortNum: val\r\n              }\r\n            ]\r\n          }).then(res => {\r\n            if (res.code === 200) {\r\n              this.$successMessage('修改成功')\r\n            } else {\r\n              this.$errorMessage('修改失败')\r\n            }\r\n          })\r\n        } else {\r\n          el.target.className = 'cms-error el-input__inner'\r\n          this.$cmsMessage({\r\n            message: '只能输入1-99的正整数',\r\n            type: 'error',\r\n            timer: '1000',\r\n            fastClick: false\r\n          })\r\n        }\r\n      }\r\n    },\r\n    getCategory(data) {\r\n      console.log(data)\r\n    }\r\n  },\r\n  created() {\r\n    this.getTableData(indexNavPage, this.queryParams)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/marketing/indexNavigation/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cms-list-layout\"},[_c('el-tabs',{on:{\"tab-click\":_vm.tabClick},model:{value:(_vm.queryParams.clientType),callback:function ($$v) {_vm.$set(_vm.queryParams, \"clientType\", $$v)},expression:\"queryParams.clientType\"}},_vm._l((_vm.clientType),function(item){return _c('el-tab-pane',{key:item.name,attrs:{\"label\":item.name,\"name\":item.value}})}),1),_vm._v(\" \"),_c('section',{staticClass:\"cms-batch\"},[_c('cms-button',{attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":_vm.addIndexNav}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"icon\":\"error\",\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteDatas()}}},[_vm._v(\"批量删除\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"dataTable\",staticClass:\"brands-form\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"selection-change\":_vm.getCheckItems,\"row-click\":_vm.checkRows}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"46\",\"fixed\":\"left\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"id\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"alias\",\"label\":\"分类名称\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_vm._v(_vm._s(scope.row.productCategory.cateName))])}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"alias\",\"label\":\"别名\",\"min-width\":\"150\"}}),_vm._v(\" \"),(_vm.queryParams.clientType!=='pc')?_c('el-table-column',{attrs:{\"label\":\"图标\",\"min-width\":\"180\",\"prop\":\"logo\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{staticClass:\"table-img\"},[(scope.row.logoResource)?_c('img',{attrs:{\"src\":_vm.$cms.filterUrl(scope.row.logoResource.url),\"alt\":\"mockimg\"}}):_vm._e()])}}])}):_vm._e(),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"排序\",\"prop\":\"sortNum\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('el-input',{nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.stopPropagation();_vm.sortNum($event,scope.row.id)}},model:{value:(scope.row.sortNum),callback:function ($$v) {_vm.$set(scope.row, \"sortNum\", $$v)},expression:\"scope.row.sortNum\"}})],1)}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"175\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/brand/edit'),expression:\"'/brand/edit'\"}],attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.editForm(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/brand/delete'),expression:\"'/brand/delete'\"}],attrs:{\"icon\":\"error\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.deleteData(scope.row.id)}}},[_vm._v(\"删除\")])],1)}}])})],1),_vm._v(\" \"),_c('cms-pagination',{attrs:{\"total\":_vm.total},on:{\"change\":_vm.getPage}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"导航设置\",\"visible\":_vm.visible,\"close-on-click-modal\":false,\"before-close\":_vm.close}},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.formLoading),expression:\"formLoading\"}],ref:\"form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"110px\",\"element-loading-text\":\"正在提交...\"}},[_c('el-form-item',{attrs:{\"label\":\"终端:\",\"prop\":\"clientType\"}},[_vm._v(_vm._s(_vm.getTypeName(_vm.formData.clientType)))]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择分类:\",\"prop\":\"proCategoryId\"}},[_c('category-cascader',{attrs:{\"multiple\":false},on:{\"input\":_vm.getCategory},model:{value:(_vm.formData.proCategoryId),callback:function ($$v) {_vm.$set(_vm.formData, \"proCategoryId\", $$v)},expression:\"formData.proCategoryId\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"别名:\",\"prop\":\"alias\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.formData.alias),callback:function ($$v) {_vm.$set(_vm.formData, \"alias\", $$v)},expression:\"formData.alias\"}}),_vm._v(\" \"),_c('span',{staticClass:\"gray\"},[_vm._v(\"商城默认优先显示别名数据\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序值:\",\"prop\":\"sortNum\"}},[_c('el-input',{attrs:{\"maxlength\":\"3\"},model:{value:(_vm.formData.sortNum),callback:function ($$v) {_vm.$set(_vm.formData, \"sortNum\", $$v)},expression:\"formData.sortNum\"}})],1),_vm._v(\" \"),(_vm.formData.clientType!=='pc')?_c('el-form-item',{attrs:{\"label\":\"图标:\",\"prop\":\"logoResId\"}},[(_vm.visible)?_c('cms-picture-zone',{attrs:{\"data\":_vm.formData.logoResource},model:{value:(_vm.formData.logoResId),callback:function ($$v) {_vm.$set(_vm.formData, \"logoResId\", $$v)},expression:\"formData.logoResId\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"}},[_vm._v(\"上传图标\")]),_vm._v(\" \"),_c('span',{staticClass:\"gray\"},[_vm._v(\"建议上传85*85尺寸正方形图片\")])],1):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[(_vm.formData.id)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.updateForm}},[_vm._v(\"修改\")]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.saveForm}},[_vm._v(\"添加\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.close}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7d370a9d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/marketing/indexNavigation/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d370a9d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d370a9d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/marketing/indexNavigation/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
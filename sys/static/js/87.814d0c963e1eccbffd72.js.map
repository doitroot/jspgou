{"version":3,"sources":["webpack:///src/views/platform/setting/timingTask/list.vue","webpack:///./src/views/platform/setting/timingTask/list.vue?d24f","webpack:///./src/views/platform/setting/timingTask/list.vue"],"names":["defaultData","size","page","timingTask_list","name","mixins","list","data","queryParams","assign_default","methods","deleteData","id","this","deleteTableData","timingTask","deleteDatas","deleteTableDatas","ids","setTimer","timer","startTime","endTime","query","setDisable","status","_this","Object","then","res","code","$successMessage","$errorMessage","messsage","activated","$route","type","getTableData","created","setting_timingTask_list","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","collapse","_v","directives","rawName","value","expression","icon","on","click","$event","$routerLink","ref","staticStyle","width","tableData","stripe","selection-change","getCheckItems","row-click","checkRows","prop","label","min-width","scopedSlots","_u","key","fn","scope","onText","offText","row","change","model","callback","$$v","$set","_s","$moment","nextExecuteDate","fixed","align","stopPropagation","total","getPage","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/87.814d0c963e1eccbffd72.js","sourcesContent":["\r\n<template>\r\n  <div class=\"cms-list-layout\">\r\n    <cms-prompt collapse='true'>\r\n      <li>显示系统自带定时任务</li>\r\n      <li>手动执行会立即执行该任务，下次执行时间将自动顺延一个周期</li>\r\n      <li>禁用定时任务将不再生效，再次启用不会立即执行，等待下次执行时间执行</li>\r\n    </cms-prompt>\r\n    <!-- 操作区 -->\r\n    <cms-sticky>\r\n    <section class=\"cms-batch\">\r\n      <cms-button v-prem=\"'/timingtask/save'\"   icon=\"add\" type=\"success\" size=\"small\" @click=\"$routerLink('/timingtask/save','save')\">新增</cms-button>\r\n    </section>\r\n    </cms-sticky>\r\n    <el-table :data=\"tableData\" style=\"width: 100%\" stripe v-loading=\"loading\" @selection-change='getCheckItems' @row-click='checkRows' ref='dataTable'>\r\n      <el-table-column prop=\"name\" label=\"任务标识\" width=\"240\"></el-table-column>\r\n      <el-table-column prop=\"remark\" label=\"任务名称 \" min-width='180'></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"110\">\r\n        <div slot-scope=\"scope\">\r\n          <cms-switch v-model=\"scope.row.status\" size=\"large\" :onText=\"'启用'\" :offText=\"'禁用'\" :id='scope.row.id' @change=\"setDisable\"></cms-switch>\r\n        </div>\r\n      </el-table-column>\r\n      <el-table-column prop=\"\" label=\"下次执行时间\" min-width=\"180\">\r\n        <div slot-scope=\"scope\">\r\n          <span>{{$moment(scope.row.nextExecuteDate)}}</span>\r\n        </div>\r\n      </el-table-column>\r\n      <el-table-column prop=\"classPath\" label=\"执行类\" min-width='360'></el-table-column>\r\n      <el-table-column label=\"操作\" width='200' fixed=\"right\" align=\"center\">\r\n        <div slot-scope=\"scope\">\r\n          <cms-button  v-prem=\"'/timingtask/edit'\"  icon='edit' size='small' type='info' @click.stop=\"$routerLink('/timingtask/edit','update',{id:scope.row.id})\">编辑</cms-button>\r\n          <!-- <cms-button  icon='edit' size='small' type='info'>手动执行</cms-button> -->\r\n          <!-- <cms-button   icon='error' size='small' type='info' @click.stop=\"deleteData(scope.row.id)\">删除</cms-button> -->\r\n        </div>\r\n      </el-table-column>\r\n    </el-table>\r\n    <cms-pagination @change=\"getPage\" :total='total'></cms-pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nimport list from '@/mixins/list'\r\nimport { jobPage, jobDelete, jobEnabledJobs, jobDisabledJobs } from '@/api/setting/timingTask.js'\r\nvar defaultData = {\r\n  size: 10,\r\n  page: 1\r\n}\r\nexport default {\r\n  name: 'timingTaskList',\r\n  mixins: [list],\r\n  data() {\r\n    return {\r\n      queryParams: Object.assign({}, defaultData)\r\n    }\r\n  },\r\n  methods: {\r\n    deleteData(id) {\r\n      // 包装一层删除的操作\r\n      this.deleteTableData(jobDelete, id) // 这个才是真实的删除方法\r\n    },\r\n    deleteDatas() {\r\n      this.deleteTableDatas(jobDelete, this.ids) // 这个才是真实的删除方法\r\n    },\r\n    setTimer(timer) {\r\n      // 设置时间区间\r\n      this.queryParams.startTime = timer[0]\r\n      this.queryParams.endTime = timer[1]\r\n      this.query()\r\n    },\r\n    setDisable(status, id) {\r\n      if (!status) {\r\n        jobDisabledJobs({ ids: [id] }).then(res => {\r\n          // 禁用\r\n          if (res.code === 200) {\r\n            this.$successMessage('禁用成功')\r\n          } else {\r\n            this.$errorMessage(res.messsage)\r\n          }\r\n        })\r\n      } else {\r\n        jobEnabledJobs({ ids: [id] }).then(res => {\r\n          // 启用\r\n          if (res.code === 200) {\r\n            this.$successMessage('启用成功')\r\n          } else {\r\n            this.$errorMessage(res.messsage)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  activated() {\r\n    // 缓存触发\r\n    if (this.$route.query.type === 'list') {\r\n      this.queryParams = Object.assign({}, defaultData)\r\n      // 这个值一定要用动态的变量\r\n      this.getTableData(jobPage, this.queryParams)\r\n    }\r\n  },\r\n  created() {\r\n    // 首次触发\r\n\r\n    this.getTableData(jobPage, this.queryParams)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/setting/timingTask/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cms-list-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":\"true\"}},[_c('li',[_vm._v(\"显示系统自带定时任务\")]),_vm._v(\" \"),_c('li',[_vm._v(\"手动执行会立即执行该任务，下次执行时间将自动顺延一个周期\")]),_vm._v(\" \"),_c('li',[_vm._v(\"禁用定时任务将不再生效，再次启用不会立即执行，等待下次执行时间执行\")])]),_vm._v(\" \"),_c('cms-sticky',[_c('section',{staticClass:\"cms-batch\"},[_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/timingtask/save'),expression:\"'/timingtask/save'\"}],attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.$routerLink('/timingtask/save','save')}}},[_vm._v(\"新增\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"dataTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"selection-change\":_vm.getCheckItems,\"row-click\":_vm.checkRows}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"任务标识\",\"width\":\"240\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"任务名称 \",\"min-width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"110\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('cms-switch',{attrs:{\"size\":\"large\",\"onText\":'启用',\"offText\":'禁用',\"id\":scope.row.id},on:{\"change\":_vm.setDisable},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})],1)}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"下次执行时间\",\"min-width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('span',[_vm._v(_vm._s(_vm.$moment(scope.row.nextExecuteDate)))])])}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"classPath\",\"label\":\"执行类\",\"min-width\":\"360\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/timingtask/edit'),expression:\"'/timingtask/edit'\"}],attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.$routerLink('/timingtask/edit','update',{id:scope.row.id})}}},[_vm._v(\"编辑\")])],1)}}])})],1),_vm._v(\" \"),_c('cms-pagination',{attrs:{\"total\":_vm.total},on:{\"change\":_vm.getPage}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-b7cbe6a6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/setting/timingTask/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b7cbe6a6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b7cbe6a6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/setting/timingTask/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
{"version":3,"sources":["webpack:///src/components/operation/cmsCoupon.vue","webpack:///./src/components/operation/cmsCoupon.vue?6e4e","webpack:///./src/components/operation/cmsCoupon.vue","webpack:///src/views/marketing/activityMange/edit.vue","webpack:///./src/views/marketing/activityMange/edit.vue?8b1a","webpack:///./src/views/marketing/activityMange/edit.vue"],"names":["cmsCoupon","mixins","name","props","value","multiple","type","Boolean","default","labelName","String","Number","hasPromote","data","Array","watch","handler","this","checkItems","$cms","deepCopy","showItems","immediate","deep","dialogVisible","selectIndex","queryParams","discountAmount","beginTime","endTime","couponType","page","size","methods","initData","getTableData","marketing","checkRows","row","$refs","dataTable","toggleRowSelection","tableData","indexOf","determine","$emit","map","v","id","parseInt","toString","close","deleteCoupon","index","splice","done","clearSelection","operation_cmsCoupon","render","_vm","_h","$createElement","_c","_self","attrs","on","click","_v","title","visible","width","before-close","staticClass","nativeOn","keyup","$event","_k","keyCode","key","query","model","callback","$$v","$set","expression","colorPicker","directives","rawName","ref","staticStyle","cursor","element-loading-text","selection-change","getCheckItems","row-click","align","scopedSlots","_u","fn","scope","label","$index","disabled","canSelecteAll","prop","min-width","show-overflow-tooltip","class-name","_e","_s","conOrderAmount","expirateType","$moment","useBeginTime","useEndTime","useDay","total","change","getPage","slot","_l","item","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","defaultData","promote","promoteBeginTime","promoteEndTime","remark","enable","promoteType","product_flag_icon","rule","signBeginTime","signEndTime","signScope","oneFeeThird","oneFeeSelf","maxRefundRate","minPrice","minSale","minScore","minStock","discounts","signLimitCtgIds","couponIds","coupons","edit","components","categoryCascader","mixins_form","productLimt","activeTimer","signTimer","formData","assign_default","rules","promote.name","required","len","promote.promoteBeginTime","rule.signBeginTime","rule.oneFeeThird","float","decimal","rule.oneFeeSelf","rule.minPrice","rule.minStock","number","rule.minScore","rule.maxRefundRate","rule.minSale","computed","color","$store","state","system","getFormData","_this","status","loading","Object","then","res","code","copyData","flagIcon","ctgs","push","getCoupon","items","changeProductLimt","length","changeType","coupon","getActiveTimer","getSignTimer","discountAdd","discountDelete","update","_this2","params","flag","reg","forEach","$errorMessage","test","parseFloat","updateForm","created","$route","activityMange_edit","to","rest","collapse","label-width","submit","preventDefault","error","errorMessage","disabledType","value-format","rows","maxlength","get","margin-bottom","margin-right","_n","style"],"mappings":"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","file":"static/js/29.29b4e8e3a3e1ea4325a8.js","sourcesContent":["\r\n<template>\r\n  <div>\r\n    <el-button @click=\"initData\" size=\"mini\" type=\"primary\">选择优惠券</el-button>\r\n    <el-dialog title='优惠券选择' :visible=\"dialogVisible\" width=\"70%\" :before-close=\"close\">\r\n      <div class=\"cms-dialog__body\">\r\n      <section class=\"cms-list-query\">\r\n         <div class=\"query-group\">\r\n        <label>优惠券名称</label>\r\n        <el-input v-model=\"queryParams.name\" @keyup.native.enter=\"query\"></el-input>\r\n      </div>\r\n          <div class=\"query-group\">\r\n            <cms-button size=\"small\" :colorPicker='true' @click=\"query\">查询</cms-button>\r\n          </div>\r\n        </section>\r\n        <el-table  v-loading='loading' element-loading-text=\"正在加载...\" :data=\"tableData\" style=\"cursor: pointer;\" \r\n         ref='dataTable' @selection-change='getCheckItems' @row-click='checkRows' >\r\n          <!-- 多选 -->\r\n          <el-table-column width=\"60\" type=\"selection\" v-if=\"multiple\">\r\n          </el-table-column>\r\n          <!-- 单选 -->\r\n          <el-table-column width=\"60\" align=\"center\" v-else>\r\n            <div slot-scope=\"scope\">\r\n              <el-radio :label=\"scope.$index\" v-model=\"selectIndex\" :disabled=\"canSelecteAll\" >&nbsp;</el-radio>\r\n            </div>\r\n          </el-table-column>\r\n          <el-table-column prop=\"id\" label=\"id\" width=\"60\"></el-table-column>\r\n          <el-table-column prop=\"name\" label=\"优惠券名称\" min-width=\"200\" show-overflow-tooltip class-name=\"text-overflow\"></el-table-column>\r\n          <el-table-column prop=\"couponType\" label=\"类型\" align=\"center\" width=\"120\">\r\n            <div slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.couponType==1\" class=\"info\">活动优惠券</span>\r\n              <span v-if=\"scope.row.couponType==2\" class=\"success\">普通优惠券</span>\r\n            </div>\r\n          </el-table-column>\r\n          <el-table-column prop=\"discountAmount\" label=\"面值\"></el-table-column>\r\n          <el-table-column prop=\"discountAmount\" label=\"使用条件\" min-width=\"160\">\r\n            <div slot-scope=\"scope\">\r\n              <span>满{{scope.row.conOrderAmount}}减{{scope.row.discountAmount}}</span>\r\n            </div>\r\n          </el-table-column>\r\n          <el-table-column prop=\"discountAmount\" label=\"使用期限\" min-width=\"180\">\r\n            <div slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.expirateType==1\">{{$moment(scope.row.useBeginTime,'YYYY-MM-DD')}} 至 \r\n                {{$moment(scope.row.useEndTime,'YYYY-MM-DD')}}\r\n              </span>\r\n              <span v-if=\"scope.row.expirateType==2\">派发后{{scope.row.useDay}}天</span>\r\n            </div>\r\n          </el-table-column>\r\n        </el-table>\r\n        <cms-pagination @change=\"getPage\" :total='total'></cms-pagination>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n       <el-button type=\"primary\" size=\"mini\" @click=\"determine\">确 定</el-button>\r\n        <el-button type='info' size=\"mini\" @click=\"close\">取 消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <ul class=\"coupon__items\">\r\n      <li v-for=\"(item,index) in showItems\" :key=\"item.id\" class=\"coupon__item\">\r\n        <span class=\"coupon__name text-overflow\">{{item.name}}</span>\r\n        <span class=\"coupon__del\" @click=\"deleteCoupon(index)\">删除</span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { couponPage } from '@/api/marketing/index.js'\r\nimport list from '@/mixins/list'\r\nexport default {\r\n  mixins: [list],\r\n  name: 'cmsCoupon',\r\n  props: {\r\n    value: {},\r\n    multiple: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    labelName: {\r\n      type: String,\r\n      default: 'name'\r\n    },\r\n    type: {// 优惠券的类型\r\n      type: Number,\r\n      default: ''\r\n    },\r\n    hasPromote: {\r\n      type: Boolean,\r\n      default: ''\r\n    },\r\n    data: {\r\n      type: Array,\r\n      default: function() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    data: {\r\n      handler() {\r\n        this.checkItems = this.$cms.deepCopy(this.data)\r\n        this.showItems = this.$cms.deepCopy(this.data)\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      checkItems: [],\r\n      selectIndex: '', // 全选状态，默认全不选\r\n      queryParams: {\r\n        name: '',\r\n        discountAmount: '',\r\n        beginTime: '',\r\n        endTime: '',\r\n        couponType: '',\r\n        hasPromote: '',\r\n        page: 1,\r\n        size: 10\r\n      },\r\n      showItems: [] // 组件内显示的数组\r\n    }\r\n  },\r\n  methods: {\r\n    initData() {\r\n      this.dialogVisible = true\r\n      this.queryParams.couponType = this.type// 优惠券的类型\r\n      this.queryParams.hasPromote = this.hasPromote// 优惠券的转态是否被占用\r\n      this.getTableData(couponPage, this.queryParams)\r\n    },\r\n    checkRows(row) {\r\n      // 单击行选中\r\n      if (this.multiple) {\r\n        // 多选时\r\n        this.$refs.dataTable.toggleRowSelection(row)\r\n      } else {\r\n        // 单选时\r\n        this.selectIndex = this.tableData.indexOf(row)\r\n        this.checkItems = [row]\r\n      }\r\n    },\r\n    determine() {\r\n      this.$emit('get', this.checkItems)\r\n      if (this.multiple) {\r\n        // 多选时\r\n        this.$emit('input', this.checkItems.map(v => v.id))\r\n      } else {\r\n        // 单选时\r\n        this.$emit(\r\n          'input',\r\n          parseInt(this.checkItems.map(v => v.id).toString())\r\n        )\r\n      }\r\n      this.showItems = this.$cms.deepCopy(this.checkItems)\r\n      this.close()\r\n    },\r\n    deleteCoupon(index) {\r\n      this.showItems.splice(index, 1)\r\n      this.checkItems.splice(index, 1)\r\n      this.$emit('get', this.checkItems)\r\n      if (this.multiple) {\r\n        // 多选时\r\n        this.$emit('input', this.checkItems.map(v => v.id))\r\n      } else {\r\n        // 单选时\r\n        this.$emit(\r\n          'input',\r\n          parseInt(this.checkItems.map(v => v.id).toString())\r\n        )\r\n      }\r\n    },\r\n    close(done) {\r\n      this.checkItems = []\r\n      this.selectIndex = ''\r\n      this.$refs.dataTable.clearSelection()\r\n      this.dialogVisible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.coupon{\r\n  &__item{\r\n    height: 28px;\r\n    line-height: 28px;\r\n  }\r\n &__name{\r\n   display: inline-block;\r\n   font-size: 12px;\r\n   color: #444;\r\n   width: 160px;\r\n }\r\n &__del{\r\n    display: inline-block;\r\n    vertical-align: top;\r\n   color: #999;\r\n   cursor: pointer;\r\n   &:hover{\r\n     color: #fe5331;\r\n   }\r\n }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/operation/cmsCoupon.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.initData}},[_vm._v(\"选择优惠券\")]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"优惠券选择\",\"visible\":_vm.dialogVisible,\"width\":\"70%\",\"before-close\":_vm.close}},[_c('div',{staticClass:\"cms-dialog__body\"},[_c('section',{staticClass:\"cms-list-query\"},[_c('div',{staticClass:\"query-group\"},[_c('label',[_vm._v(\"优惠券名称\")]),_vm._v(\" \"),_c('el-input',{nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.query($event)}},model:{value:(_vm.queryParams.name),callback:function ($$v) {_vm.$set(_vm.queryParams, \"name\", $$v)},expression:\"queryParams.name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"query-group\"},[_c('cms-button',{attrs:{\"size\":\"small\",\"colorPicker\":true},on:{\"click\":_vm.query}},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"dataTable\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"element-loading-text\":\"正在加载...\",\"data\":_vm.tableData},on:{\"selection-change\":_vm.getCheckItems,\"row-click\":_vm.checkRows}},[(_vm.multiple)?_c('el-table-column',{attrs:{\"width\":\"60\",\"type\":\"selection\"}}):_c('el-table-column',{attrs:{\"width\":\"60\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('el-radio',{attrs:{\"label\":scope.$index,\"disabled\":_vm.canSelecteAll},model:{value:(_vm.selectIndex),callback:function ($$v) {_vm.selectIndex=$$v},expression:\"selectIndex\"}},[_vm._v(\" \")])],1)}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"id\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"优惠券名称\",\"min-width\":\"200\",\"show-overflow-tooltip\":\"\",\"class-name\":\"text-overflow\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"couponType\",\"label\":\"类型\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[(scope.row.couponType==1)?_c('span',{staticClass:\"info\"},[_vm._v(\"活动优惠券\")]):_vm._e(),_vm._v(\" \"),(scope.row.couponType==2)?_c('span',{staticClass:\"success\"},[_vm._v(\"普通优惠券\")]):_vm._e()])}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"discountAmount\",\"label\":\"面值\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"discountAmount\",\"label\":\"使用条件\",\"min-width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[_c('span',[_vm._v(\"满\"+_vm._s(scope.row.conOrderAmount)+\"减\"+_vm._s(scope.row.discountAmount))])])}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"discountAmount\",\"label\":\"使用期限\",\"min-width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('div',{},[(scope.row.expirateType==1)?_c('span',[_vm._v(_vm._s(_vm.$moment(scope.row.useBeginTime,'YYYY-MM-DD'))+\" 至 \\n              \"+_vm._s(_vm.$moment(scope.row.useEndTime,'YYYY-MM-DD'))+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(scope.row.expirateType==2)?_c('span',[_vm._v(\"派发后\"+_vm._s(scope.row.useDay)+\"天\")]):_vm._e()])}}])})],1),_vm._v(\" \"),_c('cms-pagination',{attrs:{\"total\":_vm.total},on:{\"change\":_vm.getPage}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.determine}},[_vm._v(\"确 定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"mini\"},on:{\"click\":_vm.close}},[_vm._v(\"取 消\")])],1)]),_vm._v(\" \"),_c('ul',{staticClass:\"coupon__items\"},_vm._l((_vm.showItems),function(item,index){return _c('li',{key:item.id,staticClass:\"coupon__item\"},[_c('span',{staticClass:\"coupon__name text-overflow\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticClass:\"coupon__del\",on:{\"click\":function($event){_vm.deleteCoupon(index)}}},[_vm._v(\"删除\")])])}),0)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-bd7a2062\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/operation/cmsCoupon.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bd7a2062\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./cmsCoupon.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./cmsCoupon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./cmsCoupon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bd7a2062\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./cmsCoupon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bd7a2062\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/operation/cmsCoupon.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <cms-breadcrumb to=\"/activity/list\" type='list' @click=\"rest\">\n      <li>{{$route.name}}</li>\n    </cms-breadcrumb>\n    <div class=\"cms-form-layout\">\n      <cms-prompt :collapse='false'>\n        <li>可进行添加平台活动</li>\n      </cms-prompt>\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\" @submit.native.prevent v-loading='loading'>\n        <el-form-item label=\"活动名称\" prop=\"promote.name\" ref=\"promote.name\">\n          <el-input v-model=\"formData.promote.name\"></el-input>\n        </el-form-item>\n         <el-form-item label=\"报名时间\" prop=\"rule.signBeginTime\" ref=\"rule.signBeginTime\" :error=\"errorMessage['rule.signBeginTime']\">\n          <cms-picker disabledType='todayAfter' v-model=\"signTimer\" style=\"width:380px\" @change=\"getSignTimer\"\n          value-format=\"yyyy-MM-dd\"></cms-picker>\n        </el-form-item>\n        <el-form-item label=\"活动时间\" prop=\"promote.promoteBeginTime\" ref=\"promote.promoteBeginTime\" :error=\"errorMessage['promote.promoteBeginTime']\">\n          <cms-picker disabledType='todayAfter' v-model=\"activeTimer\" style=\"width:380px\" @change=\"getActiveTimer\"\n          value-format=\"yyyy-MM-dd\"></cms-picker>\n        </el-form-item>\n        <el-form-item label=\"活动说明\" prop=\"promote.remark\" ref=\"promote.remark\">\n          <el-input v-model=\"formData.promote.remark\" type=\"textarea\" :rows=\"4\" maxlength=\"250\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"活动报名限制\" prop=\"rule.signScope\" ref=\"rule_signScope\">\n          <el-radio-group v-model=\"formData.rule.signScope\">\n            <el-radio :label=\"1\">全部商品</el-radio>\n            <el-radio :label=\"2\">自营商品</el-radio>\n            <el-radio :label=\"3\">部分类目</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"选择类目\" v-show=\"formData.rule.signScope===3\">\n          <category-cascader style=\"width:380px;\" v-model=\"formData.signLimitCtgIds\"></category-cascader>\n        </el-form-item>\n        <el-form-item label=\"活动支持优惠形式\" prop=\"promote.promoteType\" ref=\"promote.promoteType\">\n          <el-radio-group v-model=\"formData.promote.promoteType\">\n            <el-radio :label=\"4\">优惠券</el-radio>\n            <el-radio :label=\"3\">满减</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"选择优惠券\" v-show=\"formData.promote.promoteType==4\">\n          <cms-coupon v-model=\"formData.couponIds\" :data=\"formData.coupons\"\n          :type=1 :hasPromote=\"false\" @get=\"getCoupon\">\n          </cms-coupon>\n        </el-form-item>\n        <el-form-item label='满减信息' v-show=\"formData.promote.promoteType==3\">\n          <ul>\n            <li v-for=\"(item,index) in formData.discounts\" :key=\"index\" style=\"margin-bottom:10px;\">\n              <el-input style=\"width:160px;margin-right:5px\" v-model.number=\"item.conOrderAmount\">\n                <template slot=\"prepend\">满</template>\n              </el-input>\n              <el-input style=\"width:160px;\" v-model.number=\"item.discountAmount\">\n                <template slot=\"prepend\">减</template>\n              </el-input>\n              <span class=\"del-span\" @click=\"discountDelete(index)\" v-if=\"index!=0\">删除</span>\n            </li>\n          </ul>\n          <div class=\"discounts__add\" :style=\"{color:color}\" @click=\"discountAdd()\">\n            <span class=\"iconfont icon-tianjia\"></span>添加\n          </div>\n        </el-form-item>\n        <el-form-item label=\"自营店铺单品收费\" prop=\"rule.oneFeeThird\" ref=\"rule.oneFeeThird\">\n          <el-input v-model=\"formData.rule.oneFeeThird\" maxlength=\"6\">\n            <template slot=\"append\">元</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"非自营店铺单品收费\" prop=\"rule.oneFeeSelf\" ref=\"rule.oneFeeSelf\">\n          <el-input v-model=\"formData.rule.oneFeeSelf\" maxlength=\"6\">\n            <template slot=\"append\">元</template>\n          </el-input>\n        </el-form-item>\n        <h3 class=\"cms-segmentation\">商品报名限制</h3>\n        <el-form-item label=\"商品报名限制\">\n          <el-select v-model=\"productLimt\" multiple size=\"mini\" @change=\"changeProductLimt\">\n            <el-option :value=\"0\" label=\"无限制\"></el-option>\n            <el-option :value=\"1\" label=\"最新30天成交价\"></el-option>\n            <el-option :value=\"2\" label=\"库存\"></el-option>\n            <el-option :value=\"3\" label=\"商品评分\"></el-option>\n            <el-option :value=\"4\" label=\"退款率\"></el-option>\n            <el-option :value=\"5\" label=\"最新30天销量\"></el-option>\n          </el-select>\n        </el-form-item>\n        <!-- 成交价 -->\n        <el-form-item label=\"最新30天成交价>=\" prop=\"rule.minPrice\" ref=\"rule.minPrice\" v-if=\"productLimt.indexOf(1)>-1\">\n          <el-input v-model=\"formData.rule.minPrice\" maxlength=\"6\">\n            <template slot=\"append\">元</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"库存>=\" prop=\"rule.minStock\" ref=\"rule.minStock\" v-if=\"productLimt.indexOf(2)>-1\">\n          <el-input v-model=\"formData.rule.minStock\" maxlength=\"6\">\n            <template slot=\"append\">件</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"商品评分>=\" prop=\"rule.minScore\" ref=\"rule.minScore\" v-if=\"productLimt.indexOf(3)>-1\">\n          <el-input v-model=\"formData.rule.minScore\" maxlength=\"4\">\n            <template slot=\"append\">分</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"退款率<=\" prop=\"rule.maxRefundRate\" ref=\"rule.maxRefundRate\" v-if=\"productLimt.indexOf(4)>-1\">\n          <el-input v-model=\"formData.rule.maxRefundRate\" maxlength=\"4\">\n            <template slot=\"append\">%</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"最新30天销量>=\" prop=\"rule.minSale\" ref=\"rule.minSale\" v-if=\"productLimt.indexOf(5)>-1\">\n          <el-input v-model=\"formData.rule.minSale\" maxlength=\"6\">\n            <template slot=\"append\">件</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"活动检索标识\" prop=\"promote.product_flag_icon\">\n          <cms-picture-zone v-model=\"formData.promote.product_flag_icon\" :data=\"formData.flagIcon\"></cms-picture-zone>\n        </el-form-item>\n        <el-form-item label=\"是否上线\" prop=\"promote.enable\" ref=\"promote.enable\">\n          <cms-switch v-model=\"formData.promote.enable\"></cms-switch>\n        </el-form-item>\n      </el-form>\n      <div class=\"cms-form-footer\">\n        <cms-button @click=\"update()\" v-color>修改</cms-button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport rules from '@/rules/index.js'\nimport form from '@/mixins/form.js'\nimport { activityUpdate, activityGet } from '@/api/marketing/index.js'\nimport categoryCascader from '@/components/cms/categoryCascader'\nimport cmsCoupon from './../../../components/operation/cmsCoupon'\nvar defaultData = {\n  promote: {\n    name: '',\n    promoteBeginTime: '',\n    promoteEndTime: '',\n    remark: '',\n    enable: false,\n    promoteType: '',\n    product_flag_icon: ''\n  },\n  rule: {\n    signBeginTime: '',\n    signEndTime: '',\n    signScope: '',\n    oneFeeThird: '',\n    oneFeeSelf: '',\n    maxRefundRate: '',\n    minPrice: '',\n    minSale: '',\n    minScore: '',\n    minStock: ''\n  },\n  discounts: [\n    {\n      conOrderAmount: 0,\n      discountAmount: 0\n    }\n  ],\n  signLimitCtgIds: [],\n  couponIds: [],\n  coupons: [],\n  id: ''\n}\n\nexport default {\n  components: { categoryCascader, cmsCoupon },\n  mixins: [form],\n  data() {\n    return {\n      productLimt: [], // 商品报名限制\n      activeTimer: [],\n      signTimer: [],\n      formData: Object.assign({}, defaultData),\n      rules: {\n        'promote.name': [rules.required('请填写活动名称'), rules.len(1, 15)],\n        'promote.promoteBeginTime': [rules.required('请选择活动开始时间', 'change')],\n        'rule.signBeginTime': [rules.required('请选择活动报名时间', 'change')],\n        'rule.oneFeeThird': [rules.required(), rules.float(), rules.decimal()],\n        'rule.oneFeeSelf': [rules.required(), rules.float(), rules.decimal()],\n        'rule.minPrice': [rules.float(), rules.decimal()],\n        'rule.minStock': [rules.number()],\n        'rule.minScore': [rules.float()],\n        'rule.maxRefundRate': [rules.float()],\n        'rule.minSale': [rules.number()]\n      }\n    }\n  },\n  computed: {\n    color() {\n      return this.$store.state.system.color\n    }\n  },\n  methods: {\n    getFormData(id) {\n      this.status = false\n      this.loading = true\n      activityGet({ id: id }).then(res => {\n        if (res.code === 200) {\n          this.loading = false\n          this.copyData(res.data)\n          this.status = true\n        }\n      })\n    },\n    copyData(data) {\n      this.formData = {\n        flagIcon: data.flagIcon,\n        promote: {\n          id: data.id,\n          name: data.name,\n          promoteBeginTime: this.$moment(data.promoteBeginTime, 'YYYY-MM-DD'),\n          promoteEndTime: this.$moment(data.promoteEndTime, 'YYYY-MM-DD'),\n          remark: data.remark,\n          enable: data.enable,\n          promoteType: data.promoteType,\n          product_flag_icon: data.product_flag_icon\n        },\n        rule: {\n          signBeginTime: this.$moment(data.rule.signBeginTime, 'YYYY-MM-DD'),\n          signEndTime: this.$moment(data.rule.signEndTime, 'YYYY-MM-DD'),\n          signScope: data.rule.signScope,\n          oneFeeThird: data.rule.oneFeeThird,\n          oneFeeSelf: data.rule.oneFeeSelf,\n          maxRefundRate: data.rule.maxRefundRate,\n          minPrice: data.rule.minPrice,\n          minSale: data.rule.minSale,\n          minScore: data.rule.minScore,\n          minStock: data.rule.minStock,\n          id: data.rule.id\n        },\n        discounts: data.discounts,\n        signLimitCtgIds: data.rule.ctgs.map(v => v.id),\n        couponIds: data.coupons.map(v => v.id),\n        coupons: data.coupons,\n        id: data.id\n      }\n      if (data.rule.minPrice > 0) { // 回填商品报名限制的下拉列表(若设置了信息不为0)，则需要显示该条数据\n        this.productLimt.push(parseInt(1))\n      }\n      if (data.rule.minStock > 0) {\n        this.productLimt.push(parseInt(2))\n      }\n      if (data.rule.minScore > 0) {\n        this.productLimt.push(parseInt(3))\n      }\n      if (data.rule.maxRefundRate > 0) {\n        this.productLimt.push(parseInt(4))\n      }\n      if (data.rule.minSale > 0) {\n        this.productLimt.push(parseInt(5))\n      }\n      this.activeTimer = [this.$moment(data.promoteBeginTime, 'YYYY-MM-DD'), this.$moment(data.promoteEndTime, 'YYYY-MM-DD')]\n      this.signTimer = [this.$moment(data.rule.signBeginTime, 'YYYY-MM-DD'), this.$moment(data.rule.signEndTime, 'YYYY-MM-DD')]\n    },\n    getCoupon(items) { // 得到优惠券相关\n      this.formData.couponIds = items.map(v => v.id)\n    },\n    changeProductLimt(value) {\n      if (value.indexOf(0) > -1 && value.length > 1) {\n        this.productLimt = []\n      }\n    },\n    changeType(value) {\n      this.formData.coupon.expirateType = value\n    },\n    getActiveTimer(value) {\n      this.formData.promote.promoteBeginTime = value[0]\n      this.formData.promote.promoteEndTime = value[1]\n    },\n    getSignTimer(value) {\n      this.formData.rule.signBeginTime = value[0]\n      this.formData.rule.signEndTime = value[1]\n    },\n    discountAdd() {\n      this.formData.discounts.push({\n        conOrderAmount: 0,\n        discountAmount: 0,\n        id: ''\n      })\n    },\n    discountDelete(index) {\n      this.formData.discounts.splice(index, 1)\n    },\n    update() {\n      const params = this.$cms.deepCopy(this.formData)\n      let flag = true // 此处用来过滤减满信息的脏数据\n      if (params.promote.promoteType === 3) {\n        params.couponIds = []\n        // 提交前要处理不同的优惠类型，避免脏数据\n        const reg = /^(([0-9]*)|(([0]\\.\\d{1,2}|[0-9]*\\.\\d{1,2})))$/\n        params.discounts.forEach(v => {\n          if (v.conOrderAmount === '' || v.discountAmount === '') {\n            flag = false\n            this.$errorMessage('满减信息不能为空')\n          } else if (!reg.test(v.conOrderAmount) || !reg.test(v.discountAmount)) {\n            flag = false\n            this.$errorMessage('满减信息格式不正确')\n          } else if (parseFloat(v.conOrderAmount) < parseFloat(v.discountAmount)) {\n            flag = false\n            this.$errorMessage('满减额度必须大于消费额度')\n          } else { // 满足添加之后再转化一下\n            v.conOrderAmount = parseFloat(v.conOrderAmount)\n            v.discountAmount = parseFloat(v.discountAmount)\n          }\n        })\n      } else {\n        // 提交前要处理不同的优惠类型，避免脏数据\n        params.discounts = []\n      }\n      // 过滤报名限制\n      if (this.productLimt.indexOf(1) === -1) {\n        params.rule.minPrice = 0\n      }\n      if (this.productLimt.indexOf(2) === -1) {\n        params.rule.minStock = 0\n      }\n      if (this.productLimt.indexOf(3) === -1) {\n        params.rule.minScore = 0\n      }\n      if (this.productLimt.indexOf(4) === -1) {\n        params.rule.maxRefundRate = 0\n      }\n      if (this.productLimt.indexOf(5) === -1) {\n        params.rule.minSale = 0\n      }\n      if (flag) {\n        delete params.coupons\n        delete params.flagIcon\n        this.updateForm(activityUpdate, params, '/activity/list', 'list')\n      }\n    }\n  },\n  created() {\n    this.getFormData(this.$route.query.id)\n  }\n}\n</script>\n\n<style scoped>\n.discounts__add {\n  cursor: pointer;\n}\n.discounts__add .iconfont {\n  position: relative;\n  top: 1px;\n  margin-right: 3px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/marketing/activityMange/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":\"/activity/list\",\"type\":\"list\"},on:{\"click\":_vm.rest}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":false}},[_c('li',[_vm._v(\"可进行添加平台活动\")])]),_vm._v(\" \"),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{ref:\"promote.name\",attrs:{\"label\":\"活动名称\",\"prop\":\"promote.name\"}},[_c('el-input',{model:{value:(_vm.formData.promote.name),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"name\", $$v)},expression:\"formData.promote.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"rule.signBeginTime\",attrs:{\"label\":\"报名时间\",\"prop\":\"rule.signBeginTime\",\"error\":_vm.errorMessage['rule.signBeginTime']}},[_c('cms-picker',{staticStyle:{\"width\":\"380px\"},attrs:{\"disabledType\":\"todayAfter\",\"value-format\":\"yyyy-MM-dd\"},on:{\"change\":_vm.getSignTimer},model:{value:(_vm.signTimer),callback:function ($$v) {_vm.signTimer=$$v},expression:\"signTimer\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.promoteBeginTime\",attrs:{\"label\":\"活动时间\",\"prop\":\"promote.promoteBeginTime\",\"error\":_vm.errorMessage['promote.promoteBeginTime']}},[_c('cms-picker',{staticStyle:{\"width\":\"380px\"},attrs:{\"disabledType\":\"todayAfter\",\"value-format\":\"yyyy-MM-dd\"},on:{\"change\":_vm.getActiveTimer},model:{value:(_vm.activeTimer),callback:function ($$v) {_vm.activeTimer=$$v},expression:\"activeTimer\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.remark\",attrs:{\"label\":\"活动说明\",\"prop\":\"promote.remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"maxlength\":\"250\"},model:{value:(_vm.formData.promote.remark),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"remark\", $$v)},expression:\"formData.promote.remark\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"rule_signScope\",attrs:{\"label\":\"活动报名限制\",\"prop\":\"rule.signScope\"}},[_c('el-radio-group',{model:{value:(_vm.formData.rule.signScope),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"signScope\", $$v)},expression:\"formData.rule.signScope\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"全部商品\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"自营商品\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"部分类目\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formData.rule.signScope===3),expression:\"formData.rule.signScope===3\"}],attrs:{\"label\":\"选择类目\"}},[_c('category-cascader',{staticStyle:{\"width\":\"380px\"},model:{value:(_vm.formData.signLimitCtgIds),callback:function ($$v) {_vm.$set(_vm.formData, \"signLimitCtgIds\", $$v)},expression:\"formData.signLimitCtgIds\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.promoteType\",attrs:{\"label\":\"活动支持优惠形式\",\"prop\":\"promote.promoteType\"}},[_c('el-radio-group',{model:{value:(_vm.formData.promote.promoteType),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"promoteType\", $$v)},expression:\"formData.promote.promoteType\"}},[_c('el-radio',{attrs:{\"label\":4}},[_vm._v(\"优惠券\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"满减\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formData.promote.promoteType==4),expression:\"formData.promote.promoteType==4\"}],attrs:{\"label\":\"选择优惠券\"}},[_c('cms-coupon',{attrs:{\"data\":_vm.formData.coupons,\"type\":1,\"hasPromote\":false},on:{\"get\":_vm.getCoupon},model:{value:(_vm.formData.couponIds),callback:function ($$v) {_vm.$set(_vm.formData, \"couponIds\", $$v)},expression:\"formData.couponIds\"}})],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formData.promote.promoteType==3),expression:\"formData.promote.promoteType==3\"}],attrs:{\"label\":\"满减信息\"}},[_c('ul',_vm._l((_vm.formData.discounts),function(item,index){return _c('li',{key:index,staticStyle:{\"margin-bottom\":\"10px\"}},[_c('el-input',{staticStyle:{\"width\":\"160px\",\"margin-right\":\"5px\"},model:{value:(item.conOrderAmount),callback:function ($$v) {_vm.$set(item, \"conOrderAmount\", _vm._n($$v))},expression:\"item.conOrderAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"满\")])],2),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"160px\"},model:{value:(item.discountAmount),callback:function ($$v) {_vm.$set(item, \"discountAmount\", _vm._n($$v))},expression:\"item.discountAmount\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"减\")])],2),_vm._v(\" \"),(index!=0)?_c('span',{staticClass:\"del-span\",on:{\"click\":function($event){_vm.discountDelete(index)}}},[_vm._v(\"删除\")]):_vm._e()],1)}),0),_vm._v(\" \"),_c('div',{staticClass:\"discounts__add\",style:({color:_vm.color}),on:{\"click\":function($event){_vm.discountAdd()}}},[_c('span',{staticClass:\"iconfont icon-tianjia\"}),_vm._v(\"添加\\n        \")])]),_vm._v(\" \"),_c('el-form-item',{ref:\"rule.oneFeeThird\",attrs:{\"label\":\"自营店铺单品收费\",\"prop\":\"rule.oneFeeThird\"}},[_c('el-input',{attrs:{\"maxlength\":\"6\"},model:{value:(_vm.formData.rule.oneFeeThird),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"oneFeeThird\", $$v)},expression:\"formData.rule.oneFeeThird\"}},[_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1),_vm._v(\" \"),_c('el-form-item',{ref:\"rule.oneFeeSelf\",attrs:{\"label\":\"非自营店铺单品收费\",\"prop\":\"rule.oneFeeSelf\"}},[_c('el-input',{attrs:{\"maxlength\":\"6\"},model:{value:(_vm.formData.rule.oneFeeSelf),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"oneFeeSelf\", $$v)},expression:\"formData.rule.oneFeeSelf\"}},[_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1),_vm._v(\" \"),_c('h3',{staticClass:\"cms-segmentation\"},[_vm._v(\"商品报名限制\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品报名限制\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"size\":\"mini\"},on:{\"change\":_vm.changeProductLimt},model:{value:(_vm.productLimt),callback:function ($$v) {_vm.productLimt=$$v},expression:\"productLimt\"}},[_c('el-option',{attrs:{\"value\":0,\"label\":\"无限制\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"value\":1,\"label\":\"最新30天成交价\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"value\":2,\"label\":\"库存\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"value\":3,\"label\":\"商品评分\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"value\":4,\"label\":\"退款率\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"value\":5,\"label\":\"最新30天销量\"}})],1)],1),_vm._v(\" \"),(_vm.productLimt.indexOf(1)>-1)?_c('el-form-item',{ref:\"rule.minPrice\",attrs:{\"label\":\"最新30天成交价>=\",\"prop\":\"rule.minPrice\"}},[_c('el-input',{attrs:{\"maxlength\":\"6\"},model:{value:(_vm.formData.rule.minPrice),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"minPrice\", $$v)},expression:\"formData.rule.minPrice\"}},[_c('template',{slot:\"append\"},[_vm._v(\"元\")])],2)],1):_vm._e(),_vm._v(\" \"),(_vm.productLimt.indexOf(2)>-1)?_c('el-form-item',{ref:\"rule.minStock\",attrs:{\"label\":\"库存>=\",\"prop\":\"rule.minStock\"}},[_c('el-input',{attrs:{\"maxlength\":\"6\"},model:{value:(_vm.formData.rule.minStock),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"minStock\", $$v)},expression:\"formData.rule.minStock\"}},[_c('template',{slot:\"append\"},[_vm._v(\"件\")])],2)],1):_vm._e(),_vm._v(\" \"),(_vm.productLimt.indexOf(3)>-1)?_c('el-form-item',{ref:\"rule.minScore\",attrs:{\"label\":\"商品评分>=\",\"prop\":\"rule.minScore\"}},[_c('el-input',{attrs:{\"maxlength\":\"4\"},model:{value:(_vm.formData.rule.minScore),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"minScore\", $$v)},expression:\"formData.rule.minScore\"}},[_c('template',{slot:\"append\"},[_vm._v(\"分\")])],2)],1):_vm._e(),_vm._v(\" \"),(_vm.productLimt.indexOf(4)>-1)?_c('el-form-item',{ref:\"rule.maxRefundRate\",attrs:{\"label\":\"退款率<=\",\"prop\":\"rule.maxRefundRate\"}},[_c('el-input',{attrs:{\"maxlength\":\"4\"},model:{value:(_vm.formData.rule.maxRefundRate),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"maxRefundRate\", $$v)},expression:\"formData.rule.maxRefundRate\"}},[_c('template',{slot:\"append\"},[_vm._v(\"%\")])],2)],1):_vm._e(),_vm._v(\" \"),(_vm.productLimt.indexOf(5)>-1)?_c('el-form-item',{ref:\"rule.minSale\",attrs:{\"label\":\"最新30天销量>=\",\"prop\":\"rule.minSale\"}},[_c('el-input',{attrs:{\"maxlength\":\"6\"},model:{value:(_vm.formData.rule.minSale),callback:function ($$v) {_vm.$set(_vm.formData.rule, \"minSale\", $$v)},expression:\"formData.rule.minSale\"}},[_c('template',{slot:\"append\"},[_vm._v(\"件\")])],2)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动检索标识\",\"prop\":\"promote.product_flag_icon\"}},[_c('cms-picture-zone',{attrs:{\"data\":_vm.formData.flagIcon},model:{value:(_vm.formData.promote.product_flag_icon),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"product_flag_icon\", $$v)},expression:\"formData.promote.product_flag_icon\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"promote.enable\",attrs:{\"label\":\"是否上线\",\"prop\":\"promote.enable\"}},[_c('cms-switch',{model:{value:(_vm.formData.promote.enable),callback:function ($$v) {_vm.$set(_vm.formData.promote, \"enable\", $$v)},expression:\"formData.promote.enable\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.update()}}},[_vm._v(\"修改\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-bd6cdcb2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/marketing/activityMange/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bd6cdcb2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bd6cdcb2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bd6cdcb2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/marketing/activityMange/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
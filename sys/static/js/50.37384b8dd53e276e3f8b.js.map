{"version":3,"sources":["webpack:///src/views/shop/shops/shopManage/shopCategory/list.vue","webpack:///./src/views/shop/shops/shopManage/shopCategory/list.vue?88bb","webpack:///./src/views/shop/shops/shopManage/shopCategory/list.vue"],"names":["shopCategory_list","mixins","data","typeList","tableData","expandAll","queryParams","storeId","cateName","selfId","columnState","computed","backUrl","this","$route","query","type","methods","showRow","row","show","_show","toggleExpanded","trIndex","_this","record","_expanded","_load","chidView","parentId","id","loading","Object","shopManage","then","res","code","arr","utils_eval","i","length","splice","state","from_default","forEach","v","nodeIds","indexOf","push","iconShow","index","isChild","getTableData","callBack","params","_this2","changeShow","item","_this3","isShow","$successMessage","$errorMessage","sortNum","el","_this4","val","target","value","test","className","sorts","$cmsMessage","message","timer","fastClick","deleteData","_this5","$confirm","confirmButtonText","cancelButtonText","ids","catch","addNew","$router","path","getTypeList","activated","created","shopManage_shopCategory_list","render","_vm","_h","$createElement","_c","_self","attrs","to","_v","_s","name","staticClass","collapse","model","callback","$$v","$set","expression","size","colorPicker","on","click","directives","rawName","icon","$event","$routerLink","staticStyle","width","row-style","label","min-width","scopedSlots","_u","key","fn","scope","$index","style","marginLeft","_level","prop","maxlength","nativeOn","keyup","_k","keyCode","change","updateTime","_e","$moment","createTime","fixed","align","toString","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/50.37384b8dd53e276e3f8b.js","sourcesContent":[" <!--商品分类列表-->\n<template>\n  <div>\n    <cms-breadcrumb  :to=\"backUrl\" :type='$route.query.type'>\n      <li>{{$route.name}}</li>\n    </cms-breadcrumb>\n    <div class=\"cms-list-layout\">\n      <cms-prompt collapse='true'>\n        <li>显示商品分类列表信息</li>\n        <li>可对商品分类进行新增、修改、删除及查看、新增下级商品分类</li>\n      </cms-prompt>\n      <section class=\"cms-list-query\">\n        <div class=\"query-group\">\n          <label>分类名称</label>\n          <el-input v-model=\"queryParams.cateName\"></el-input>\n        </div>\n        <div class=\"query-group\">\n          <cms-button size=\"small\" :colorPicker='true' @click=\"query\">查询</cms-button>\n        </div>\n      </section>\n      <cms-sticky>\n      <section class=\"cms-batch\">\n        <cms-button v-prem=\"'/shopManage/shopCategory/save'\" icon=\"add\" type=\"success\" size=\"small\" @click=\"$routerLink('/shopManage/shopCategory/save',$route.query.type,{\n          storeId:$route.query.id,\n          nodeIds:'0'})\">添加分类</cms-button>\n      </section>\n      </cms-sticky>\n      <el-table :data=\"tableData\" :row-style=\"showRow\" style=\"width:100%\" v-loading='loading'>\n        <el-table-column label=\"分类名称\" min-width=\"200\">\n          <template slot-scope=\"scope\">\n            <div class=\"menu-name\" :style=\"{marginLeft:(scope.row._level*16)+'px'}\" v-if=\"iconShow(scope.$index,scope.row)\"\n             @click=\"toggleExpanded(scope.$index)\">\n              <span class=\"tree-ctrl\">\n                <i v-if=\"scope.row._expanded\" class=\"el-icon-caret-right\"></i>\n                <i v-else class=\"el-icon-caret-bottom\"></i>\n              </span>\n              <span>{{scope.row.cateName}}</span>\n            </div>\n            <div v-else :style=\"{marginLeft:(scope.row._level*16)+'px'}\">\n              <span class=\"icon-dot\">○</span>\n              <span>{{scope.row.cateName}}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"排序\" prop=\"sortNum\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.sortNum\" @keyup.enter.native=\"sortNum($event,scope.row.id)\" maxlength=\"2\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"是否显示\" prop=\"isShow\">\n          <template slot-scope=\"scope\">\n            <cms-switch v-model=\"scope.row.isShow\" @change=\"changeShow(scope.row)\"></cms-switch>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"updateTime\" label=\"更新时间\" min-width=\"110\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"!scope.row.updateTime\">{{$moment(scope.row.createTime)}}</span>\n            <span v-if=\"scope.row.updateTime\">{{$moment(scope.row.updateTime)}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width='280' fixed=\"right\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <cms-button icon='add' size='small' type='info'\n              @click=\"$routerLink('/shopManage/shopCategory/save',$route.query.type,{storeId:$route.query.id,nodeIds:scope.row.nodeIds.toString()})\"\n             >新增下级分类\n            </cms-button>\n            <cms-button v-prem=\"'/shopManage/shopCategory/edit'\" icon='edit' size='small' type='info' @click=\"$routerLink('/shopManage/shopCategory/edit','update',{id:scope.row.id,\n              storeId:$route.query.id,\n              nodeIds:scope.row.nodeIds.toString()})\">编辑\n            </cms-button>\n            <cms-button icon='delete' size='small' type='info' @click.stop=\"deleteData(scope.row,scope.$index)\">删除</cms-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport treeToArray from '@/utils/eval.js'\nimport {\n  categorylist,\n  categoryDelete,\n  categoryUpdate,\n  categorySort\n} from '@/api/shop/shopManage.js'\n\nimport list from '@/mixins/list'\nexport default {\n  mixins: [list],\n  data() {\n    return {\n      typeList: [],\n      tableData: [],\n      expandAll: false,\n      queryParams: {\n        storeId: '',\n        cateName: ''\n      },\n      selfId: 0, // 当前点击的id 不可删除\n      columnState: true // 判断行隐藏\n    }\n  },\n  computed: {\n    backUrl() {\n      return this.$route.query.type === 'selfShop' ? '/selfShops/list' : '/shopManage/list'\n    }\n  },\n  methods: {\n    showRow: function(row) {\n      const show = row.row._show\n      row.row._show = show\n      return show ? 'animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;' : 'display:none;'\n    },\n    // 切换下级是否展开\n    toggleExpanded: function(trIndex) {\n      const record = this.tableData[trIndex]\n      if (record._expanded) {\n        // 判断展开\n        if (!record._load) {\n          // 判断是否加载过\n          this.queryParams.parentId = record.id\n          this.loading = true\n          categorylist(this.queryParams).then(res => {\n            if (res.code === 200) {\n              const arr = treeToArray(res.data)\n              for (let i = 0; i < arr.length; i++) {\n                this.tableData.splice(trIndex + (i + 1), 0, arr[i])\n              }\n              record._expanded = false\n              record._load = true\n              this.loading = false\n            }\n          })\n        } else {\n          this.chidView(record, true)\n          record._expanded = false\n        }\n      } else {\n        record._expanded = true\n        this.chidView(record, false)\n      }\n    },\n    chidView(record, state) {\n      // 子集显示，核心判断这个方法\n      const arr = []\n      Array.from(this.tableData).forEach(v => {\n        if (v.nodeIds.indexOf(record.id) > -1 && v.id !== record.id) {\n          v._show = state\n        }\n        arr.push(v)\n      })\n      this.tableData = arr\n    },\n    // 图标显示\n    iconShow(index, record) {\n      return !record.isChild\n    },\n    getTableData(callBack, params) {\n      this.loading = true\n      callBack(params).then(res => {\n        if (res.code === 200) {\n          this.tableData = treeToArray(res.data)\n          this.loading = false\n        }\n      })\n    },\n    changeShow(item) { // 切换是否显示\n      categoryUpdate({\n        id: item.id,\n        cateName: item.cateName,\n        isShow: item.isShow\n      }).then(res => {\n        if (res.code === 200) {\n          this.$successMessage('修改成功')\n        } else {\n          this.$errorMessage('修改失败')\n        }\n      })\n    },\n    sortNum(el, id) { // 修改排序值\n      const val = el.target.value\n      const reg = /^[1-9][0-9]{0,1}$/\n      if (val === '') {\n        return false\n      } else {\n        if (reg.test(val)) {\n          el.target.className = 'el-input__inner'\n          categorySort({ sorts: [{\n            id: id,\n            sortNum: val\n          }] }).then(res => {\n            if (res.code === 200) {\n              this.$successMessage('修改成功')\n              this.getTableData(categorylist, this.queryParams)\n            } else {\n              this.$errorMessage('修改失败')\n            }\n          })\n        } else {\n          el.target.className = 'cms-error el-input__inner'\n          this.$cmsMessage({\n            message: '只能输入1-99的正整数',\n            type: 'error',\n            timer: '1000',\n            fastClick: false\n          })\n        }\n      }\n    },\n    deleteData(row, index) {\n      // 删除菜单\n      this.$confirm('是否确定删除店铺商品分类?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'error'\n      })\n        .then(() => {\n          this.loading = true\n          categoryDelete({ ids: [row.id] }).then(res => {\n            this.loading = false\n            if (res.code === 200) {\n              if (row.isChild) {\n                this.tableData.splice(index, 1)\n              } else {\n                this.queryParams.parentId = ''\n                this.getTableData(categorylist, this.queryParams)\n              }\n              this.$successMessage('删除成功')\n            } else {\n              this.$errorMessage('删除失败,' + res.message)\n            }\n          })\n        })\n        .catch(() => {})\n    },\n    addNew() {\n      this.$router.push({\n        path: '/shopManage/shopCategory/save',\n        query: { storeId: this.$route.query.id }\n      })\n    },\n    getTypeList() {\n      this.getTableData(categorylist, this.queryParams)\n    },\n    query() {\n      this.getTableData(categorylist, this.queryParams)\n    }\n  },\n  activated() {\n    this.queryParams.storeId = this.$route.query.id\n    this.getTableData(categorylist, this.queryParams)\n  },\n  created() {\n    this.queryParams.storeId = this.$route.query.id\n    this.getTableData(categorylist, this.queryParams)\n  }\n}\n</script>\n<style rel=\"stylesheet/css\">\n</style>\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n$color-blue: #188ae2;\n\n.menu-name {\n  position: relative;\n  cursor: pointer;\n  user-select: none;\n}\n.tree-ctrl {\n  cursor: pointer;\n  color: $color-blue;\n  margin-left: 0px;\n}\n.icon-dot {\n  width: 14px;\n  height: 14px;\n  display: inline-block;\n  position: relative;\n  top: 1px;\n  left: 4px;\n  color: $color-blue;\n  font-size: 18px;\n  font-weight: bold;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/shop/shops/shopManage/shopCategory/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":_vm.backUrl,\"type\":_vm.$route.query.type}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-list-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":\"true\"}},[_c('li',[_vm._v(\"显示商品分类列表信息\")]),_vm._v(\" \"),_c('li',[_vm._v(\"可对商品分类进行新增、修改、删除及查看、新增下级商品分类\")])]),_vm._v(\" \"),_c('section',{staticClass:\"cms-list-query\"},[_c('div',{staticClass:\"query-group\"},[_c('label',[_vm._v(\"分类名称\")]),_vm._v(\" \"),_c('el-input',{model:{value:(_vm.queryParams.cateName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"cateName\", $$v)},expression:\"queryParams.cateName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"query-group\"},[_c('cms-button',{attrs:{\"size\":\"small\",\"colorPicker\":true},on:{\"click\":_vm.query}},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('cms-sticky',[_c('section',{staticClass:\"cms-batch\"},[_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/shopManage/shopCategory/save'),expression:\"'/shopManage/shopCategory/save'\"}],attrs:{\"icon\":\"add\",\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){_vm.$routerLink('/shopManage/shopCategory/save',_vm.$route.query.type,{\n        storeId:_vm.$route.query.id,\n        nodeIds:'0'})}}},[_vm._v(\"添加分类\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"row-style\":_vm.showRow}},[_c('el-table-column',{attrs:{\"label\":\"分类名称\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.iconShow(scope.$index,scope.row))?_c('div',{staticClass:\"menu-name\",style:({marginLeft:(scope.row._level*16)+'px'}),on:{\"click\":function($event){_vm.toggleExpanded(scope.$index)}}},[_c('span',{staticClass:\"tree-ctrl\"},[(scope.row._expanded)?_c('i',{staticClass:\"el-icon-caret-right\"}):_c('i',{staticClass:\"el-icon-caret-bottom\"})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.cateName))])]):_c('div',{style:({marginLeft:(scope.row._level*16)+'px'})},[_c('span',{staticClass:\"icon-dot\"},[_vm._v(\"○\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.cateName))])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"排序\",\"prop\":\"sortNum\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"maxlength\":\"2\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.sortNum($event,scope.row.id)}},model:{value:(scope.row.sortNum),callback:function ($$v) {_vm.$set(scope.row, \"sortNum\", $$v)},expression:\"scope.row.sortNum\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否显示\",\"prop\":\"isShow\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('cms-switch',{on:{\"change\":function($event){_vm.changeShow(scope.row)}},model:{value:(scope.row.isShow),callback:function ($$v) {_vm.$set(scope.row, \"isShow\", $$v)},expression:\"scope.row.isShow\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"updateTime\",\"label\":\"更新时间\",\"min-width\":\"110\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.updateTime)?_c('span',[_vm._v(_vm._s(_vm.$moment(scope.row.createTime)))]):_vm._e(),_vm._v(\" \"),(scope.row.updateTime)?_c('span',[_vm._v(_vm._s(_vm.$moment(scope.row.updateTime)))]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"280\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('cms-button',{attrs:{\"icon\":\"add\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.$routerLink('/shopManage/shopCategory/save',_vm.$route.query.type,{storeId:_vm.$route.query.id,nodeIds:scope.row.nodeIds.toString()})}}},[_vm._v(\"新增下级分类\\n          \")]),_vm._v(\" \"),_c('cms-button',{directives:[{name:\"prem\",rawName:\"v-prem\",value:('/shopManage/shopCategory/edit'),expression:\"'/shopManage/shopCategory/edit'\"}],attrs:{\"icon\":\"edit\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.$routerLink('/shopManage/shopCategory/edit','update',{id:scope.row.id,\n            storeId:_vm.$route.query.id,\n            nodeIds:scope.row.nodeIds.toString()})}}},[_vm._v(\"编辑\\n          \")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"icon\":\"delete\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleteData(scope.row,scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2dc9fe85\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/shop/shops/shopManage/shopCategory/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2dc9fe85\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n  require(\"!!../../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2dc9fe85\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=1!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2dc9fe85\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2dc9fe85\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shop/shops/shopManage/shopCategory/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([25],{N551:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("HzJ8"),r=a.n(s),o=a("3cXf"),i=a.n(o),l=a("GBzI"),c={data:function(){return{checkLocalItem:"",items0:[],items1:[],items2:[],items3:[],checkIds:[],categoryId:0}},computed:{categoryName:function(){for(var t="",e=0;e<this.checkIds.length;e++)""!==this.checkIds[e].name&&0===e?t=this.checkIds[e].name:""!==this.checkIds[e].name&&(t=t+" > "+this.checkIds[e].name);return t},LocalCategoryList:function(){var t=localStorage.getItem("LocalCategoryList"),e=[];return t&&(e=JSON.parse(t)),e}},methods:{getCategoryList:function(t,e){var a=this;if(0===e)this.items2=[],this.items3=[],this.$set(this.checkIds,1,{name:"",id:""}),this.$set(this.checkIds,2,{name:"",id:""}),this.$set(this.checkIds,3,{name:"",id:""});else if(1===e)this.items3=[],this.$set(this.checkIds,2,{name:"",id:""}),this.$set(this.checkIds,3,{name:"",id:""});else if(2===e)this.$set(this.checkIds,3,{name:"",id:""});else{if(3===e)return!0;this.checkIds=[{name:"",id:""},{name:"",id:""},{name:"",id:""},{name:"",id:""}]}Object(l.e)({parentId:t}).then(function(t){if(0===e)a.items1=t.data;else if(1===e)a.items2=t.data;else if(2===e)a.items3=t.data;else{if(3===e)return!1;a.items0=t.data}})},nextStep:function(){this.setLocalCategoryList(),this.$store.dispatch("setCateGoryInfo",{categoryId:this.categoryId,parentInfo:this.checkIds})},getLocalCategoryList:function(t){var e=this;t.forEach(function(t,a){""!==t.id&&(e.getCategoryList(t.id,a),e.categoryId=t.id)}),this.checkIds=this.$cms.deepCopy(t)},setLocalCategoryList:function(){if(localStorage.getItem("LocalCategoryList")){var t=JSON.parse(localStorage.getItem("LocalCategoryList")),e=!0,a={id:t.length+1,name:this.categoryName,items:this.checkIds},s=!0,o=!1,l=void 0;try{for(var c,n=r()(t);!(s=(c=n.next()).done);s=!0){if(c.value.name===a.name){e=!1;break}}}catch(t){o=!0,l=t}finally{try{!s&&n.return&&n.return()}finally{if(o)throw l}}if(e){t.push(a);var d=i()(t);localStorage.setItem("LocalCategoryList",d)}}else{var u={id:1,name:this.categoryName,items:this.checkIds},p=i()([u]);localStorage.setItem("LocalCategoryList",p)}},setCheckItem:function(t,e,a){this.checkLocalItem="",this.categoryId=t.id,this.$set(this.checkIds,a,{name:t.cateName,id:t.id}),this.getCategoryList(t.id,a)}},activated:function(){this.$store.state.product.cache||this.getCategoryList()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-form-layout "},[a("div",{staticClass:"commonly-class"},[a("label",{staticClass:"commonly-class-label"},[t._v("常用分类")]),t._v(" "),a("el-select",{staticClass:"commonly-class-select",attrs:{"value-key":"id"},on:{change:t.getLocalCategoryList},model:{value:t.checkLocalItem,callback:function(e){t.checkLocalItem=e},expression:"checkLocalItem"}},t._l(t.LocalCategoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.items}})}),1)],1),t._v(" "),a("div",{staticClass:"step-class-warpper"},[a("div",{staticClass:"step-class-box"},[a("div",{staticClass:"check-class-title"},[t._v("您当前选择的分类：\n      "),a("span",{staticClass:"blue"},[t._v("\n        "+t._s(t.categoryName)+"\n      ")])]),t._v(" "),a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items0,function(e,s){return a("li",{key:e.id,staticClass:"items",class:[t.checkIds[0]&&t.checkIds[0].id===e.id?"active":""],on:{click:function(a){t.setCheckItem(e,s,0)}}},[t._v(t._s(e.cateName))])}),0)]),t._v(" "),t.items1.length>0?a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items1,function(e,s){return a("li",{key:e.id,staticClass:"items",class:t.checkIds[1]&&t.checkIds[1].id===e.id?"active":"",on:{click:function(a){t.setCheckItem(e,s,1)}}},[t._v(t._s(e.cateName))])}),0)]):t._e(),t._v(" "),t.items2.length>0?a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items2,function(e,s){return a("li",{key:e.id,staticClass:"items",class:t.checkIds[2]&&t.checkIds[2].id===e.id?"active":"",on:{click:function(a){t.setCheckItem(e,s,2)}}},[t._v(t._s(e.cateName))])}),0)]):t._e(),t._v(" "),t.items3.length>0?a("section",{staticClass:"step-class-group"},[a("div",{staticClass:"class-group-header"},[t._v("\n          请选择分类\n        ")]),t._v(" "),a("ul",{staticClass:"class-group-body"},t._l(t.items3,function(e,s){return a("li",{key:e.id,staticClass:"items",class:t.checkIds[3]&&t.checkIds[3].id===e.id?"active":"",on:{click:function(a){t.setCheckItem(e,s,3)}}},[t._v(t._s(e.cateName))])}),0)]):t._e()])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",padding:"15px 0"}},[a("cms-button",{attrs:{disabled:0===t.categoryId},on:{click:t.nextStep}},[t._v("下一步，填写商品信息")])],1)])},staticRenderFns:[]};var d=a("C7Lr")(c,n,!1,function(t){a("ntES")},null,null).exports,u=a("aA9S"),p=a.n(u),m=a("OMN4"),v=a.n(m),f=a("x1ym"),h=a("3jsV"),g=a("AsmT"),_=a("NyU8"),b=a("Jpdf"),y={product:{storeId:"",storeCategoryId:null,categoryId:"",name:"",virtualCardTplId:null,itemNumber:"",brandId:"",summary:"",summaryColor:"#ff0000",templeteId:1,weight:"",volume:"",sellGoodsSale:!0,isInvoice:!0,status:3},productTypeId:"",storeCategoryIds:[],imageResources:[{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""},{remark:"",imgResourceId:"",url:""}],videoResources:[{remark:"",vdResourceId:"",url:""}],txt:{pcTxt:"",mobileTxt:"",topTplId:null,bottomTplId:null},ext:{maxDeductible:0,unit:"件",keyword:"",evaluation:"",storeServiceId:""}},k={components:{draggable:a.n(b).a},data:function(){var t=this;return{loading:!1,status:!1,fixed:!0,txtModel:"pc",storeItems:[],roleList:["超级管理员","运营"],options:[],props:{value:"id",label:"cateName",children:"childs",disabled:"isAuth"},keywordItems:[],evaluationItems:[],formData:p()({},y),categoryName:"",isVirtual:!1,rules:{"product.storeId":[f.a.required("必须选择一个店铺","change")],"product.categoryId":[f.a.required("必须选择一个商品分类")],"product.itemNumber":[f.a.custom(function(e,a,s){""===a?s():Object(_.a)({itemNumber:a,storeId:t.formData.product.storeId}).then(function(t){t.data?s():s(new Error("货号重复"))})})],"product.name":[f.a.required("请输入商品名称"),f.a.max(100,"最多只能输入100个字符")],"product.summary":[f.a.max(100,"最多只能输入100个字符")],"product.volume":[f.a.float(),f.a.decimal()],"product.weight":[f.a.float(),f.a.decimal()],"ext.maxDeductible":[f.a.float()],imageResources:[f.a.required("至少上传一张商品图片")],"product.sellGoodsSale":[f.a.required()],"product.isInvoice":[f.a.required()]},errorMessage:{},area:""}},methods:{initData:function(){var t=this;this.formData.product.categoryId=this.$store.state.product.categoryId,this.categoryName=this.$store.state.product.categoryName,this.getRelevantInfos(),Object(l.c)({id:this.formData.product.categoryId}).then(function(e){var a=e.data.productTypeId;t.formData.productTypeId=a,t.isVirtual=e.data.virtual})},selectStoreCategory:function(t){this.getStroeCategory(t)},getStroeCategory:function(t){var e=this;Object(g.s)({storeId:t}).then(function(t){e.options=[];e.options=[{id:null,cateName:"默认分类"}].concat(t.data)})},getStoreCategoryId:function(t){this.formData.product.storeCategoryId=t[t.length-1]},getRelevantInfos:function(){var t=this;v.a.all([Object(h.d)({page:1,size:99999})]).then(v.a.spread(function(e){t.storeItems=e.data.content}))},validateImgs:function(){var t=this,e=!1;this.formData.imageResources;var a=!0,s=!1,o=void 0;try{for(var i,l=r()(this.formData.imageResources);!(a=(i=l.next()).done);a=!0){""!==i.value.imgResourceId&&(e=!0)}}catch(t){s=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw o}}return!!e||(this.errorMessage={},setTimeout(function(){t.$set(t.errorMessage,"imageResources","至少上传一张商品图片"),t.errorPosition("imageResources")},1),!1)},prevStep:function(){this.$store.dispatch("setCache",!0),this.$store.dispatch("setStep","step1")},nextStep:function(){var t=this;this.$refs.form.validate(function(e,a){if(e){if(t.validateImgs()){var s=t.$cms.deepCopy(t.formData);s.ext.keyword=s.ext.keyword.join(","),s.ext.evaluation=s.ext.evaluation.join(","),s.product.storeCategoryId=s.storeCategoryIds[s.storeCategoryIds.length-1],t.$store.dispatch("setBaseProductInfo",s).then(function(e){t.$store.dispatch("setStep","step3")})}}else{var r="";for(var o in a)if(a.hasOwnProperty(o)){r=o.replace(".","_");break}t.errorPosition(r)}})},errorPosition:function(t){var e=document.querySelector("#layout"),a=this.$refs[t].$el;return e.scrollTop=a.offsetTop-350,!1},getProductVideo:function(t,e){this.$set(this.formData.videoResources,e,{remark:"",vdResourceId:t[0].id,url:t[0].url})},getProductImg:function(t,e){this.$set(this.formData.imageResources,e,{remark:"",imgResourceId:t[0].id,url:t[0].url}),this.errorMessage={}},imgMove:function(t,e){if("next"===e){if(0===t)return!1;var a=this.formData.imageResources[t-1];this.$set(this.formData.imageResources,t-1,this.formData.imageResources[t]),this.$set(this.formData.imageResources,t,a)}else{if(4===t)return!1;var s=this.formData.imageResources[t+1];this.$set(this.formData.imageResources,t+1,this.formData.imageResources[t]),this.$set(this.formData.imageResources,t,s)}},imgDelete:function(t){this.$set(this.formData.imageResources,t,{remark:"",imgResourceId:"",url:""})}},activated:function(){this.$store.state.product.cache||(this.formData=this.$cms.deepCopy(y)),this.initData()},mounted:function(){var t=this;document.querySelector("#layout").addEventListener("scroll",function(e){var a=e.target.scrollTop,s=e.target.clientHeight,r=e.target.scrollHeight;!1===t.fixed&&(a+=70),parseInt(a)>r-s-70?t.fixed=!1:t.fixed=!0})}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cms-form-layout loading-top product-main-warpper"},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.formData,"label-width":"210px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("h3",{staticClass:"cms-segmentation"},[t._v("基本信息")]),t._v(" "),a("el-form-item",{attrs:{label:"商品分类",prop:"product.categoryId"}},[t._v("\n      "+t._s(t.categoryName)+"\n    ")]),t._v(" "),a("el-form-item",{ref:"product_storeId",attrs:{label:"选择店铺",prop:"product.storeId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},on:{change:t.selectStoreCategory},model:{value:t.formData.product.storeId,callback:function(e){t.$set(t.formData.product,"storeId",e)},expression:"formData.product.storeId"}},t._l(t.storeItems,function(t){return a("el-option",{key:t.id,attrs:{label:t.storeName,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"店铺分类",prop:"product.storeCategoryId"}},[a("el-cascader",{attrs:{options:t.options,props:t.props,"change-on-select":!0,placeholder:"请选择分类"},model:{value:t.formData.storeCategoryIds,callback:function(e){t.$set(t.formData,"storeCategoryIds",e)},expression:"formData.storeCategoryIds"}})],1),t._v(" "),a("el-form-item",{ref:"product_name",attrs:{label:"商品名称",prop:"product.name"}},[a("el-input",{model:{value:t.formData.product.name,callback:function(e){t.$set(t.formData.product,"name",e)},expression:"formData.product.name"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("商品名称长度控制在100个字符以内")])],1),t._v(" "),t.isVirtual?a("el-form-item",{attrs:{label:"虚拟规格商品",prop:"product.virtualCardTplId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.product.virtualCardTplId,callback:function(e){t.$set(t.formData.product,"virtualCardTplId",e)},expression:"formData.product.virtualCardTplId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.product.templeteId,callback:function(e){t.$set(t.formData.product,"templeteId",e)},expression:"formData.product.templeteId"}},[a("el-option",{attrs:{label:"默认模板",value:null}})],1)],1),t._v(" "),a("span",{staticClass:"gray"},[t._v("选择虚拟库（卡密）模板即可，点击新建模板增加")])],1):t._e(),t._v(" "),a("el-form-item",{ref:"product_itemNumber",attrs:{label:"货号",prop:"product.itemNumber"}},[a("el-input",{model:{value:t.formData.product.itemNumber,callback:function(e){t.$set(t.formData.product,"itemNumber",e)},expression:"formData.product.itemNumber"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("货号用于商家管理商品的一种编号，仅供商家使用，最多输入30个字符")])],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",prop:"product.brandId"}},[a("cms-brand",{model:{value:t.formData.product.brandId,callback:function(e){t.$set(t.formData.product,"brandId",e)},expression:"formData.product.brandId"}},[a("cms-button",{attrs:{type:"info",size:"small"}},[t._v("选择品牌")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品简介",prop:"product.summary"}},[a("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.formData.product.summary,callback:function(e){t.$set(t.formData.product,"summary",e)},expression:"formData.product.summary"}}),t._v(" "),a("el-color-picker",{staticClass:"product-color-picker",model:{value:t.formData.product.summaryColor,callback:function(e){t.$set(t.formData.product,"summaryColor",e)},expression:"formData.product.summaryColor"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("商品简介显示在商品标题下方,长度不超过100字符，右侧的颜色板可设置显示颜色\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"运费模板",prop:"product.templeteId"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.product.templeteId,callback:function(e){t.$set(t.formData.product,"templeteId",e)},expression:"formData.product.templeteId"}},[a("el-option",{attrs:{label:"默认模板",value:1}})],1),t._v(" "),a("div",[a("table",{staticClass:"sku-table",staticStyle:{width:"380px","margin-top":"10px"}},[a("tr",[a("th",[t._v("运送方式")]),t._v(" "),a("th",[t._v("运送到")]),t._v(" "),a("th",[t._v("首件(个)")]),t._v(" "),a("th",[t._v("运费")]),t._v(" "),a("th",[t._v("续建(个)")]),t._v(" "),a("th",[t._v("续费")])]),t._v(" "),a("tr",[a("td",[t._v("快递")]),t._v(" "),a("td",[t._v("全国")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("8")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("5")])])])])],1),t._v(" "),a("el-form-item",{ref:"product_volume",attrs:{label:"体积",prop:"product.volume"}},[a("el-input",{model:{value:t.formData.product.volume,callback:function(e){t.$set(t.formData.product,"volume",e)},expression:"formData.product.volume"}},[a("template",{slot:"append"},[t._v("立方米")])],2)],1),t._v(" "),a("el-form-item",{ref:"product_weight",attrs:{label:"重量",prop:"product.weight"}},[a("el-input",{model:{value:t.formData.product.weight,callback:function(e){t.$set(t.formData.product,"weight",e)},expression:"formData.product.weight"}},[a("template",{slot:"append"},[t._v("kg")])],2)],1),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("商品相册")]),t._v(" "),a("el-form-item",{attrs:{label:"短视频",prop:"checked"}},[a("cms-picture-zone",{attrs:{type:"video",viewType:"media"},on:{change:t.getProductVideo}},[a("cms-button",{attrs:{type:"info",size:"small"}},[t._v("选择视频")])],1)],1),t._v(" "),a("el-form-item",{ref:"imageResources",staticClass:"imageResource",attrs:{label:"商品相册",prop:"imageResources",error:t.errorMessage.imageResources}},[a("div",{staticClass:"clearfix"},[a("draggable",{attrs:{options:{animation:150}},model:{value:t.formData.imageResources,callback:function(e){t.$set(t.formData,"imageResources",e)},expression:"formData.imageResources"}},t._l(t.formData.imageResources,function(e,s){return a("cms-picture-zone",{key:s,staticClass:"product-img-box",attrs:{preview:!1,index:s},on:{change:t.getProductImg}},[a("div",{staticClass:"product-img-warpper"},[t.formData.imageResources[s]&&""!==t.formData.imageResources[s].url?a("img",{attrs:{src:t.$cms.filterUrl(t.formData.imageResources[s].url),alt:""}}):a("span",{staticClass:"img-plus el-icon-plus"})]),t._v(" "),a("div",{staticClass:"img-move-bar",on:{click:function(t){t.stopPropagation()}}},[a("span",{staticClass:"el-icon-arrow-left next",class:[0===s?"disable":""],on:{click:function(e){e.stopPropagation(),t.imgMove(s,"next")}}}),t._v(" "),a("span",{staticClass:"el-icon-arrow-right next",class:[4===s?"disable":""],on:{click:function(e){e.stopPropagation(),t.imgMove(s,"prev")}}}),t._v(" "),a("span",{staticClass:"el-icon-close delete",on:{click:function(e){e.stopPropagation(),t.imgDelete(s)}}})])])}),1)],1),t._v(" "),a("span",{staticClass:"gray",staticStyle:{"max-width":"490px"}},[t._v("\n        用于显示在商品详情页介绍图，最多可支持7张，第一张默认为商品主图用于显示商品列表，拖动照片可调整图片顺序\n      ")])]),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("详细信息")]),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.txtModel,callback:function(e){t.txtModel=e},expression:"txtModel"}},[a("el-radio-button",{attrs:{label:"pc"}},[t._v("PC端")]),t._v(" "),a("el-radio-button",{attrs:{label:"mobile"}},[t._v("移动端")])],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"pc"==t.txtModel,expression:"txtModel=='pc'"}],attrs:{label:"商品详情",prop:"checked"}},[a("cms-editor",{model:{value:t.formData.txt.pcTxt,callback:function(e){t.$set(t.formData.txt,"pcTxt",e)},expression:"formData.txt.pcTxt"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"mobile"==t.txtModel,expression:"txtModel=='mobile'"}],attrs:{label:"商品详情",prop:"checked"}},[a("cms-editor",{model:{value:t.formData.txt.mobileTxt,callback:function(e){t.$set(t.formData.txt,"mobileTxt",e)},expression:"formData.txt.mobileTxt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"顶部版式",prop:"roleName"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.roleName,callback:function(e){t.$set(t.formData,"roleName",e)},expression:"formData.roleName"}},t._l(t.roleList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),a("span",{staticClass:"gray"},[t._v("\n        选中的版式将插入至PC端商品详情最顶部\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"底部版式",prop:"roleName"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.formData.roleName,callback:function(e){t.$set(t.formData,"roleName",e)},expression:"formData.roleName"}},t._l(t.roleList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),a("span",{staticClass:"gray"},[t._v("\n        选中的版式将插入至PC端商品详情最底部\n      ")])],1),t._v(" "),a("h3",{staticClass:"cms-segmentation"},[t._v("其他信息")]),t._v(" "),a("el-form-item",{attrs:{label:"商品单位",prop:"ext.unit"}},[a("el-input",{attrs:{maxlength:"5"},model:{value:t.formData.ext.unit,callback:function(e){t.$set(t.formData.ext,"unit",e)},expression:"formData.ext.unit"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("可输入件、盒、份、个，默认为件\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品服务",prop:"ext.storeServiceId"}},[a("el-checkbox-group",{model:{value:t.formData.ext.storeServiceId,callback:function(e){t.$set(t.formData.ext,"storeServiceId",e)},expression:"formData.ext.storeServiceId"}},[a("el-checkbox",[t._v("七天无理由退货")])],1)],1),t._v(" "),a("el-form-item",{ref:"product_sellGoodsSale",attrs:{label:"是否为销售商品出售",prop:"product.sellGoodsSale"}},[a("cms-switch",{model:{value:t.formData.product.sellGoodsSale,callback:function(e){t.$set(t.formData.product,"sellGoodsSale",e)},expression:"formData.product.sellGoodsSale"}})],1),t._v(" "),a("el-form-item",{ref:"product_isInvoice",attrs:{label:"是否为提供发票",prop:"product.isInvoice"}},[a("cms-switch",{model:{value:t.formData.product.isInvoice,callback:function(e){t.$set(t.formData.product,"isInvoice",e)},expression:"formData.product.isInvoice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品关键词",prop:"ext.keyword"}},[a("el-select",{attrs:{size:"mini","multiple-limit":5,multiple:"","default-first-option":"","allow-create":"",filterable:"",placeholder:"请输入商品关键词"},model:{value:t.formData.ext.keyword,callback:function(e){t.$set(t.formData.ext,"keyword",e)},expression:"formData.ext.keyword"}},t._l(t.keywordItems,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("span",{staticClass:"gray"},[t._v("设置检索关键词,用于商品搜索,最多支持5个")])],1),t._v(" "),a("el-form-item",{attrs:{label:"评价标签",prop:"ext.evaluation"}},[a("el-select",{attrs:{size:"mini","multiple-limit":10,multiple:"","default-first-option":"","allow-create":"",filterable:"",placeholder:"请输入评价标签"},model:{value:t.formData.ext.evaluation,callback:function(e){t.$set(t.formData.ext,"evaluation",e)},expression:"formData.ext.evaluation"}},t._l(t.evaluationItems,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("span",{staticClass:"gray"},[t._v("买家评价商品时，可对商品选择对应标签进行评价，如性价比高，最多支持10个关键词\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"发布状态",prop:"roleName"}},[a("el-radio-group",{model:{value:t.formData.product.status,callback:function(e){t.$set(t.formData.product,"status",e)},expression:"formData.product.status"}},[a("el-radio",{attrs:{label:3}},[t._v("立即发布")]),t._v(" "),a("el-radio",{attrs:{label:8}},[t._v("入库")])],1),t._v(" "),a("span",{staticClass:"gray"},[t._v("选择立即发布，商品进入审核、上架阶段，选择入库则商品进入店铺商 品仓库内，仅商家自己可见\n      ")])],1)],1),t._v(" "),a("div",{staticClass:"product-footer",class:[t.fixed?"fixed-footer":""]},[a("cms-button",{staticStyle:{"background-color":"#f7f7f7",color:"#444444"},on:{click:t.prevStep}},[t._v("上一步")]),t._v(" "),a("cms-button",{directives:[{name:"color",rawName:"v-color"}],staticStyle:{background:"#efae00"},on:{click:t.nextStep}},[t._v("下一步,设置规格/属性信息")])],1)],1)},staticRenderFns:[]};var C=a("C7Lr")(k,I,!1,function(t){a("c9gC")},"data-v-8df75118",null).exports,x=a("NDfU"),S=[],D=0,$=[];function w(){$[D]++,$[D]>=S[D].length&&($[D]=0,--D>=0&&w(),D=S.length-1)}var P={coreModel:{salePrice:"",marketPrice:0,costPrice:0,inventory:1e4,warningValue:10,hasSku:!1},skuTypeAttrs:[],skus:[],proTypeAttrs:[]},V={data:function(){return{loading:!1,status:!1,fixed:!0,popoverVisible:!1,popoverForm:{name:"",attrValues:""},loadingTitle:"正在保存,请勿进行其他操作",formData:p()({},P),batch:{salesPrice:"",costPrice:"",inventory:"",marketPrice:"",warning:""},rules:{"coreModel.salePrice":[f.a.required("必须输入一个价格"),f.a.float()],"coreModel.inventory":[f.a.required("必须设置一个库存"),f.a.number()],"coreModel.hasSku":[f.a.required()]},customStandardValue:{},customAttributeValue:{},checkSaleStandardIds:[],checkProductStandardIds:[],properties:[],attributes:[],saleStandardInfos:[],productStandardInfos:[],skus:[],attributeGroups:{},productTypeId:0,storeId:0}},computed:{allCheckedLength:function(){var t=0;return this.properties.forEach(function(e){t+=e.attrValueList.length}),t}},methods:{getProductInfo:function(t){var e=this;this.productTypeId=this.$store.state.product.productTypeId,this.storeId=this.$store.state.product.storeId,Object(x.f)({productTypeId:this.productTypeId,storeId:this.storeId}).then(function(t){if(t.data&&t.data.saleAttrs.length>0){e.saleStandardInfos=t.data.saleAttrs;var a=[];e.saleStandardInfos.map(function(t){a.push({valueType:t.valueType,attrGroupName:t.attrGroupName,name:t.name,id:t.id,attrValueList:[]})}),e.properties=a,e.productStandardInfos=t.data.nsaleAttrs}e.loading=!1})},setProperties:function(t){var e=this,a=this.checkSaleStandardIds;this.saleStandardInfos.forEach(function(t,s){var r=[];t.attrValueList.forEach(function(t,e){a.indexOf(t.id)>-1&&r.push(t)}),e.properties[s].attrValueList=r})},setProductInfos:function(t,e,a){var s=!0,o={groupName:e.attrGroupName,attrName:e.name,attrVc:t.attrCode,proTypeAttrId:e.id};if(o.attrVc=3===a?t.target.value:t.attrCode,0===this.attributes.length)this.attributes.push(o);else{var i=!0,l=!1,c=void 0;try{for(var n,d=r()(this.attributes);!(i=(n=d.next()).done);i=!0){var u=n.value;if(u.proTypeAttrId===o.proTypeAttrId){var p=u.attrVc.split(",");if(1===a){var m=p.indexOf(o.attrVc);m>-1?p.splice(m,1):p.push(o.attrVc),u.attrVc=p.join(",")}else u.attrVc=o.attrVc;s=!1;break}}}catch(t){l=!0,c=t}finally{try{!i&&d.return&&d.return()}finally{if(l)throw c}}s&&this.attributes.push(o)}},createdSkus:function(){var t=[];this.properties.forEach(function(e){t.push(e.attrValueList)}),this.skus=function(t){var e=[];S=[],D=[],$=[];for(var a=0,s=0,r=0;r<t.length;r++)t[r].length>0?($[s]=0,S[s]=t[r],s++):a++;if(a===t.length)return[];D=S.length-1;for(var o=1,i=0;i<S.length;i++)o*=S[i].length;for(var l=0;l<o;l++){for(var c={name:[],salesPrice:"0.0",marketPrice:"0.0",costPrice:"0.0",inventory:"0",warning:"0",id:"",attrCodes:[]},n=0;n<S.length;n++)c.name.push(S[n][$[n]].attrValue),c["properties"+n]=S[n][$[n]].attrValue,c.attrCodes.push(S[n][$[n]].attrCode);e.push(c),w()}return e}(t)},batchPrice:function(t){var e=this;this.skus.forEach(function(a){a[t]=e.batch[t]})},addCustomStandardItem:function(t){var e=this;this.$refs.dialogForm.validate(function(t){if(!t)return!1;Object(_.e)({attrGroupName:"自定义添加",name:e.popoverForm.name,attrValues:e.popoverForm.attrValues,typeId:e.productTypeId,storeId:e.storeId,valueType:2}).then(function(t){e.saleStandardInfos.push(t.data),e.properties.push({valueType:t.data.valueType,attrGroupName:t.data.attrGroupName,name:t.data.name,id:t.data.id,attrValueList:[]}),e.popoverVisible=!1,e.popoverForm.name="",e.popoverForm.attrValues=""})})},clearCustomStandardItem:function(){this.popoverVisible=!1,this.popoverForm.name="",this.popoverForm.attrValues=""},addCustomStandard:function(t){var e=this,a={attrValue:this.customStandardValue["value"+t],storeId:this.storeId,attrId:this.saleStandardInfos[t].id};Object(_.c)(a).then(function(a){if(200===a.code){var s={attrCode:a.data.attrCode,attrValue:a.data.attrValue,id:a.data.id,attrType:a.data.attrType,valueResourceId:""};e.saleStandardInfos[t].attrValueList.push(s)}})},addCustomAttribute:function(t){var e=this,a={name:this.customAttributeValue["value"+t],attrGroupName:this.productStandardInfos[t].attrGroupName,attrValues:"no",typeId:this.productTypeId,storeId:this.storeId};Object(_.b)(a).then(function(a){var s={attrGroupName:a.data.attrGroupName,attrValueList:a.data.attrValueList,custom:a.data.custom,id:a.data.id,name:a.data.name,valueType:a.data.valueType,attrType:a.data.attrType};e.productStandardInfos[t].attrs.push(s)})},deleteCustomStandard:function(t,e){var a=this;Object(x.a)({ids:[t.id]}).then(function(t){200===t.code&&a.saleStandardInfos.splice(e,1)})},deleteCustomStandardValue:function(t,e,a){var s=this;Object(_.d)({ids:[t.id]}).then(function(r){if(200===r.code){var o=s.checkSaleStandardIds.findIndex(function(e){return e.id===t.id});s.checkSaleStandardIds.splice(o,1),s.setProperties(s.checkSaleStandardIds),s.saleStandardInfos[e].attrValueList.splice(a,1)}})},deleteCustomAttribute:function(t,e,a){var s=this;Object(x.a)({ids:[t.id]}).then(function(t){200===t.code&&s.productStandardInfos[e].attrs.splice(a,1)})},getStandardImg:function(t,e,a){this.$set(this.saleStandardInfos[a.parentIndex].attrValueList[e],"valueResourceId",t[0].id),this.$set(this.saleStandardInfos[a.parentIndex].attrValueList[e],"url",t[0].url)},prevStep:function(){this.$store.dispatch("setCache",!0),this.$store.dispatch("setStep","step2")},save:function(){var t=this;this.$refs.form.validate(function(e,a){if(e){var s=t.$cms.deepCopy(t.formData);s.skuTypeAttrs=t.properties,s.skus=t.skus,s.proTypeAttrs=t.attributes,t.$store.dispatch("setStandardInfo",s).then(function(e){t.loading=!0,Object(_.n)(e).then(function(e){t.loading=!1,200===e.code?t.$successMessage("新增成功!"):t.$errorMessage("添加失败")})})}else{var r="";for(var o in a)if(a.hasOwnProperty(o)){r=o.replace(".","_");break}t.errorPosition(r)}})},errorPosition:function(t){var e=document.querySelector("#layout"),a=this.$refs[t].$el;return e.scrollTop=a.offsetTop-350,!1},restData:function(){this.formData=this.$cms.deepCopy(P),this.customStandardValue={},this.customAttributeValue={},this.checkSaleStandardIds=[],this.checkProductStandardIds=[],this.properties=[],this.attributes=[],this.saleStandardInfos=[],this.productStandardInfos=[],this.skus=[],this.attributeGroups={}}},watch:{allCheckedLength:{handler:function(){this.createdSkus()}}},activated:function(){var t=this.$store.state.product.productTypeId,e=this.$store.state.product.storeId;t===this.productTypeId&&e===this.storeId||(this.restData(),this.getProductInfo())},mounted:function(){var t=this;document.querySelector("#layout").addEventListener("scroll",function(e){var a=e.target.scrollTop,s=e.target.clientHeight,r=e.target.scrollHeight;!1===t.fixed&&(a+=70),parseInt(a)>r-s-70?t.fixed=!1:t.fixed=!0})}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cms-form-layout loading-top product-main-warpper",attrs:{"element-loading-text":t.loadingTitle}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.formData,"label-width":"210px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{ref:"coreModel_salePrice",attrs:{label:"售价",prop:"coreModel.salePrice"}},[a("el-input",{model:{value:t.formData.coreModel.salePrice,callback:function(e){t.$set(t.formData.coreModel,"salePrice",e)},expression:"formData.coreModel.salePrice"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("价格控制在0.01~99999999之间的数字，且不能高于市场价，如商品设 置SKU，此价格自动记录为最低SKU价格\n      ")])],1),t._v(" "),a("el-form-item",{ref:"product_name",attrs:{label:"市场价",prop:"coreModel.marketPrice"}},[a("el-input",{model:{value:t.formData.coreModel.marketPrice,callback:function(e){t.$set(t.formData.coreModel,"marketPrice",e)},expression:"formData.coreModel.marketPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"成本价",prop:"coreModel.costPrice"}},[a("el-input",{model:{value:t.formData.coreModel.costPrice,callback:function(e){t.$set(t.formData.coreModel,"costPrice",e)},expression:"formData.coreModel.costPrice"}})],1),t._v(" "),a("el-form-item",{ref:"coreModel_inventory",attrs:{label:"库存量",prop:"coreModel.inventory"}},[a("el-input",{model:{value:t.formData.coreModel.inventory,callback:function(e){t.$set(t.formData.coreModel,"inventory",e)},expression:"formData.coreModel.inventory"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("库存量控制在1~99999999之间的整数，如商品设置SKU，库存量自动计 算为所有SKU库存总和\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"库存预警值",prop:"coreModel.warningValue"}},[a("el-input",{model:{value:t.formData.coreModel.warningValue,callback:function(e){t.$set(t.formData.coreModel,"warningValue",e)},expression:"formData.coreModel.warningValue"}}),t._v(" "),a("span",{staticClass:"gray"},[t._v("库存预警值必须少于库存量，如商品设置SKU，预警值自动计算为所有 SKU设定的预警值总和\n      ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品规格",prop:"coreModel.hasSku"}},[a("div",[a("el-checkbox",{model:{value:t.formData.coreModel.hasSku,callback:function(e){t.$set(t.formData.coreModel,"hasSku",e)},expression:"formData.coreModel.hasSku"}},[t._v("启用商品规格")]),t._v(" "),a("span",{staticClass:"gray"},[t._v("启用商品规格、商品的价格、库存、以SKU信息为准")])],1),t._v(" "),t.formData.coreModel.hasSku?a("el-checkbox-group",{on:{change:t.setProperties},model:{value:t.checkSaleStandardIds,callback:function(e){t.checkSaleStandardIds=e},expression:"checkSaleStandardIds"}},[t._l(t.saleStandardInfos,function(e,s){return a("section",{key:e.id,staticClass:"standard-group"},[a("div",{staticClass:"standard-group-header"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"standard-group-name"},[t._v(t._s(e.name))]),t._v(" "),4==e.valueType?a("span",{staticClass:"standard-group-desc"},[t._v("( 该规格需要上传图片 )")]):t._e(),t._v(" "),2===e.attrType?a("span",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteCustomStandard(e,s)}}}):t._e()]),t._v(" "),a("div",{staticClass:"fr"},[a("label",{staticClass:"standard-group-desc"},[t._v("规格值名称")]),t._v(" "),a("el-input",{staticStyle:{width:"110px"},model:{value:t.customStandardValue["value"+s],callback:function(e){t.$set(t.customStandardValue,"value"+s,e)},expression:"customStandardValue['value'+index]"}}),t._v(" "),a("cms-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){t.addCustomStandard(s)}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"standard-group-body"},[4===e.valueType?a("ul",{staticClass:"clearfix"},t._l(e.attrValueList,function(e,r){return a("li",{key:e.id,staticClass:"type-img-items"},[a("cms-picture-zone",{staticClass:"product-img-box",attrs:{preview:!1,index:r,params:{parentIndex:s}},on:{change:t.getStandardImg}},[a("div",{staticClass:"product-img-warpper"},[e.valueResourceId&&""!==e.valueResourceId?a("img",{attrs:{src:t.$cms.filterUrl(e.url),alt:""}}):a("span",{staticClass:"img-plus el-icon-plus"})])]),t._v(" "),a("div",{staticClass:"img-txt"},[a("el-checkbox",{staticClass:"check-box",attrs:{label:e.id}},[a("span",{staticClass:"type-value"},[t._v(t._s(e.attrValue))]),t._v(" "),2==e.attrType?a("div",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteCustomStandardValue(e,s,r)}}}):t._e()])],1)],1)}),0):a("ul",{staticClass:"clearfix"},t._l(e.attrValueList,function(e,r){return a("li",{key:e.id,staticClass:"type-checkbox-items"},[a("el-checkbox",{attrs:{label:e.id}},[a("span",{staticClass:"type-value"},[t._v(t._s(e.attrValue))]),t._v(" "),2==e.attrType?a("div",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteCustomStandardValue(e,s,r)}}}):t._e()])],1)}),0)])])}),t._v(" "),a("div",{staticStyle:{margin:"20px 0 0 0"}},[a("cms-button",{attrs:{icon:"add",size:"small"},on:{click:function(e){t.popoverVisible=!0}}},[t._v("添加规格")])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加规格",top:"35vh",visible:t.popoverVisible,width:"640px"}},[a("div",{staticClass:"dialog-form"},[a("el-form",{ref:"dialogForm",attrs:{model:t.popoverForm}},[a("el-form-item",{attrs:{label:"规格名称",prop:"name","label-width":"120px",rules:[{required:!0,message:"必须输入规格名称",trigger:"blur"}]}},[a("el-input",{model:{value:t.popoverForm.name,callback:function(e){t.$set(t.popoverForm,"name",e)},expression:"popoverForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格值","label-width":"120px",prop:"attrValues",rules:[{required:!0,message:"必须输入规格值",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"多个属性按回车输入"},model:{value:t.popoverForm.attrValues,callback:function(e){t.$set(t.popoverForm,"attrValues",e)},expression:"popoverForm.attrValues"}})],1),t._v(" "),a("div",{staticClass:"center"},[a("cms-button",{staticStyle:{"margin-right":"10px"},on:{click:t.addCustomStandardItem}},[t._v("确认")]),t._v(" "),a("cms-button",{attrs:{type:"info"},on:{click:t.clearCustomStandardItem}},[t._v("取消")])],1)],1)],1)])],2):t._e()],1),t._v(" "),t.formData.coreModel.hasSku&&t.skus.length>0?a("el-form-item",{attrs:{label:"sku信息",prop:"name"}},[a("table",{staticClass:"sku-table"},[a("tr",[t._l(t.properties,function(e,s){return e.attrValueList.length>0?a("th",{key:s,attrs:{rowspan:"2"}},[t._v("\n            "+t._s(e.name)+"\n          ")]):t._e()}),t._v(" "),a("th",[t._v("售价")]),t._v(" "),a("th",[t._v("市场价")]),t._v(" "),a("th",[t._v("成本价")]),t._v(" "),a("th",[t._v("库存")]),t._v(" "),a("th",[t._v("预警值")]),t._v(" "),a("th",{attrs:{rowspan:"2",width:"60"}},[t._v("操作")])],2),t._v(" "),a("tr",[a("td",[a("el-input",{staticClass:"table-input",attrs:{type:"number",min:0},model:{value:t.batch.salesPrice,callback:function(e){t.$set(t.batch,"salesPrice",e)},expression:"batch.salesPrice"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("salesPrice")}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{type:"number",min:0},model:{value:t.batch.marketPrice,callback:function(e){t.$set(t.batch,"marketPrice",e)},expression:"batch.marketPrice"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("marketPrice")}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{type:"number",min:0},model:{value:t.batch.costPrice,callback:function(e){t.$set(t.batch,"costPrice",e)},expression:"batch.costPrice"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("costPrice")}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{type:"number",min:0},model:{value:t.batch.inventory,callback:function(e){t.$set(t.batch,"inventory",e)},expression:"batch.inventory"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("inventory")}}})])],2)],1),t._v(" "),a("td",[a("el-input",{staticClass:"table-input",attrs:{type:"number",min:0},model:{value:t.batch.warning,callback:function(e){t.$set(t.batch,"warning",e)},expression:"batch.warning"}},[a("template",{slot:"append"},[a("i",{staticClass:"iconfont icon-zhankai1-copy",on:{click:function(e){t.batchPrice("warning")}}})])],2)],1)]),t._v(" "),t._l(t.skus,function(e,s){return a("tr",{key:s},[t._l(e.name,function(e,s){return a("td",{key:s,staticClass:"min-w-90"},[t._v("\n            "+t._s(e)+"\n          ")])}),t._v(" "),a("td",[a("el-input",{attrs:{type:"number",min:0},model:{value:e.salesPrice,callback:function(a){t.$set(e,"salesPrice",a)},expression:"item.salesPrice"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{type:"number",min:0},model:{value:e.marketPrice,callback:function(a){t.$set(e,"marketPrice",a)},expression:"item.marketPrice"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{type:"number",min:0},model:{value:e.costPrice,callback:function(a){t.$set(e,"costPrice",a)},expression:"item.costPrice"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{type:"number",min:0},model:{value:e.inventory,callback:function(a){t.$set(e,"inventory",a)},expression:"item.inventory"}})],1),t._v(" "),a("td",[a("el-input",{attrs:{type:"number",min:0},model:{value:e.warning,callback:function(a){t.$set(e,"warning",a)},expression:"item.warning"}})],1),t._v(" "),a("td",[a("i",{staticClass:"el-icon-delete del"})])],2)})],2),t._v(" "),a("span",{staticClass:"gray"},[t._v("注：商品实际销售SKU不存在的组合，可删除，系统将默认保存为")])]):t._e(),t._v(" "),t.productStandardInfos.length>0?a("el-form-item",{attrs:{label:"商品属性",prop:"name"}},t._l(t.productStandardInfos,function(e,s){return a("section",{key:e.id,staticClass:"standard-group",style:0===s?{marginTop:0}:""},[a("div",{staticClass:"standard-group-header"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"standard-group-name"},[t._v(t._s(e.attrGroupName))])]),t._v(" "),a("div",{staticClass:"fr"},[a("label",{staticClass:"standard-group-desc"},[t._v("规格值名称")]),t._v(" "),a("el-input",{staticStyle:{width:"110px"},model:{value:t.customAttributeValue["value"+s],callback:function(e){t.$set(t.customAttributeValue,"value"+s,e)},expression:"customAttributeValue['value'+index]"}}),t._v(" "),a("cms-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){t.addCustomAttribute(s)}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"standard-group-body",staticStyle:{padding:"20px"}},t._l(e.attrs,function(e,r){return a("div",{key:e.id,staticClass:"clearfix",class:[1==e.valueType?"w-50":"w-100"]},[a("label",{staticClass:"fl  attribute-name"},[t._v(t._s(e.name))]),t._v(" "),3===e.valueType&&e.attrValueList.length>0?a("ul",{staticClass:"fl"},t._l(e.attrValueList,function(s){return a("li",{key:s.id,staticClass:"type-checkbox-items"},[a("el-checkbox",{attrs:{label:s.id},on:{change:function(a){t.setProductInfos(s,e,1)}}},[a("span",{staticClass:"type-value"},[t._v(t._s(s.attrValue))])])],1)}),0):t._e(),t._v(" "),2===e.valueType&&e.attrValueList.length>0?a("ul",{staticClass:"fl"},[a("el-radio-group",{model:{value:t.attributeGroups[e.id+"s"],callback:function(a){t.$set(t.attributeGroups,e.id+"s",a)},expression:"attributeGroups[standard.id+'s']"}},t._l(e.attrValueList,function(s){return a("li",{key:s.id,staticClass:"type-radio-items"},[a("el-radio",{attrs:{label:s.id},on:{change:function(a){t.setProductInfos(s,e,2)}}},[a("span",{staticClass:"type-value"},[t._v(t._s(s.attrValue))])])],1)}),0)],1):t._e(),t._v(" "),1===e.valueType?a("div",[a("el-input",{staticStyle:{width:"220px",position:"relative",top:"0px"},on:{blur:function(a){t.setProductInfos(a,e,3)}}}),t._v(" "),2==e.attrType?a("div",{staticClass:"el-icon-delete del",on:{click:function(a){t.deleteCustomAttribute(e,s,r)}}}):t._e()],1):t._e()])}),0)])}),0):t._e()],1),t._v(" "),a("div",{staticClass:"product-footer",class:[t.fixed?"fixed-footer":""]},[a("cms-button",{staticStyle:{background:"#f7f7f7",color:"#444"},on:{click:function(e){t.prevStep()}}},[t._v("上一步")]),t._v(" "),a("cms-button",{directives:[{name:"color",rawName:"v-color"}]},[t._v("下一步,设置关联")]),t._v(" "),a("cms-button",{directives:[{name:"color",rawName:"v-color"}],staticStyle:{background:"#efae00"},on:{click:function(e){t.save()}}},[t._v("立即发布")])],1)],1)},staticRenderFns:[]};var L={components:{step1:d,step2:C,step3:a("C7Lr")(V,T,!1,function(t){a("lbOj")},"data-v-2f93228e",null).exports,step4:a("C7Lr")(null,null,!1,null,null,null).exports},data:function(){return{}},computed:{currentView:function(){return this.$store.state.product.step}},methods:{setStep:function(t){this.$store.dispatch("setStep",t)},clearInfo:function(){this.$store.dispatch("clearProductInfo")}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("cms-breadcrumb",{staticClass:"pos-breadcrumb",attrs:{to:"/productMange/list",type:"list"},on:{click:t.clearInfo}},[a("li",[t._v(t._s(t.$route.name))])]),t._v(" "),a("div",{staticClass:"main-layout"},[a("div",{staticClass:"fixed-bar"},[a("cms-prompt",{staticClass:"pos-prompt "},[a("li",[t._v("带\n          "),a("span",{staticStyle:{color:"#ff0000"}},[t._v(" * ")]),t._v(" 为必填项 ")])]),t._v(" "),a("ul",{staticClass:"cms-steps"},[a("li",{staticClass:"cms-step",class:"step1"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("1")]),t._v(" "),t._m(0)]),t._v(" "),a("li",{staticClass:"cms-step",class:"step2"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("2")]),t._v(" "),t._m(1)]),t._v(" "),a("li",{staticClass:"cms-step",class:"step3"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("3")]),t._v(" "),t._m(2)]),t._v(" "),a("li",{staticClass:"cms-step",class:"step4"==t.currentView?"active":""},[a("span",{staticClass:"cms-step-index"},[t._v("4")]),t._v(" "),t._m(3)])])],1),t._v(" "),a("div",{staticClass:"product-layout",attrs:{id:"productLayout"}},[a("keep-alive",[a(t.currentView,{tag:"component"})],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-fenlei-sel"}),this._v("\n            选择商品分类\n          ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-zongjie"}),this._v("\n            填写商品信息\n          ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-gaojishuxing"}),this._v("\n            设置规格/属性信息\n          ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cms-step-name"},[e("i",{staticClass:"iconfont icon-guanlian"}),this._v("\n            关联设置\n          ")])}]};var M=a("C7Lr")(L,N,!1,function(t){a("PNTf")},"data-v-82fe6736",null);e.default=M.exports},PNTf:function(t,e){},c9gC:function(t,e){},lbOj:function(t,e){},ntES:function(t,e){}});
//# sourceMappingURL=25.a104e79b5b7ae12a0685.js.map
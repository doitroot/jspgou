{"version":3,"sources":["webpack:///./src/api/setting/mailbox.js","webpack:///src/views/platform/setting/mailbox/mailbox.vue","webpack:///./src/views/platform/setting/mailbox/mailbox.vue?eb38","webpack:///./src/views/platform/setting/mailbox/mailbox.vue"],"names":["mailboxUpdate","params","axios","post","defaultData","id","smtpService","smtpPort","emailName","testemail","emailPassword","isSsl","mailbox","name","mixins","mixins_form","data","formData","assign_default","rules","required","len","email","english","computed","isCanUser","test","this","methods","getFormData","_this","get","then","res","saveData","updateForm","mailbox_mailboxUpdate","sendTestEmail","_this2","toAddress","code","$successMessage","$errorMessage","created","mailbox_mailbox","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","collapse","_v","directives","rawName","value","expression","ref","staticStyle","margin-top","model","label-width","label","prop","error","errorMessage","autofocus","callback","$$v","$set","type","size","disabled","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/227.9ec37f3e0a1fe00a33be.js","sourcesContent":["// 邮箱设置相关接口\nimport axios from './../fetch'\n\n// 邮箱设置查询单个\nexport const mailboxGet = params => { return axios.get('/admin/platform/email/get', { params: params }) }\n\n// 邮箱设置查询单个\nexport const mailboxUpdate = params => { return axios.post('/admin/platform/email/update', params) }\n\n// 发送测试邮件\nexport const testEmail = params => { return axios.get('/admin/platform/email/sendTestEmail', { params: params }) }\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/setting/mailbox.js","<template>\n  <div class=\"cms-form-layout\">\n    <cms-prompt collapse='true'>\n      <li> 设置系统使用的邮箱信息</li>\n    </cms-prompt>\n    <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\" style=\"margin-top:20px\" v-loading='loading'>\n      <el-form-item label=\"SMTP 服务器：\" prop=\"smtpService\" :error='errorMessage.smtpService'>\n        <el-input v-model=\"formData.smtpService\" :autofocus=\"true\" ref=\"first\"></el-input>\n        <div class=\"gray\">设置 SMTP 邮件服务器主机地址，不推荐使用QQ个人邮箱</div>\n      </el-form-item>\n      <el-form-item label=\"SMTP 端口：\" prop=\"smtpPort\" :error='errorMessage.smtpPort'>\n        <el-input v-model=\"formData.smtpPort\"></el-input>\n        <div class=\"gray\">邮件服务器端口，25默认http协议，465默认为https协议，推荐使用465</div>\n      </el-form-item>\n      <el-form-item label=\"发送邮件帐号：\" prop=\"emailName\" :error='errorMessage.emailName'>\n        <el-input v-model=\"formData.emailName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"发送邮件密码：\" prop=\"emailPassword\" :error='errorMessage.emailPassword'>\n        <el-input v-model=\"formData.emailPassword\" type=\"password\"></el-input>\n        <div class=\"gray\">一般为验证邮箱密码，如果使用网易邮箱，请填写授权码</div>\n      </el-form-item>\n      <el-form-item label=\"测试邮箱地址：\" class=\"textemail\">\n        <el-input v-model=\"formData.testemail\"></el-input>\n        <el-button type=\"text\" @click=\"sendTestEmail\" size='small'  :disabled=\"isCanUser\">发送测试邮件</el-button> \n      </el-form-item>\n      <el-form-item label=\"是否使用SSL协议：\" prop=\"isSsl\">\n          <el-radio-group v-model=\"formData.isSsl\">\n            <el-radio :label=\"false\">否</el-radio>\n            <el-radio :label=\"true\">是</el-radio>\n          </el-radio-group>\n      </el-form-item>\n    </el-form>\n    <div class=\"cms-form-footer\">\n      <cms-button @click=\"saveData()\" v-color>保存</cms-button>\n    </div>\n  </div>\n</template>\n<script>\nimport rules from '@/rules'\nimport form from '@/mixins/form.js'\nimport {\n  mailboxGet,\n  mailboxUpdate,\n  testEmail\n} from '@/api/setting/mailbox.js'\nvar defaultData = {\n  id: '',\n  smtpService: '',\n  smtpPort: '',\n  emailName: '',\n  testemail: '',\n  emailPassword: '',\n  isSsl: true\n}\nexport default {\n  name: 'mailboxShow',\n  mixins: [form],\n  data() {\n    return {\n      formData: Object.assign({}, defaultData),\n      rules: {\n        smtpService: [rules.required(), rules.len(1, 20)],\n        emailName: [rules.required('请输入邮箱地址'), rules.email(), rules.len(1, 50)],\n        emailPassword: [rules.required(), rules.english(), rules.len(1, 50)],\n        testemail: [rules.required(), rules.email(), rules.len(1, 50)],\n        smtpPort: [rules.required(), rules.len(1, 20)]\n      }\n    }\n  },\n  computed: {\n    isCanUser() { // 判断按钮能否使用\n      const reg = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      return !reg.test(this.formData.testemail)\n    }\n  },\n  methods: {\n    getFormData() {\n      mailboxGet().then(res => {\n        this.formData = res.data\n      })\n    },\n    saveData() {\n      if (\n        typeof this.formData.testemail === 'string' &&\n        this.formData.testemail !== ''\n      ) {\n        this.rules.testemail = [rules.email()]\n      } else {\n        this.rules.testemail = [{ required: false }]\n      }\n      this.updateForm(mailboxUpdate, this.formData, '', '', '', false)\n    },\n    sendTestEmail() {\n      testEmail({ toAddress: this.formData.testemail }).then(res => {\n        if (res.code === 200) {\n          if (res.data === 0) {\n            this.$successMessage('发送成功')\n          }\n        } else {\n          this.$errorMessage('发送失败')\n        }\n      })\n    }\n  },\n\n  created() {\n    this.getFormData()\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/setting/mailbox/mailbox.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":\"true\"}},[_c('li',[_vm._v(\" 设置系统使用的邮箱信息\")])]),_vm._v(\" \"),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"}},[_c('el-form-item',{attrs:{\"label\":\"SMTP 服务器：\",\"prop\":\"smtpService\",\"error\":_vm.errorMessage.smtpService}},[_c('el-input',{ref:\"first\",attrs:{\"autofocus\":true},model:{value:(_vm.formData.smtpService),callback:function ($$v) {_vm.$set(_vm.formData, \"smtpService\", $$v)},expression:\"formData.smtpService\"}}),_vm._v(\" \"),_c('div',{staticClass:\"gray\"},[_vm._v(\"设置 SMTP 邮件服务器主机地址，不推荐使用QQ个人邮箱\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"SMTP 端口：\",\"prop\":\"smtpPort\",\"error\":_vm.errorMessage.smtpPort}},[_c('el-input',{model:{value:(_vm.formData.smtpPort),callback:function ($$v) {_vm.$set(_vm.formData, \"smtpPort\", $$v)},expression:\"formData.smtpPort\"}}),_vm._v(\" \"),_c('div',{staticClass:\"gray\"},[_vm._v(\"邮件服务器端口，25默认http协议，465默认为https协议，推荐使用465\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发送邮件帐号：\",\"prop\":\"emailName\",\"error\":_vm.errorMessage.emailName}},[_c('el-input',{model:{value:(_vm.formData.emailName),callback:function ($$v) {_vm.$set(_vm.formData, \"emailName\", $$v)},expression:\"formData.emailName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发送邮件密码：\",\"prop\":\"emailPassword\",\"error\":_vm.errorMessage.emailPassword}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.formData.emailPassword),callback:function ($$v) {_vm.$set(_vm.formData, \"emailPassword\", $$v)},expression:\"formData.emailPassword\"}}),_vm._v(\" \"),_c('div',{staticClass:\"gray\"},[_vm._v(\"一般为验证邮箱密码，如果使用网易邮箱，请填写授权码\")])],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"textemail\",attrs:{\"label\":\"测试邮箱地址：\"}},[_c('el-input',{model:{value:(_vm.formData.testemail),callback:function ($$v) {_vm.$set(_vm.formData, \"testemail\", $$v)},expression:\"formData.testemail\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"disabled\":_vm.isCanUser},on:{\"click\":_vm.sendTestEmail}},[_vm._v(\"发送测试邮件\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否使用SSL协议：\",\"prop\":\"isSsl\"}},[_c('el-radio-group',{model:{value:(_vm.formData.isSsl),callback:function ($$v) {_vm.$set(_vm.formData, \"isSsl\", $$v)},expression:\"formData.isSsl\"}},[_c('el-radio',{attrs:{\"label\":false}},[_vm._v(\"否\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":true}},[_vm._v(\"是\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.saveData()}}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-cbf7af76\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/setting/mailbox/mailbox.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mailbox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mailbox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cbf7af76\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./mailbox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/setting/mailbox/mailbox.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
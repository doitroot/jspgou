{"version":3,"sources":["webpack:///src/views/platform/permissions/api/save.vue","webpack:///./src/views/platform/permissions/api/save.vue?17e9","webpack:///./src/views/platform/permissions/api/save.vue"],"names":["defaultData","requestMethod","apiName","apiUrl","platformType","apiClassCode","useScene","api_save","mixins","mixins_form","data","methodItems","id","name","formData","assign_default","rules","required","custom","rule","value","callback","Object","apiManger","url","then","res","Error","isSuper","menuid","computed","typeList","methods","save","state","this","saveForm","created","$route","query","permissions_api_save","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","attrs","to","type","params","on","click","rest","_v","_s","staticClass","collapse","ref","model","label-width","label","prop","error","errorMessage","$$v","$set","maxlength","roleName","_l","item","index","key","autosize","minRows","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/93.7c5342ee4b78efbe8139.js","sourcesContent":["<template>\r\n  <div v-loading='loading'>\r\n    <cms-breadcrumb to=\"/apiMange\" type='list' @click=\"rest\" :params='{platformType:$route.query.platformType}'>\r\n      <li>{{$route.name}}</li>\r\n    </cms-breadcrumb>\r\n    <div class=\"cms-form-layout\">\r\n      <cms-prompt :collapse='false'>\r\n        <li>可进行api的添加</li>\r\n      </cms-prompt>\r\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\">\r\n        <el-form-item label=\"平台\" prop=\"platformType\" :error='errorMessage.platformType'>\r\n          <el-select v-model=\"formData.platformType\">\r\n             <el-option label=\"平台端\" value=\"1\"></el-option> \r\n             <el-option label=\"商家端\" value=\"2\"></el-option> \r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"API名称\" prop=\"apiName\" :error='errorMessage.apiName'>\r\n          <el-input v-model=\"formData.apiName\" maxlength=\"100\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"API地址\" prop=\"apiUrl\" :error='errorMessage.roleName'>\r\n          <el-input v-model=\"formData.apiUrl\"  maxlength=\"100\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"请求方式\" prop=\"requestMethod\" :error='errorMessage.requestMethod'>\r\n          <el-radio-group v-model=\"formData.requestMethod\">\r\n            <el-radio v-for=\"(item,index) in methodItems\" :key=\"index\" :label=\"item.id\">{{item.name}}</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"使用场景\" prop=\"useScene\" :error='errorMessage.useScene'>\r\n          <el-input v-model=\"formData.useScene\" type=\"textarea\" :autosize=\"{ minRows: 3}\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"cms-form-footer\">\r\n        <cms-button @click=\"save(false)\" v-color>保存并新增</cms-button>\r\n        <cms-button @click=\"save(true)\" v-color>保存</cms-button>\r\n        <cms-button type='rest' @click=\"rest\">重置</cms-button>\r\n        <!-- <cms-button type='rest' @click=\"test\">mock测试</cms-button> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport rules from './../../../../rules/index.js'\r\nimport form from '@/mixins/form.js'\r\nimport { apiManagerSave, apiCheckUrl } from './../../../../api/admin/apiManger.js'\r\nvar defaultData = {\r\n  requestMethod: 1,\r\n  apiName: '',\r\n  apiUrl: '',\r\n  platformType: '1',\r\n  apiClassCode: '',\r\n  useScene: ''\r\n}\r\nexport default {\r\n  mixins: [form],\r\n  data() {\r\n    var ischeckRouting = (rule, value, callback) => { // 验证api路径是否存在\r\n      apiCheckUrl({\r\n        url: value\r\n      }).then(res => {\r\n        if (res.data) {\r\n          callback()\r\n        } else {\r\n          callback(new Error('API地址已存在'))\r\n        }\r\n      })\r\n    }\r\n    return {\r\n      methodItems: [\r\n        // 请求类型\r\n        { id: 1, name: 'GET' },\r\n        { id: 2, name: 'POST' },\r\n        { id: 3, name: 'DELETE' },\r\n        { id: 4, name: 'UPDATE' },\r\n        { id: 5, name: 'PUT' }\r\n      ],\r\n      formData: Object.assign({}, defaultData),\r\n      rules: {\r\n        platformType: [rules.required('必须选择一个平台')],\r\n        apiName: [rules.required('请填写API名称')],\r\n        apiUrl: [rules.required('请填写API地址'), rules.custom(ischeckRouting)],\r\n        requestMethod: [rules.required()],\r\n        isSuper: [rules.required()],\r\n        menuid: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    typeList() {\r\n      return []\r\n      // return this.$getDictData('systemType') // 获取字典中的平台数据\r\n    }\r\n  },\r\n  methods: {\r\n    save(state) {\r\n      this.saveForm(apiManagerSave, this.formData, state, '/apiMange', 'list', {\r\n        platformType: this.formData.platformType\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.formData = Object.assign({}, defaultData)\r\n    this.formData.platformType = this.$route.query.platformType // 从列表获取到平台\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/permissions/api/save.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('cms-breadcrumb',{attrs:{\"to\":\"/apiMange\",\"type\":\"list\",\"params\":{platformType:_vm.$route.query.platformType}},on:{\"click\":_vm.rest}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":false}},[_c('li',[_vm._v(\"可进行api的添加\")])]),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"}},[_c('el-form-item',{attrs:{\"label\":\"平台\",\"prop\":\"platformType\",\"error\":_vm.errorMessage.platformType}},[_c('el-select',{model:{value:(_vm.formData.platformType),callback:function ($$v) {_vm.$set(_vm.formData, \"platformType\", $$v)},expression:\"formData.platformType\"}},[_c('el-option',{attrs:{\"label\":\"平台端\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"商家端\",\"value\":\"2\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"API名称\",\"prop\":\"apiName\",\"error\":_vm.errorMessage.apiName}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.apiName),callback:function ($$v) {_vm.$set(_vm.formData, \"apiName\", $$v)},expression:\"formData.apiName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"API地址\",\"prop\":\"apiUrl\",\"error\":_vm.errorMessage.roleName}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.apiUrl),callback:function ($$v) {_vm.$set(_vm.formData, \"apiUrl\", $$v)},expression:\"formData.apiUrl\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"请求方式\",\"prop\":\"requestMethod\",\"error\":_vm.errorMessage.requestMethod}},[_c('el-radio-group',{model:{value:(_vm.formData.requestMethod),callback:function ($$v) {_vm.$set(_vm.formData, \"requestMethod\", $$v)},expression:\"formData.requestMethod\"}},_vm._l((_vm.methodItems),function(item,index){return _c('el-radio',{key:index,attrs:{\"label\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"使用场景\",\"prop\":\"useScene\",\"error\":_vm.errorMessage.useScene}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 3}},model:{value:(_vm.formData.useScene),callback:function ($$v) {_vm.$set(_vm.formData, \"useScene\", $$v)},expression:\"formData.useScene\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.save(false)}}},[_vm._v(\"保存并新增\")]),_vm._v(\" \"),_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.save(true)}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"type\":\"rest\"},on:{\"click\":_vm.rest}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-a25ad3f0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/permissions/api/save.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a25ad3f0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./save.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./save.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./save.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a25ad3f0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./save.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/permissions/api/save.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
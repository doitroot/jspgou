webpackJsonp([38],{"0YrK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("5HJ5"),s=a("/v5p"),i={mixins:[n.a],data:function(){return{}},methods:{Synchronous:function(){var e=this;Object(s.p)().then(function(t){200===t.code?(e.$successMessage("同步成功!"),e.getTableData(s.n,e.queryParams)):e.$errorMessage("同步失败")})},addTemplate:function(e){var t=this;Object(s.l)({id:e}).then(function(e){200===e.code?(t.$successMessage("添加模板成功"),t.getTableData(s.n,t.queryParams)):t.$errorMessage("网络繁忙,请稍候稍后重试")})}},created:function(){this.getTableData(s.n,this.queryParams)}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"query-group"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.Synchronous}},[e._v("同步")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.getCheckItems,"row-click":e.checkRows}},[a("el-table-column",{attrs:{prop:"draftId",label:"ID","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"codeVersion",label:"版本号","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"codeDesc",label:"描述","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"submitTime",label:"最近提交时间","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$moment(t.row.submitTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"175",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("cms-button",{attrs:{icon:"edit",size:"small",type:"info"},on:{click:function(a){e.addTemplate(t.row.id)}}},[e._v("添加到模板库")])],1)}}])})],1),e._v(" "),a("cms-pagination",{attrs:{total:e.total},on:{change:e.getPage}})],1)},staticRenderFns:[]};var r=a("C7Lr")(i,o,!1,function(e){a("QsaO")},"data-v-764ff1cc",null).exports,c={mixins:[n.a],data:function(){return{}},methods:{deleteData:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.m)({id:e}).then(function(e){200===e.code?(t.$successMessage("删除模板成功!"),t.getTableData(s.o,t.queryParams)):t.$errorMessage("删除失败")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},Synchronous:function(){var e=this;Object(s.q)().then(function(t){200===t.code?(e.$successMessage("同步成功!"),e.getTableData(s.o,e.queryParams)):e.$errorMessage("同步失败")})},updateTemplate:function(e){var t=this;Object(s.r)({id:e}).then(function(e){200===e.code?(t.$successMessage("设置成功!"),t.getTableData(s.o,t.queryParams)):t.$errorMessage("设置失败")})}},created:function(){this.getTableData(s.o,this.queryParams)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cms-list-layout"},[a("cms-prompt",{attrs:{collapse:"true"}},[a("li",[e._v("设置为最新版本为后续商家或平台运营小程序提交至微信审核的版本，推荐使用最新的版本号")]),e._v(" "),a("li",[e._v("版本库中版本默认可添加最多50份，默认版本仅允许设置一份")])]),e._v(" "),a("div",{staticClass:"query-group"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.Synchronous}},[e._v("同步")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.getCheckItems,"row-click":e.checkRows}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"codeVersion",label:"版本号","min-width":"160"}}),e._v(" "),a("el-table-column",{staticStyle:{height:"35px"},attrs:{prop:"codeDesc",label:"描述","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.codeDesc))]),e._v(" "),t.row.isNew?a("sup",{staticClass:"new__tag"},[e._v("最新")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"添加时间","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$moment(t.row.submitTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"235",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isNew?e._e():a("div",{},[a("cms-button",{attrs:{icon:"icon-shezhi1",size:"small",type:"info"},on:{click:function(a){a.stopPropagation(),e.updateTemplate(t.row.id)}}},[e._v("设置为最新版本")]),e._v(" "),a("cms-button",{attrs:{icon:"error",size:"small",type:"info"},on:{click:function(a){a.stopPropagation(),e.deleteData(t.row.id)}}},[e._v("删除")])],1)}}])})],1),e._v(" "),a("cms-pagination",{attrs:{total:e.total},on:{change:e.getPage}})],1)},staticRenderFns:[]};var u={name:"codeTab",components:{draft:r,templateBase:a("C7Lr")(c,l,!1,function(e){a("9Ysg")},"data-v-439b482a",null).exports},data:function(){return{status:!0,activeName:"first"}},methods:{}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cms-list-layout",staticStyle:{"padding-top":"6px"}},[e.status?a("el-tabs",{ref:"codeTab",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"草稿箱",name:"first"}},[a("draft")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"模板库",name:"second",lazy:""}},[a("template-base")],1)],1):e._e()],1)},staticRenderFns:[]};var m=a("C7Lr")(u,d,!1,function(e){a("f33a")},null,null);t.default=m.exports},"9Ysg":function(e,t){},QsaO:function(e,t){},f33a:function(e,t){}});
//# sourceMappingURL=38.e664afe9b6b24ea11857.js.map
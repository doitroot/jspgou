webpackJsonp([84],{LqIe:function(e,a){},"v/rK":function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=r("aA9S"),o=r.n(t),s=r("x1ym"),n=r("lcoF"),l=r("EOYE"),m={enabled:1,username:"",password:"",email:"",phone:"",nickname:"",pwd:"",resourceDataId:"",birthday:"",gender:1},i={mixins:[n.a],data:function(){var e=this;return{imageUrl:"",formData:o()({},m),rules:{email:[s.a.required("此项必填"),s.a.email(),s.a.custom(function(e,a,r){Object(l.a)({email:a}).then(function(e){200===e.code&&(e.data?r():r(new Error("邮箱已存在，不允许重复添加")))})})],phone:[s.a.custom(function(e,a,r){""===a?r():/^1[3456789]\d{9}$/.test(a)?Object(l.b)({phone:a}).then(function(e){200===e.code&&(e.data?r():r(new Error("手机已存在，不允许重复添加")))}):r(new Error("手机号码格式不正确"))}),s.a.phone()],pwd:[s.a.required("此项必填"),s.a.custom(function(a,r,t){r===e.formData.password?t():t(new Error("密码输入不一致，请重新输入"))}),s.a.len(6,16)],gender:[s.a.required("此项必填")],username:[s.a.required("此项必填"),s.a.custom(function(e,a,r){""===a?r(new Error("请输入用户名")):/((?=[\x21-\x7e]+)[^A-Za-z0-9])/.test(a)?r(new Error("用户名格式不正确")):Object(l.c)({username:a}).then(function(e){200===e.code&&(e.data?r():r(new Error("账户已存在，不允许重复添加")))})})],status:[s.a.required("此项必填")],password:[s.a.required("此项必填"),s.a.len(6,16)],nickname:[s.a.custom(function(e,a,r){""===a?r():/^([\u4E00-\u9FA5]+|[a-zA-Z]+)$/.test(a)?r():r(new Error("姓名格式不正确"))})]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}}}},methods:{getImgUrl:function(e,a){this.resourcesSpaceData=e[0],this.formData.resourceDataId=e[0].id},save:function(e){var a=this,r={member:{enabled:this.formData.enabled,username:this.formData.username,password:this.formData.password,email:this.formData.email,phone:this.formData.phone,nickname:this.formData.nickname},memberExt:{resourceDataId:this.formData.resourceDataId,birthday:this.formData.birthday,gender:this.formData.gender}};r.member.password=this.$cms.encrypt(r.member.password),this.$refs.form.validate(function(t,o){t&&a.saveForm(l.m,r,e,"/shopMember/list","list")})}},created:function(){}},c={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("cms-breadcrumb",{attrs:{to:"/shopMember/list",type:"list"},on:{click:e.rest}},[r("li",[e._v(e._s(e.$route.name))])]),e._v(" "),r("div",{staticClass:"cms-form-layout"},[r("cms-prompt",[r("li",[e._v("带 * 为必填项")])]),e._v(" "),r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[r("el-form-item",{attrs:{label:"会员头像",prop:"resourcesSpaceData"}},[r("cms-picture-zone",{on:{change:e.getImgUrl},model:{value:e.formData.resourcesSpaceData,callback:function(a){e.$set(e.formData,"resourcesSpaceData",a)},expression:"formData.resourcesSpaceData"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"会员账户",prop:"username",error:e.errorMessage.username}},[r("el-input",{attrs:{maxlength:"12"},model:{value:e.formData.username,callback:function(a){e.$set(e.formData,"username",a)},expression:"formData.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password",error:e.errorMessage.password}},[r("el-input",{attrs:{type:"password"},model:{value:e.formData.password,callback:function(a){e.$set(e.formData,"password",a)},expression:"formData.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"pwd",error:e.errorMessage.pwd}},[r("el-input",{attrs:{type:"password"},model:{value:e.formData.pwd,callback:function(a){e.$set(e.formData,"pwd",a)},expression:"formData.pwd"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email",error:e.errorMessage.email}},[r("el-input",{attrs:{maxlength:"30"},model:{value:e.formData.email,callback:function(a){e.$set(e.formData,"email",a)},expression:"formData.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机",prop:"phone"}},[r("el-input",{attrs:{maxlength:"11"},model:{value:e.formData.phone,callback:function(a){e.$set(e.formData,"phone",a)},expression:"formData.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{attrs:{maxlength:"30"},model:{value:e.formData.nickname,callback:function(a){e.$set(e.formData,"nickname",a)},expression:"formData.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio-group",{model:{value:e.formData.gender,callback:function(a){e.$set(e.formData,"gender",a)},expression:"formData.gender"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("女")]),e._v(" "),r("el-radio",{attrs:{label:3}},[e._v("保密")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"date",size:"small",placeholder:"年/月/日"},model:{value:e.formData.birthday,callback:function(a){e.$set(e.formData,"birthday",a)},expression:"formData.birthday"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否启用",prop:"enabled"}},[r("cms-switch",{attrs:{activeValue:1,inactiveValue:0},model:{value:e.formData.enabled,callback:function(a){e.$set(e.formData,"enabled",a)},expression:"formData.enabled"}})],1)],1),e._v(" "),r("div",{staticClass:"cms-form-footer"},[r("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(a){e.save(!0)}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var u=r("C7Lr")(i,c,!1,function(e){r("LqIe")},null,null);a.default=u.exports}});
//# sourceMappingURL=84.96d55473ab61c70e5cb4.js.map
webpackJsonp([185],{"8xHG":function(o,e){},Thml:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aA9S"),r=t.n(a),n=t("x1ym"),u=t("lcoF"),c=t("QkjJ"),s={coupon:{conOrderAmount:"",discountAmount:"",getMode:1,getNum:"",expirateType:2,issueNum:"",name:"",useBeginTime:"",useEndTime:"",useDay:"",couponType:2,couponScope:1},issueType:1,ctgIds:[]},p={components:{categoryCascader:t("CPCM").a},mixins:[u.a],data:function(){var o=this,e=function(o,e,t){"0"===e?t(new Error("请输入大于0的正整数")):t()};return{timer:[],formData:r()({},s),rules:{"coupon.name":[n.a.required("请填写优惠券名称"),n.a.len(1,20)],"coupon.couponType":[n.a.required()],"coupon.useDay":[n.a.required(),n.a.number("请输入大于0的正整数"),n.a.len(1,3),n.a.custom(e)],"coupon.conOrderAmount":[n.a.required(),n.a.number("请输入大于0的正整数"),n.a.len(1,8),n.a.custom(e)],"coupon.issueNum":[n.a.required(),n.a.number("请输入大于等于0的正整数"),n.a.len(1,8)],"coupon.getNum":[n.a.required(),n.a.number("请输入大于0的正整数"),n.a.len(1,8),n.a.custom(e)],"coupon.discountAmount":[n.a.required("此项必填"),n.a.number("请输入大于0的正整数"),n.a.custom(function(e,t,a){Number(t)<Number(o.formData.coupon.conOrderAmount)?a():a(new Error("面值不能大于使用条件"))})],issueType:[n.a.required()],"coupon.useEndTime":[n.a.required()]}}},methods:{changeType:function(o){this.formData.coupon.expirateType=o},getTimer:function(o){this.formData.coupon.useBeginTime=o[0],this.formData.coupon.useEndTime=o[1]},save:function(o){this.saveForm(c.z,this.formData,o,"/coupon/list","list").then(function(o){})},rest:function(){this.autoFocus(),this.$refs.form.resetFields(),this.destroyed(),this.timer=[]}},created:function(){}},m={render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}]},[t("cms-breadcrumb",{attrs:{to:"/coupon/list",type:"list"},on:{click:o.rest}},[t("li",[o._v(o._s(o.$route.name))])]),o._v(" "),t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:!1}},[t("li",[o._v("可进行添加平台优惠券")])]),o._v(" "),t("el-form",{ref:"form",attrs:{rules:o.rules,model:o.formData,"label-width":"210px"}},[t("el-form-item",{attrs:{label:"优惠券名称",prop:"coupon.name",error:o.errorMessage.coupon_name}},[t("el-input",{model:{value:o.formData.coupon.name,callback:function(e){o.$set(o.formData.coupon,"name",e)},expression:"formData.coupon.name"}})],1),o._v(" "),t("el-form-item",{attrs:{label:"优惠券类型",prop:"coupon.couponType",error:o.errorMessage.coupon_couponType}},[t("el-radio-group",{on:{change:o.changeType},model:{value:o.formData.coupon.couponType,callback:function(e){o.$set(o.formData.coupon,"couponType",e)},expression:"formData.coupon.couponType"}},[t("el-radio",{attrs:{label:1}},[o._v("活动优惠券")]),o._v(" "),t("el-radio",{attrs:{label:2}},[o._v("普通优惠券")])],1)],1),o._v(" "),1==o.formData.coupon.couponType?t("el-form-item",{attrs:{prop:"coupon.useEndTime"}},[t("cms-picker",{staticStyle:{width:"380px"},attrs:{disabledType:"todayAfter"},on:{change:o.getTimer},model:{value:o.timer,callback:function(e){o.timer=e},expression:"timer"}})],1):o._e(),o._v(" "),2==o.formData.coupon.couponType?t("el-form-item",{attrs:{label:"有效期",prop:"coupon.useDay"}},[t("el-input",{model:{value:o.formData.coupon.useDay,callback:function(e){o.$set(o.formData.coupon,"useDay",e)},expression:"formData.coupon.useDay"}},[t("template",{slot:"prepend"},[o._v("固定天数")]),o._v(" "),t("template",{slot:"append"},[o._v("天")])],2)],1):o._e(),o._v(" "),t("el-form-item",{attrs:{label:"使用条件",prop:"coupon.conOrderAmount",error:o.errorMessage.coupon_conOrderAmount}},[t("el-input",{attrs:{maxlength:"8"},model:{value:o.formData.coupon.conOrderAmount,callback:function(e){o.$set(o.formData.coupon,"conOrderAmount",e)},expression:"formData.coupon.conOrderAmount"}},[t("template",{slot:"prepend"},[o._v("满")]),o._v(" "),t("template",{slot:"append"},[o._v("元")])],2)],1),o._v(" "),t("el-form-item",{attrs:{label:"面值",prop:"coupon.discountAmount",error:o.errorMessage.coupon_discountAmount}},[t("el-input",{model:{value:o.formData.coupon.discountAmount,callback:function(e){o.$set(o.formData.coupon,"discountAmount",e)},expression:"formData.coupon.discountAmount"}},[t("template",{slot:"append"},[o._v("元")])],2)],1),o._v(" "),t("el-form-item",{attrs:{label:"发放限制",prop:"coupon.issueNum"}},[t("el-input",{attrs:{maxlength:"8"},model:{value:o.formData.coupon.issueNum,callback:function(e){o.$set(o.formData.coupon,"issueNum",e)},expression:"formData.coupon.issueNum"}}),o._v(" "),t("div",{staticClass:"gray"},[o._v("输入几表示限制几张，输入0表示不限制")])],1),o._v(" "),t("el-form-item",{attrs:{label:"领取限制",prop:"coupon.getNum",error:o.errorMessage.coupon_getNum}},[t("el-input",{model:{value:o.formData.coupon.getNum,callback:function(e){o.$set(o.formData.coupon,"getNum",e)},expression:"formData.coupon.getNum"}},[t("template",{slot:"prepend"},[o._v("每用户")]),o._v(" "),t("template",{slot:"append"},[o._v("张")])],2)],1),o._v(" "),t("el-form-item",{attrs:{label:"优惠券使用范围",prop:"coupon.couponScope",error:o.errorMessage.coupon_couponScope}},[t("el-radio-group",{model:{value:o.formData.coupon.couponScope,callback:function(e){o.$set(o.formData.coupon,"couponScope",e)},expression:"formData.coupon.couponScope"}},[t("el-radio",{attrs:{label:1}},[o._v("全部商品")]),o._v(" "),t("el-radio",{attrs:{label:2}},[o._v("自营商品")]),o._v(" "),t("el-radio",{attrs:{label:3}},[o._v("部分类目")])],1),o._v(" "),3===o.formData.coupon.couponScope?t("el-form-item",{attrs:{label:"选择类目","label-width":"80px"}},[t("category-cascader",{staticStyle:{width:"298px"},model:{value:o.formData.ctgIds,callback:function(e){o.$set(o.formData,"ctgIds",e)},expression:"formData.ctgIds"}})],1):o._e()],1)],1),o._v(" "),t("div",{staticClass:"cms-form-footer"},[t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){o.save(!1)}}},[o._v("保存并新增")]),o._v(" "),t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){o.save(!0)}}},[o._v("保存")]),o._v(" "),t("cms-button",{attrs:{type:"rest"},on:{click:o.rest}},[o._v("重置")])],1)],1)],1)},staticRenderFns:[]};var l=t("C7Lr")(p,m,!1,function(o){t("8xHG")},null,null);e.default=l.exports}});
//# sourceMappingURL=185.fb05c5468a29356b642b.js.map
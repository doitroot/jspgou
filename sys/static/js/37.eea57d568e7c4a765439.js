webpackJsonp([37,69],{"0JoU":function(t,e){},"1XP0":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("aA9S"),i=s.n(a),n=s("QkjJ"),r=s("6DWn"),o={name:"",beginTime:"",endTime:"",promoteId:"",size:10,page:1},c={mixins:[s("5HJ5").a],components:{productList:r.default},data:function(){return{queryParams:i()({},o),signEndTime:""}},computed:{canShowAudit:function(){return(new Date).getTime()>this.signEndTime}},methods:{setTimer:function(t){this.queryParams.beginTime=t[0],this.queryParams.endTime=t[1],this.getTableData(n.T,this.queryParams)},storeAduit:function(t){var e=this;this.$confirm("确定审核后,无法再对该活动进行审核操作,是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.S)({id:t}).then(function(t){200===t.code?(e.$successMessage("审核成功"),e.getTableData(n.T,e.queryParams)):e.$errorMessage("审核失败,"+t.message)})}).catch(function(){})}},created:function(){this.queryParams.promoteId=this.$route.query.promoteId,this.signEndTime=this.$route.query.signEndTime,this.getTableData(n.T,this.queryParams)}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("cms-breadcrumb",{attrs:{to:"/activity/list",type:"list"}},[s("li",[t._v(t._s(t.$route.name))])]),t._v(" "),s("div",{staticClass:"cms-list-layout"},[s("cms-prompt",[s("li",[t._v("显示参与 "),s("span",{staticStyle:{color:"#188ae2"}},[t._v(t._s(t.$route.query.name))]),t._v(" 的商家列表")])]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"expand",label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("product-list",{attrs:{promoteId:e.row.promoteId,id:e.row.id,storeId:e.row.storeId,signStatus:e.row.signStatus,canShowAudit:t.canShowAudit}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"store.storeName",label:"商家名称","min-width":"200"}}),t._v(" "),s("el-table-column",{attrs:{prop:"discountAmount",label:"报名时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.$moment(e.row.signTime,"YYYY-MM-DD"))+"\n        ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"signStatus",label:"审核状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.signStatus?s("span",{staticClass:"error"},[t._v("报名待审核")]):t._e(),t._v(" "),1==e.row.signStatus?s("span",{staticClass:"link"},[t._v("已审核待支付")]):t._e(),t._v(" "),2==e.row.signStatus?s("span",{staticClass:"success"},[t._v("已支付报名成功")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"signStatus",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.signStatus&&t.canShowAudit?s("cms-button",{attrs:{icon:"edit",size:"small",type:"info"},on:{click:function(s){t.storeAduit(e.row.id)}}},[t._v("确认审核")]):t._e()]}}])})],1),t._v(" "),s("cms-pagination",{attrs:{total:t.total},on:{change:t.getPage}})],1)],1)},staticRenderFns:[]};var l=s("C7Lr")(c,u,!1,function(t){s("tcSd")},null,null);e.default=l.exports},"6DWn":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("aA9S"),i=s.n(a),n=s("QkjJ"),r={promoteId:"",id:"",size:10,page:1,storeId:""},o={mixins:[s("5HJ5").a],props:{promoteId:[String,Number],id:[String,Number],storeId:[String,Number],signStatus:[String,Number],canShowAudit:{type:Boolean}},data:function(){return{queryParams:i()({},r)}},methods:{signCheck:function(t,e){var s=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(n.R)({id:this.id,checked:a,singProductIds:t,reason:e}).then(function(t){200===t.code?(s.$successMessage("审核成功"),s.getTableData(n.P,s.queryParams)):s.$errorMessage(t.message)})}},created:function(){this.queryParams.promoteId=this.promoteId,this.queryParams.storeId=this.storeId,this.getTableData(n.P,this.queryParams)}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cms-list-layout",staticStyle:{padding:"0px 16px"}},[s("ul",{staticClass:"prodSearch-intro-ul clearfix"},t._l(t.tableData,function(e){return s("li",{key:e.id,staticClass:"prodSearch-intro-li"},[s("div",{staticClass:"prodSearch-intro-box"},[s("img",{staticClass:"prodSearch-intro-box__img",attrs:{src:t.$cms.filterUrl(e.product.coverImage)}}),t._v(" "),s("p",{staticClass:"prodSearch-intro-box__descript"},[t._v("\n          "+t._s(e.product.name)+"\n        ")]),t._v(" "),s("p",{staticClass:"prodSearch-intro-box__price error"},[t._v("\n          ￥"+t._s(t.$cms.float(e.product.salePrice))+"\n        ")])]),t._v(" "),t.signStatus<=0&&t.canShowAudit?s("div",{key:e.id,staticClass:"prodSearch-toolbar"},[s("span",{staticClass:"el-icon-check",attrs:{title:"审核通过"},on:{click:function(s){t.signCheck([e.id],"审核通过")}}}),t._v(" "),s("span",{staticClass:"el-icon-close",attrs:{title:"审核不通过"},on:{click:function(s){t.signCheck([e.id],"审核不通过",!1)}}})]):t._e(),t._v(" "),1==e.status?s("span",{staticClass:"prodSearch__aduit--scucc"},[t._v("已审核")]):t._e(),t._v(" "),2==e.status?s("span",{staticClass:"prodSearch__aduit--fail"},[t._v("退回")]):t._e(),t._v(" "),0==e.status?s("span",{staticClass:"prodSearch__aduit--primary"},[t._v("待审核")]):t._e()])}),0),t._v(" "),s("cms-pagination",{staticStyle:{padding:"10px 0"},attrs:{total:t.total},on:{change:t.getPage}})],1)},staticRenderFns:[]};var u=s("C7Lr")(o,c,!1,function(t){s("0JoU")},"data-v-e22ed026",null);e.default=u.exports},tcSd:function(t,e){}});
//# sourceMappingURL=37.eea57d568e7c4a765439.js.map
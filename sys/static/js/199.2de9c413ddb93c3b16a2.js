webpackJsonp([199],{MHrZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("lcoF"),n=a("QkjJ"),o={mixins:[s.a],data:function(){return{formData:{},loading:!1}},methods:{getFormData:function(t){var e=this;this.loading=!0,Object(n.t)({id:t}).then(function(t){200===t.code?e.formData=t.data:e.$errorMessage(t.message),e.loading=!1})},update:function(){var t=this,e=[{id:this.formData.id,content:this.formData.content}];if(this.formData.assocatedAnswer.length>0){var a={id:"",content:""};this.formData.assocatedAnswer.forEach(function(t){a.id=t.id,a.content=t.content}),e.push(a)}var s=!0;e.forEach(function(e){(""===e.content||/^\s/.test(e.content))&&(s=!1,t.formData.assocatedAnswer.length>0?t.$errorMessage("请输入买家咨询内容及商家回复"):t.$errorMessage("请输入买家咨询内容"))}),s&&Object(n.v)({pList:e}).then(function(e){200===e.code?(t.$successMessage("修改成功"),t.$routerLink("/consult/list","list")):t.$errorMessage(e.message)})}},created:function(){this.getFormData(this.$route.query.id)}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("cms-breadcrumb",{attrs:{to:"/consult/list",type:"list"}},[a("li",[t._v(t._s(t.$route.name))])]),t._v(" "),a("div",{staticClass:"cms-list-layout"},[a("cms-prompt",{staticStyle:{"margin-bottom":"15px"},attrs:{collapse:!1}},[a("li",[t._v("可对不合规的信息进行修改、更正")])]),t._v(" "),t.loading?t._e():a("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"comment-table"},[a("tbody",[t._m(0),t._v(" "),a("tr",{staticStyle:{border:"1px solid #EBEEF5"}},[a("td",{staticClass:"comment-goods"},[a("div",{staticClass:"comment__inner"},[a("img",{staticClass:"product-img",attrs:{src:t.$cms.filterUrl(t.formData.product.coverImage)}}),t._v(" "),a("div",{staticClass:"product-title"},[a("h3",{staticClass:"comment-title-h"},[t._v(t._s(t.formData.product.name))])])])]),t._v(" "),a("td",{staticClass:"comment-item"},[a("div",{staticClass:"comment-remark",staticStyle:{"border-top":"0"}},[a("p",{staticStyle:{"font-size":"14px","margin-bottom":"10px","font-weight":"700"}},[t._v(t._s(t.formData.member.username)+":")]),t._v(" "),a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",rows:5,maxlength:"255"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),t._v(" "),t._l(t.formData.assocatedAnswer,function(e,s){return a("div",{key:s,staticClass:"comment-remark"},[t.formData.assocatedAnswer.length>0?a("div",{style:{"border-top":s>0?"1px solid #EBEEF5":""}},[a("p",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n                "+t._s(e.product.store.storeName)+" 回复:\n               ")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:5,maxlength:"255"},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"info.content"}})],1):t._e(),t._v(" "),0==t.formData.assocatedAnswer.length?a("p",{staticClass:"consult-none"},[t._v("暂无商家回复")]):t._e()])})],2)])])]),t._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"30px",width:"49%"}},[a("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:function(e){return e.stopPropagation(),t.update(e)}}},[t._v("修改咨询内容")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"comment-th"},[e("td",{staticStyle:{"padding-left":"10px"}},[e("span",[this._v("咨询商品")])]),this._v(" "),e("td",{staticStyle:{"padding-left":"10px"}},[e("div",[e("span",[this._v("咨询内容")])])])])}]};var i=a("C7Lr")(o,r,!1,function(t){a("rYQg")},"data-v-0e1b5b6e",null);e.default=i.exports},rYQg:function(t,e){}});
//# sourceMappingURL=199.2de9c413ddb93c3b16a2.js.map
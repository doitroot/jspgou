webpackJsonp([95],{"8MMv":function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=r("aA9S"),o=r.n(t),n=r("x1ym"),s=r("lcoF"),i=r("GqAp"),l={parentIds:[0],parentId:"",areaCode:"",sortNum:10,areaDictCode:1,areaName:""},m={name:"regionSave",mixins:[s.a],data:function(){var e=this;return{options:[],props:{value:"id",label:"areaName",children:"childs"},formData:o()({},l),rules:{parentIds:[n.a.required("请选择上级区域","change")],areaName:[n.a.required(),n.a.len(1,20)],areaCode:[n.a.required(),n.a.len(1,10),n.a.number(),n.a.custom(function(a,r,t){Object(i.c)({areaCode:e.formData.areaCode,id:""}).then(function(e){e.data?t(new Error("区域编号已存在")):t()})})],areaDictCode:[n.a.required("请选择区域类型","change")],sortNum:[n.a.number(),n.a.required()]}}},computed:{areaData:function(){return this.$store.state.dict.area}},methods:{getparentId:function(e){this.formData.parentId=e[e.length-1]},setShow:function(e){2===e&&(this.formData.is_show=!1)},getMenuTree:function(){var e=this;if(this.areaData.length>0){this.options=[{id:0,areaName:"全国"}].concat(this.areaData)}else Object(i.h)().then(function(a){e.options=[{id:0,areaName:"全国"}].concat(a.data)})},save:function(e){var a=this;this.$refs.form.validate(function(r){if(r){a.loading=!0;var t=o()({},a.formData);t.parentId=a.formData.parentIds[a.formData.parentIds.length-1],delete t.parentIds,0===t.parentId&&(t.parentId=""),Object(i.e)(t).then(function(r){a.loading=!1,200===r.code?e?(a.rest(),a.$routerLink("/region/list","list",{areaType:a.formData.areaType}),a.$successMessage("新增成功")):a.rest():a.$errorMessage(r.message),a.getMenuTree()}).catch(function(){a.loading=!1})}})},reset:function(){this.formData=o()({},l),this.$refs.form.clearValidate()}},created:function(){this.getMenuTree()}},c={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("cms-breadcrumb",{attrs:{to:"/region/list",type:"list",params:{areaType:e.$route.query.areaType}},on:{click:e.rest}},[r("li",[e._v(e._s(e.$route.name))])]),e._v(" "),r("div",{staticClass:"cms-form-layout"},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[r("el-form-item",{attrs:{label:"上级区域",prop:"parentId"}},[r("el-cascader",{attrs:{filterable:"",options:e.options,props:e.props,"change-on-select":!0},on:{change:e.getparentId},model:{value:e.formData.parentIds,callback:function(a){e.$set(e.formData,"parentIds",a)},expression:"formData.parentIds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域编号",prop:"areaCode",error:e.errorMessage.areaCode}},[r("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.areaCode,callback:function(a){e.$set(e.formData,"areaCode",a)},expression:"formData.areaCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域名称",prop:"areaName",error:e.errorMessage.areaName}},[r("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.areaName,callback:function(a){e.$set(e.formData,"areaName",a)},expression:"formData.areaName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"区域类型",prop:"areaDictCode",error:e.errorMessage.areaDictCode}},[r("el-radio-group",{model:{value:e.formData.areaDictCode,callback:function(a){e.$set(e.formData,"areaDictCode",a)},expression:"formData.areaDictCode"}},[r("el-radio",{attrs:{label:1}},[e._v("省/直辖市")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("地市")]),e._v(" "),r("el-radio",{attrs:{label:3}},[e._v("区")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sortNum"}},[r("el-input",{attrs:{maxlength:"2"},model:{value:e.formData.sortNum,callback:function(a){e.$set(e.formData,"sortNum",e._n(a))},expression:"formData.sortNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容",maxlength:"100"},model:{value:e.formData.remark,callback:function(a){e.$set(e.formData,"remark",a)},expression:"formData.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"cms-form-footer"},[r("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(a){e.save(!0)}}},[e._v("保存")]),e._v(" "),r("cms-button",{attrs:{type:"rest"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var d=r("C7Lr")(m,c,!1,function(e){r("DVUP")},null,null);a.default=d.exports},DVUP:function(e,a){}});
//# sourceMappingURL=95.f45965c45cb85a413e83.js.map
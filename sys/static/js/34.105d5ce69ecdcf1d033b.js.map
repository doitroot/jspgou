{"version":3,"sources":["webpack:///src/views/platform/permissions/menuManager/apiManger.vue","webpack:///./src/views/platform/permissions/menuManager/apiManger.vue?bb23","webpack:///./src/views/platform/permissions/menuManager/apiManger.vue","webpack:///src/views/platform/permissions/menuManager/edit.vue","webpack:///./src/views/platform/permissions/menuManager/edit.vue?3622","webpack:///./src/views/platform/permissions/menuManager/edit.vue"],"names":["defaultData","apiName","apiUrl","size","page","platformType","menuManager_apiManger","name","mixins","list","props","type","String","Number","default","apis","Array","data","dialogTableVisible","queryParams","assign_default","typeList","allApiIds","checkApiIds","checkApiItems","selfAllItems","allCheck","computed","methods","defaultToggleSelection","_this","this","$refs","dataTable","clearSelection","$nextTick","tableData","map","v","index","i","length","id","toggleRowSelection","getTableData","callback","params","_this2","isPage","arguments","undefined","loading","setTimeout","then","res","code","total","totalElements","content","$errorMessage","message","catch","getTagItem","item","splice","setAllApiIds","value","removeCheckItems","_this3","arr","indexOf","push","toggleApiItems","row","buttonType","allCheckStuatus","state","$index","checkRows","getCheckItemsAll","selection","_this4","$cms","deepCopy","getCheckItems","close","done","created","apiManger","watch","handler","deep","immediate","$emit","permissions_menuManager_apiManger","render","_vm","_h","$createElement","_c","_self","attrs","nativeOn","click","$event","_v","staticClass","_l","tag","key","closable","disable-transitions","on","_s","title","visible","width","lock-scroll","append-to-body","before-close","slot","model","$$v","expression","label","change","disabled","staticStyle","query","$set","colorPicker","directives","rawName","ref","overflow-y","cursor","stripe","max-height","select","row-click","select-all","fixed","prop","min-width","scopedSlots","_u","fn","scope","useScene","getPage","text-align","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","parentIds","parentId","menuName","sortNum","show","menuType","lowerMenu","routingIdentifier","pagePath","accessIdentifier","metaValue","menuImg","redirectedRouting","apiIds","edit","components","mixins_form","options","menuProps","children","menuIds","apiStatus","formData","rules","required","max","custom","rule","Object","menuManager","$route","routing","Error","number","menuid","getFormData","status","getMenuTree","changeFormData","nodeIds","autoAccessIdentifier","concat","arrayToNumber","pop","getApiMenuId","items","update","coreMenu","updateForm","rest","form","resetFields","menuManager_edit","to","collapse","label-width","error","errorMessage","change-on-select","maxlength","_n","get","_e"],"mappings":"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","file":"static/js/34.105d5ce69ecdcf1d033b.js","sourcesContent":["<template>\n  <div>\n    <el-button @click.native=\"dialogTableVisible=true\" size=\"mini\" type=\"primary\">选择api列表</el-button>\n    <div class=\"tag-warpper\">\n      <div v-for=\"(tag,index) in checkApiItems\" :key=\"index\" class=\"tag-warpper__items\">\n      <el-tag  closable @close='getTagItem(tag,index)' :disable-transitions='true'>\n        {{tag.apiName}} &nbsp;&nbsp;{{tag.apiUrl}}\n      </el-tag>\n      </div>\n    </div>\n    <el-dialog title=\"选择API列表\" :visible=\"dialogTableVisible\" width=\"90%\" :lock-scroll='true' :append-to-body='true' :before-close='close'>\n      <div class=\"flex-card-box\">\n        <el-card class=\"box-card\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>已设置的api列表</span>\n          </div>\n          <el-checkbox-group v-model=\"checkApiIds\">\n            <ul class=\"check-items-box\">\n              <li v-for=\"(item,index) in checkApiItems\" :key='index' class=\"check-items\">\n                <el-checkbox class=\"check-items-label\" :label=\"item.id\">\n                  ({{item.apiName}}) {{item.apiUrl}}\n                </el-checkbox>\n              </li>\n            </ul>\n          </el-checkbox-group>\n          <div class=\"card-footer\">\n            <el-checkbox v-model=\"allApiIds\" @change=\"setAllApiIds\">全选</el-checkbox>\n            <el-button size='mini' type=\"primary\" @click=\"removeCheckItems\" :disabled=\"checkApiIds.length<=0\">移除</el-button>\n          </div>\n        </el-card>\n        <div class=\" box-right\">\n          <span class=\"el-icon-d-arrow-right\"></span>\n        </div>\n        <div class=\"box-table\">\n          <section class=\"cms-list-query\">\n            <div class=\"query-group\">\n              <label>api地址</label>\n              <el-input v-model=\"queryParams.apiUrl\" @change=\"query\" style=\"width:400px;\"></el-input>\n            </div>\n            <div class=\"query-group\">\n              <label>api名称</label>\n              <el-input v-model=\"queryParams.apiName\" @change=\"query\"></el-input>\n            </div>\n            <div class=\"query-group\">\n              <cms-button size=\"small\" :colorPicker='true' @click=\"query\">查询</cms-button>\n            </div>\n          </section>\n          <el-table :data=\"tableData\" style=\"width:100%;overflow-y:hidden; cursor: pointer;\" stripe v-loading=\"loading\" @select='getCheckItems' @row-click='checkRows' ref='dataTable' @select-all='getCheckItemsAll' max-height='500'>\n            <el-table-column type=\"selection\" width=\"46\" fixed='left'></el-table-column>\n            <el-table-column prop=\"apiName\" label=\"api名称\" min-width=\"120px\">\n               <template slot-scope=\"scope\">\n                    <div class=\"text-overflow\" :title=\"scope.row.apiName\">\n                      {{scope.row.apiName}}\n                    </div>\n                 </template>\n            </el-table-column>\n            <el-table-column prop=\"apiUrl\" label=\"api地址\" min-width=\"220px\"></el-table-column>\n            <el-table-column prop=\"useScene\" label=\"使用场景\">\n               <template slot-scope=\"scope\">\n                    <div class=\"text-overflow\" :title=\"scope.row.useScene\">\n                      {{scope.row.useScene}}\n                    </div>\n                 </template>\n\n            </el-table-column>\n          </el-table>\n          <cms-pagination @change=\"getPage\" :total='total'></cms-pagination>\n        </div>\n      </div>\n      <div slot=\"footer\" style=\"text-align:center\">\n        <el-button type=\"primary\" @click=\"close\" >确定</el-button>\n        <el-button  @click=\"close\" >取消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n\n</template>\n\n<script>\nimport list from '@/mixins/list'\nimport { apiManagerList } from '@/api/admin/apiManger.js'\nvar defaultData = {\n  apiName: '',\n  apiUrl: '',\n  size: 10,\n  page: 1,\n  platformType: 1\n}\nexport default {\n  name: 'apiManger',\n  mixins: [list],\n  props: {\n    type: {\n      type: [String, Number],\n      default: 1\n    },\n    apis: {\n      type: Array,\n      default: function() {\n        return []\n      }\n    }\n  },\n  data() {\n    return {\n      dialogTableVisible: false, // 弹窗显示\n      queryParams: Object.assign({}, defaultData),\n      typeList: [],\n      allApiIds: false, // 选中的id的全选\n      checkApiIds: [], // 选中的id数组，控制移除用\n      checkApiItems: [], // 勾选的权限对象集合\n      selfAllItems: [], // 处理多选用的临时数组\n      allCheck: false // 全选状态，默认全不选\n    }\n  },\n  computed: {},\n  methods: {\n    defaultToggleSelection() {\n      // 处理回填的默认勾选\n      this.$refs.dataTable.clearSelection()\n      this.$nextTick(() => {\n        this.tableData.map((v, index) => {\n          for (let i = 0; i < this.checkApiItems.length; i++) {\n            if (v.id === this.checkApiItems[i].id) {\n              this.$refs.dataTable.toggleRowSelection(\n                this.tableData[index],\n                true\n              )\n              break\n            }\n          }\n        })\n      })\n    },\n    getTableData(callback, params, isPage = true) {\n      // 获取表格数据,处理翻页选中\n      this.tableData = []\n      this.loading = true\n      this.callback = callback\n      this.isPage = isPage\n      setTimeout(() => {\n        callback(params)\n          .then(res => {\n            if (res.code === 200) {\n              if (isPage) {\n                this.total = res.data.totalElements\n                this.tableData = res.data.content\n                this.defaultToggleSelection()\n              } else {\n                this.tableData = res.data\n              }\n            } else {\n              this.$errorMessage(res.message)\n            }\n            this.loading = false\n          })\n          .catch(res => {\n            this.loading = false\n            // this.$errorMessage('加载失败，请重试！')\n          })\n      }, 1)\n    },\n    getTagItem(item, index) {\n      // 标签移除\n      this.$refs.dataTable.toggleRowSelection(item) // 取消表格选中\n      this.checkApiItems.splice(index, 1)\n    },\n    setAllApiIds(value) {\n      // 设置按钮全选状态\n      if (value) {\n        this.checkApiIds = this.checkApiItems.map(v => v.id)\n      } else {\n        this.checkApiIds = []\n      }\n    },\n    removeCheckItems() {\n      // 移除选中\n      const arr = []\n      this.checkApiItems.map(v => {\n        if (this.checkApiIds.indexOf(v.id) === -1) {\n          arr.push(v)\n        } else {\n          this.$refs.dataTable.toggleRowSelection(v)\n        }\n      })\n      this.checkApiItems = arr\n      this.checkApiIds = []\n    },\n    toggleApiItems(row, buttonType, allCheckStuatus) {\n      // 循环判断一下有没有已经选中过的\n      let state = false\n      let $index = -1\n      this.checkApiItems.map((v, index) => {\n        if (v.id === row.id) {\n          $index = index\n          state = true\n          return\n        }\n      })\n      // 判断当前点击的复选框类型  allClick-全选/反选\n      if (buttonType === 'allClick') {\n        if (allCheckStuatus && !state) {\n          // 全选且不存在，进行添加\n          this.checkApiItems.push(row)\n        } else if (!allCheckStuatus && state) {\n          // 反选且存在，进行删除\n          this.checkApiItems.splice($index, 1)\n        }\n      } else {\n        if (state) {\n          // 进行删除\n          this.checkApiItems.splice($index, 1)\n        } else {\n          // 进行添加\n          this.checkApiItems.push(row)\n        }\n      }\n    },\n    checkRows(row) {\n      // 单击行选中\n      this.checkApiIds = []\n      this.$refs.dataTable.toggleRowSelection(row) // 取消表格选中\n      this.toggleApiItems(row)\n    },\n    getCheckItemsAll(selection) {\n      // 获取到当前选中的所有对象\n      if (selection.length > 0) {\n        this.allCheck = true\n        this.selfAllItems = this.$cms.deepCopy(selection)\n      } else {\n        this.allCheck = false\n      }\n      this.selfAllItems.map(v => {\n        this.toggleApiItems(v, 'allClick', this.allCheck)\n      })\n    },\n    getCheckItems(selection, row) {\n      // 保留住选中的数据行\n      this.toggleApiItems(row)\n    },\n    close(done) {\n      this.dialogTableVisible = false\n    }\n  },\n\n  created() {\n    this.queryParams.platformType = this.type\n    this.getTableData(apiManagerList, this.queryParams)\n  },\n  watch: {\n    apis: {\n      handler() {\n        this.checkApiItems = this.$cms.deepCopy(this.apis)\n        // this.defaultToggleSelection()\n      },\n      deep: true,\n      immediate: true\n    },\n    checkApiIds: {\n      handler() {\n        if (\n          this.checkApiIds.length === this.checkApiItems.length &&\n          this.checkApiIds.length > 0\n        ) {\n          this.allApiIds = true\n        } else {\n          this.allApiIds = false\n        }\n      },\n      deep: true\n    },\n    checkApiItems: {\n      handler() {\n        this.$emit('get', this.checkApiItems)\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" >\n.flex-card-box {\n  padding: 12px;\n  height: 666px;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.box-card {\n  float: left;\n  width: 340px;\n  .el-card__body {\n    padding: 12px 0 0px 12px;\n  }\n}\n.box-right {\n  width: 50px;\n  float: left;\n  height: 100%;\n  line-height: 642px;\n  text-align: center;\n}\n.box-table {\n  margin-left: 50px+340px;\n  padding: 12px;\n  // border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  height: 632px;\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,.1);\n}\n.check-items-box {\n  height: 510px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.check-items-label {\n  .el-checkbox__label {\n    padding-right: 5px;\n    display: inline-block;\n    width: 322px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n    top: 4px;\n  }\n}\n.check-items {\n  height: 32px;\n  line-height: 32px;\n  border-bottom: 1px dashed #e0e0e0;\n  width: 100%;\n}\n.card-footer {\n  width: 100%;\n  padding: 12px 12px 12px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.tag-warpper {\n  width: 100%;\n  padding-top: 12px ;\n  &__items{\n    margin-bottom: 5px\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/permissions/menuManager/apiManger.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.dialogTableVisible=true}}},[_vm._v(\"选择api列表\")]),_vm._v(\" \"),_c('div',{staticClass:\"tag-warpper\"},_vm._l((_vm.checkApiItems),function(tag,index){return _c('div',{key:index,staticClass:\"tag-warpper__items\"},[_c('el-tag',{attrs:{\"closable\":\"\",\"disable-transitions\":true},on:{\"close\":function($event){_vm.getTagItem(tag,index)}}},[_vm._v(\"\\n      \"+_vm._s(tag.apiName)+\"   \"+_vm._s(tag.apiUrl)+\"\\n    \")])],1)}),0),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"选择API列表\",\"visible\":_vm.dialogTableVisible,\"width\":\"90%\",\"lock-scroll\":true,\"append-to-body\":true,\"before-close\":_vm.close}},[_c('div',{staticClass:\"flex-card-box\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"已设置的api列表\")])]),_vm._v(\" \"),_c('el-checkbox-group',{model:{value:(_vm.checkApiIds),callback:function ($$v) {_vm.checkApiIds=$$v},expression:\"checkApiIds\"}},[_c('ul',{staticClass:\"check-items-box\"},_vm._l((_vm.checkApiItems),function(item,index){return _c('li',{key:index,staticClass:\"check-items\"},[_c('el-checkbox',{staticClass:\"check-items-label\",attrs:{\"label\":item.id}},[_vm._v(\"\\n                (\"+_vm._s(item.apiName)+\") \"+_vm._s(item.apiUrl)+\"\\n              \")])],1)}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[_c('el-checkbox',{on:{\"change\":_vm.setAllApiIds},model:{value:(_vm.allApiIds),callback:function ($$v) {_vm.allApiIds=$$v},expression:\"allApiIds\"}},[_vm._v(\"全选\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"disabled\":_vm.checkApiIds.length<=0},on:{\"click\":_vm.removeCheckItems}},[_vm._v(\"移除\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\" box-right\"},[_c('span',{staticClass:\"el-icon-d-arrow-right\"})]),_vm._v(\" \"),_c('div',{staticClass:\"box-table\"},[_c('section',{staticClass:\"cms-list-query\"},[_c('div',{staticClass:\"query-group\"},[_c('label',[_vm._v(\"api地址\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"400px\"},on:{\"change\":_vm.query},model:{value:(_vm.queryParams.apiUrl),callback:function ($$v) {_vm.$set(_vm.queryParams, \"apiUrl\", $$v)},expression:\"queryParams.apiUrl\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"query-group\"},[_c('label',[_vm._v(\"api名称\")]),_vm._v(\" \"),_c('el-input',{on:{\"change\":_vm.query},model:{value:(_vm.queryParams.apiName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"apiName\", $$v)},expression:\"queryParams.apiName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"query-group\"},[_c('cms-button',{attrs:{\"size\":\"small\",\"colorPicker\":true},on:{\"click\":_vm.query}},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"dataTable\",staticStyle:{\"width\":\"100%\",\"overflow-y\":\"hidden\",\"cursor\":\"pointer\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"max-height\":\"500\"},on:{\"select\":_vm.getCheckItems,\"row-click\":_vm.checkRows,\"select-all\":_vm.getCheckItemsAll}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"46\",\"fixed\":\"left\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"apiName\",\"label\":\"api名称\",\"min-width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"text-overflow\",attrs:{\"title\":scope.row.apiName}},[_vm._v(\"\\n                    \"+_vm._s(scope.row.apiName)+\"\\n                  \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"apiUrl\",\"label\":\"api地址\",\"min-width\":\"220px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"useScene\",\"label\":\"使用场景\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"text-overflow\",attrs:{\"title\":scope.row.useScene}},[_vm._v(\"\\n                    \"+_vm._s(scope.row.useScene)+\"\\n                  \")])]}}])})],1),_vm._v(\" \"),_c('cms-pagination',{attrs:{\"total\":_vm.total},on:{\"change\":_vm.getPage}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.close}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.close}},[_vm._v(\"取消\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-f589aa70\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/permissions/menuManager/apiManger.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f589aa70\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./apiManger.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./apiManger.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./apiManger.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f589aa70\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./apiManger.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/permissions/menuManager/apiManger.vue\n// module id = null\n// module chunks = ","<template>\n  <div v-loading='loading'>\n    <cms-breadcrumb to=\"/menuManager\" type='list' :params={platformType:$route.query.platformType} @click=\"rest\">\n      <li>{{$route.name}}</li>\n    </cms-breadcrumb>\n    <div class=\"cms-form-layout\">\n      <cms-prompt :collapse='false'>\n        <li>可进行系统菜单的权限修改</li>\n      </cms-prompt>\n      <h3 class=\"cms-segmentation\">基础信息</h3>\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\">\n      <!-- <el-form-item label=\"当前菜单\" >\n          <el-cascader :options=\"options\" :props=\"menuProps\" :change-on-select='true' v-model=\"menuIds\"  @change=\"changeFormData\">\n          </el-cascader>\n          <div class=\"gray\">显示当前菜单路径，请确认路径关系后再进行修改</div>\n        </el-form-item> -->\n        <el-form-item label=\"上级菜单\" prop=\"parentIds\" :error='errorMessage.parentIds' >\n          <el-cascader :options=\"options\" :props=\"props\" :change-on-select='true' v-model=\"formData.parentIds\" >\n          </el-cascader>\n        </el-form-item>\n        <el-form-item label=\"菜单名称\" prop=\"menuName\" :error='errorMessage.menuName'>\n          <el-input v-model=\"formData.menuName\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路由地址(path)\" prop=\"routingIdentifier\" :error='errorMessage.routingIdentifier'>\n          <el-input v-model=\"formData.routingIdentifier\" @change=\"autoAccessIdentifier\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"页面路径(component)\" prop=\"pagePath\" :error='errorMessage.pagePath'>\n          <el-input v-model=\"formData.pagePath\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"权限标识\" prop=\"accessIdentifier\" :error='errorMessage.accessIdentifier'>\n          <el-input v-model=\"formData.accessIdentifier\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"菜单图标\" prop=\"menuImg\" :error='errorMessage.menuImg'>\n          <el-input v-model=\"formData.menuImg\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路由重定向标识\" prop=\"redirectedRouting\" :error='errorMessage.redirectedRouting'>\n          <el-input v-model=\"formData.redirectedRouting\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"排序值\" prop=\"sortNum\" :error='errorMessage.sortNum'>\n          <el-input v-model.number=\"formData.sortNum\" maxlength=\"2\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"菜单类型\" prop=\"menuType\">\n          <el-radio-group v-model=\"formData.menuType\">\n            <el-radio :label=\"1\">菜单</el-radio>\n            <el-radio :label=\"2\">权限</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"可见\" prop=\"show\" :error='errorMessage.show'>\n          <cms-switch v-model=\"formData.show\"></cms-switch>\n        </el-form-item>\n        <el-form-item label=\"是否展示下级菜单布局\" prop=\"lowerMenu\" :error='errorMessage.lowerMenu'>\n          <cms-switch v-model=\"formData.lowerMenu\"></cms-switch>\n        </el-form-item>\n        <el-form-item label=\"api接口信息\">\n          <api-manger :apis='formData.apis' @get='getApiMenuId' v-if=\"status\" :type=\"$route.query.platformType\"></api-manger>\n        </el-form-item>\n      </el-form>\n      <div class=\"cms-form-footer\">\n        <cms-button @click=\"update(true)\" v-color>修改</cms-button>\n        <cms-button type='rest' @click=\"rest\">重置</cms-button>\n       \n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport apiManger from './apiManger'\nimport rules from '@/rules/index.js'\nimport form from '@/mixins/form.js'\nimport {\n  menuManagerFindAll,\n  checkRouting,\n  menuManagereGet,\n  menuManagerUpdate\n} from './../../../../api/admin/menuManager.js'\n\nvar defaultData = {\n  parentIds: [], // 根目录值\n  parentId: '',\n  menuName: '',\n  sortNum: 10,\n  platformType: '',\n  show: true,\n  menuType: 1,\n  lowerMenu: true,\n  routingIdentifier: '',\n  pagePath: '',\n  accessIdentifier: '',\n  metaValue: '',\n  menuImg: '',\n  redirectedRouting: '',\n  apiIds: []\n}\nexport default {\n  components: {\n    apiManger\n  },\n  mixins: [form],\n  data() {\n    var ischeckRouting = (rule, value, callback) => {\n      // 验证路由唯一\n      checkRouting({\n        id: this.formData.id,\n        platformType: this.$route.query.platformType,\n        routing: value\n      }).then(res => {\n        if (res.code === 200) {\n          if (res.data) {\n            callback()\n          } else {\n            callback(new Error('路由已存在，不允许重复添加'))\n          }\n        }\n      })\n    }\n    return {\n      options: [],\n      menuProps: {\n        value: 'id',\n        label: 'name',\n        children: 'childs'\n      },\n      props: {\n        value: 'id',\n        label: 'name',\n        children: 'childs'\n\n      },\n      menuIds: [], // 当前菜单选择\n      apiStatus: false, // 自定义组件销毁\n      formData: Object.assign({}, defaultData),\n      rules: {\n        parentIds: [rules.required('必须选择一个上级菜单')],\n        menuName: [\n          rules.required('菜单名称必须填写'),\n          rules.max(15, '最大长度为15个字符')\n        ],\n        routingIdentifier: [\n          rules.required('路由地址必须填写'),\n          rules.custom(ischeckRouting)\n        ],\n        sortNum: [rules.required('排序值必填'), rules.number()],\n        menuid: [rules.required()]\n      }\n    }\n  },\n  methods: {\n    getFormData(id) {\n      this.status = false\n      menuManagereGet({ id: id }).then(res => {\n        this.loading = true\n        if (res.code === 200) {\n          this.formData = res.data\n          this.status = true\n          this.formData.apiIds = res.data.apis.map(v => v.id)\n\n          this.getMenuTree()\n        } else {\n          this.$errorMessage(res.message)\n          this.loading = false\n        }\n      })\n    },\n    changeFormData(nodeIds) {\n      const id = nodeIds[nodeIds.length - 1]\n      this.getFormData(id)\n    },\n    autoAccessIdentifier(value) { // 自动填写权限\n      this.formData.accessIdentifier = value\n    },\n    getMenuTree() {\n      menuManagerFindAll({ platformType: this.$route.query.platformType }).then(\n        res => {\n          const root = [{ id: 0, name: '根目录' }]\n          this.options = root.concat(res.data)\n          const menuIds = this.$cms.arrayToNumber(this.$route.query.nodeIds)// 通过路由获取到nodeIds\n          if (menuIds.length === 1) {\n            this.$set(this.formData, 'parentIds', [0])\n            this.menuIds = [0]\n          } else {\n            this.menuIds = Object.assign([], this.$cms.arrayToNumber(this.$route.query.nodeIds))\n            menuIds.pop() // 删除最后一项\n            this.$set(this.formData, 'parentIds', menuIds)\n          }\n          this.loading = false\n        }\n      )\n    },\n    getApiMenuId(items) {\n      // 返回的是选中的菜单对象\n      this.formData.apiIds = items.map(v => v.id)\n    },\n    update(state) {\n      var params = {// 构造传递字符串\n        coreMenu: this.$cms.deepCopy(this.formData),\n        apiIds: this.formData.apiIds\n      }\n      params.coreMenu.parentId =\n        params.coreMenu.parentIds[params.coreMenu.parentIds.length - 1] // 最后一层是他的父级id\n      delete params.coreMenu.apiIds\n      this.updateForm(\n        menuManagerUpdate,\n        params,\n        '/menuManager',\n        'list',\n        { platformType: this.formData.platformType },\n        false\n      )\n    },\n    rest() {\n      this.getFormData(this.$route.query.id)\n      this.formData.platformType = this.$route.query.platformType\n      this.$refs.form.resetFields()\n    }\n  },\n  created() {\n    // 初始化赋值\n    this.loading = true\n    this.getFormData(this.$route.query.id)\n    this.formData.platformType = this.$route.query.platformType\n  }\n}\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/permissions/menuManager/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('cms-breadcrumb',{attrs:{\"to\":\"/menuManager\",\"type\":\"list\",\"params\":{platformType:_vm.$route.query.platformType}},on:{\"click\":_vm.rest}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":false}},[_c('li',[_vm._v(\"可进行系统菜单的权限修改\")])]),_vm._v(\" \"),_c('h3',{staticClass:\"cms-segmentation\"},[_vm._v(\"基础信息\")]),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"}},[_c('el-form-item',{attrs:{\"label\":\"上级菜单\",\"prop\":\"parentIds\",\"error\":_vm.errorMessage.parentIds}},[_c('el-cascader',{attrs:{\"options\":_vm.options,\"props\":_vm.props,\"change-on-select\":true},model:{value:(_vm.formData.parentIds),callback:function ($$v) {_vm.$set(_vm.formData, \"parentIds\", $$v)},expression:\"formData.parentIds\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单名称\",\"prop\":\"menuName\",\"error\":_vm.errorMessage.menuName}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.menuName),callback:function ($$v) {_vm.$set(_vm.formData, \"menuName\", $$v)},expression:\"formData.menuName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"路由地址(path)\",\"prop\":\"routingIdentifier\",\"error\":_vm.errorMessage.routingIdentifier}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},on:{\"change\":_vm.autoAccessIdentifier},model:{value:(_vm.formData.routingIdentifier),callback:function ($$v) {_vm.$set(_vm.formData, \"routingIdentifier\", $$v)},expression:\"formData.routingIdentifier\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"页面路径(component)\",\"prop\":\"pagePath\",\"error\":_vm.errorMessage.pagePath}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.pagePath),callback:function ($$v) {_vm.$set(_vm.formData, \"pagePath\", $$v)},expression:\"formData.pagePath\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限标识\",\"prop\":\"accessIdentifier\",\"error\":_vm.errorMessage.accessIdentifier}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.accessIdentifier),callback:function ($$v) {_vm.$set(_vm.formData, \"accessIdentifier\", $$v)},expression:\"formData.accessIdentifier\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单图标\",\"prop\":\"menuImg\",\"error\":_vm.errorMessage.menuImg}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.menuImg),callback:function ($$v) {_vm.$set(_vm.formData, \"menuImg\", $$v)},expression:\"formData.menuImg\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"路由重定向标识\",\"prop\":\"redirectedRouting\",\"error\":_vm.errorMessage.redirectedRouting}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.redirectedRouting),callback:function ($$v) {_vm.$set(_vm.formData, \"redirectedRouting\", $$v)},expression:\"formData.redirectedRouting\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序值\",\"prop\":\"sortNum\",\"error\":_vm.errorMessage.sortNum}},[_c('el-input',{attrs:{\"maxlength\":\"2\"},model:{value:(_vm.formData.sortNum),callback:function ($$v) {_vm.$set(_vm.formData, \"sortNum\", _vm._n($$v))},expression:\"formData.sortNum\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"菜单类型\",\"prop\":\"menuType\"}},[_c('el-radio-group',{model:{value:(_vm.formData.menuType),callback:function ($$v) {_vm.$set(_vm.formData, \"menuType\", $$v)},expression:\"formData.menuType\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"菜单\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"权限\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"可见\",\"prop\":\"show\",\"error\":_vm.errorMessage.show}},[_c('cms-switch',{model:{value:(_vm.formData.show),callback:function ($$v) {_vm.$set(_vm.formData, \"show\", $$v)},expression:\"formData.show\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否展示下级菜单布局\",\"prop\":\"lowerMenu\",\"error\":_vm.errorMessage.lowerMenu}},[_c('cms-switch',{model:{value:(_vm.formData.lowerMenu),callback:function ($$v) {_vm.$set(_vm.formData, \"lowerMenu\", $$v)},expression:\"formData.lowerMenu\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"api接口信息\"}},[(_vm.status)?_c('api-manger',{attrs:{\"apis\":_vm.formData.apis,\"type\":_vm.$route.query.platformType},on:{\"get\":_vm.getApiMenuId}}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.update(true)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"type\":\"rest\"},on:{\"click\":_vm.rest}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d60afd8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/permissions/menuManager/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5d60afd8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d60afd8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/permissions/menuManager/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
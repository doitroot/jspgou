{"version":3,"sources":["webpack:///src/views/shop/shops/shopLevel/role.vue","webpack:///./src/views/shop/shops/shopLevel/role.vue?7a63","webpack:///./src/views/shop/shops/shopLevel/role.vue"],"names":["defaultData","id","menuids","role","mixins","mixins_form","components","roleTree","data","roleStatus","formData","assign_default","methods","getFormData","_this","this","Object","shopLevel","then","res","menus","map","v","update","_this2","params","$route","query","$refs","getPermsInfo","form","validate","valid","length","loading","code","$successMessage","setTimeout","rest","$routerLink","created","shopLevel_role","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","to","type","_v","_s","staticClass","collapse","ref","model","label-width","label","prop","error","errorMessage","menuIds","_e","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"mKA4BAA,GACAC,GAAA,GACAC,YAEAC,GACAC,QAAAC,EAAA,GACAC,YACAC,WAAA,GAEAC,KALA,WAMA,OACAC,YAAA,EACAC,SAAAC,OAAAX,KAGAY,SACAC,YADA,SACAZ,GAAA,IAAAa,EAAAC,KACMC,OAAAC,EAAA,EAAAD,EAANf,OAAAiB,KAAA,SAAAC,GACAL,EAAAJ,SAAAS,EAAAX,KACAM,EAAAJ,SAAAR,QAAAiB,EAAAX,KAAAY,MAAAC,IAAA,SAAAC,GAAA,OAAAA,EAAArB,QAGAsB,OAPA,WAOA,IAAAC,EAAAT,KACAU,EAAAV,KAAAL,SACAe,EAAAxB,GAAAc,KAAAW,OAAAC,MAAA1B,GACAwB,EAAAvB,QAAAa,KAAAa,MAAAzB,KAAA0B,eAAAR,IAAA,SAAAC,GAAA,OAAAA,EAAArB,KACAc,KAAAa,MAAAE,KAAAC,SAAA,SAAAC,GACAP,EAAAvB,QAAA+B,OAAA,IACAT,EAAAU,SAAA,EACUlB,OAAAC,EAAA,EAAAD,CAAVS,GAAAP,KAAA,SAAAC,GACA,MAAAA,EAAAgB,MACAX,EAAAY,gBAAA,QACAZ,EAAAU,SAAA,EACAG,WAAA,WACAb,EAAAc,OACAd,EAAAe,YAAA,2BACA,MAEAf,EAAAU,SAAA,SAOAM,QAzCA,WA0CAzB,KAAAF,YAAAE,KAAAW,OAAAC,MAAA1B,MCvEewC,GADEC,OAFjB,WAA0B,IAAAC,EAAA5B,KAAa6B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,aAAaC,KAAA,UAAAC,QAAA,YAAAC,MAAAR,EAAA,QAAAS,WAAA,cAA8EN,EAAA,kBAAuBO,OAAOC,GAAA,kBAAAC,KAAA,UAAsCT,EAAA,MAAAH,EAAAa,GAAAb,EAAAc,GAAAd,EAAAjB,OAAAuB,WAAAN,EAAAa,GAAA,KAAAV,EAAA,OAAqEY,YAAA,oBAA8BZ,EAAA,cAAmBO,OAAOM,UAAA,KAAkBb,EAAA,MAAAH,EAAAa,GAAA,uBAAAb,EAAAa,GAAA,KAAAV,EAAA,WAAmEc,IAAA,OAAAP,OAAkBQ,MAAAlB,EAAAjC,SAAAoD,cAAA,WAA4ChB,EAAA,gBAAqBO,OAAOU,MAAA,UAAgBpB,EAAAa,GAAA,iBAAAb,EAAAc,GAAAd,EAAAjB,OAAAC,MAAAsB,MAAA,gBAAAN,EAAAa,GAAA,KAAAV,EAAA,gBAAuGO,OAAOU,MAAA,OAAAC,KAAA,UAAAC,MAAAtB,EAAAuB,aAAAhE,WAAkEyC,EAAA,WAAAG,EAAA,aAAmCc,IAAA,OAAAP,OAAkBc,QAAAxB,EAAAjC,SAAAR,QAAAqD,KAAA,KAAyCZ,EAAAyB,MAAA,OAAAzB,EAAAa,GAAA,KAAAV,EAAA,OAAyCY,YAAA,oBAA8BZ,EAAA,cAAmBE,aAAaC,KAAA,QAAAC,QAAA,YAA+BmB,IAAMC,MAAA3B,EAAApB,UAAoBoB,EAAAa,GAAA,uBAEl+Be,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEvE,EACAsC,GATF,EAVA,SAAAkC,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/90.366f3aa96f30d8d4d410.js","sourcesContent":["<template>\r\n  <div v-loading='loading'>\r\n    <cms-breadcrumb to=\"/shopLevel/list\" type='list'>\r\n      <li>{{$route.name}}</li>\r\n    </cms-breadcrumb>\r\n    <div class=\"cms-form-layout\">\r\n      <cms-prompt :collapse='false'>\r\n        <li>提供店铺等级设置不同的权限功能</li>\r\n      </cms-prompt>\r\n      <el-form ref=\"form\" :model=\"formData\" label-width=\"210px\">\r\n           <el-form-item label=\"等级名称\" >\r\n              {{$route.query.name}}\r\n          </el-form-item>\r\n         <el-form-item label=\"授权功能\" prop=\"menuids\" :error='errorMessage.menuids'>\r\n              <role-tree ref='role' :menuIds='formData.menuids'  v-if=\"roleStatus\" :type='2'></role-tree>\r\n          </el-form-item>\r\n      </el-form>\r\n       <div class=\"cms-form-footer\">\r\n        <cms-button  @click=\"update\" v-color >保存修改</cms-button>\r\n        <!-- <cms-button type='rest' @click=\"rest\">重置</cms-button>  -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport roleTree from './../../../platform/permissions/role/roleTree'\r\nimport form from '@/mixins/form.js'\r\nimport { gradeMenus, saveGradeMenus } from '@/api/shop/shopLevel.js'\r\nvar defaultData = {\r\n  'id': '',\r\n  'menuids': []\r\n}\r\nexport default {\r\n  mixins: [form],\r\n  components: {\r\n    roleTree\r\n  },\r\n  data() {\r\n    return {\r\n      roleStatus: true, // 权限树手动重载\r\n      formData: Object.assign({}, defaultData)\r\n    }\r\n  },\r\n  methods: {\r\n    getFormData(id) {\r\n      gradeMenus({ id: id }).then(res => {\r\n        this.formData = res.data\r\n        this.formData.menuids = res.data.menus.map(v => v.id)\r\n      })\r\n    },\r\n    update() {\r\n      var params = this.formData\r\n      params.id = this.$route.query.id\r\n      params.menuids = this.$refs.role.getPermsInfo().map(v => v.id)// 获取到权限树\r\n      this.$refs.form.validate((valid) => {\r\n        if (params.menuids.length > 0) {\r\n          this.loading = true\r\n          saveGradeMenus(params).then(res => {\r\n            if (res.code === 200) {\r\n              this.$successMessage('修改成功')\r\n              this.loading = false\r\n              setTimeout(() => {\r\n                this.rest()\r\n                this.$routerLink('/shopLevel/list', 'list')\r\n              }, 700)\r\n            } else {\r\n              this.loading = false\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getFormData(this.$route.query.id)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/shop/shops/shopLevel/role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('cms-breadcrumb',{attrs:{\"to\":\"/shopLevel/list\",\"type\":\"list\"}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":false}},[_c('li',[_vm._v(\"提供店铺等级设置不同的权限功能\")])]),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"label-width\":\"210px\"}},[_c('el-form-item',{attrs:{\"label\":\"等级名称\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.$route.query.name)+\"\\n        \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"授权功能\",\"prop\":\"menuids\",\"error\":_vm.errorMessage.menuids}},[(_vm.roleStatus)?_c('role-tree',{ref:\"role\",attrs:{\"menuIds\":_vm.formData.menuids,\"type\":2}}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":_vm.update}},[_vm._v(\"保存修改\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-abab76ea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/shop/shops/shopLevel/role.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-abab76ea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./role.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-abab76ea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shop/shops/shopLevel/role.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
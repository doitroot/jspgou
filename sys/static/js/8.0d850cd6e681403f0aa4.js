webpackJsonp([8],{"8Bhp":function(t,e){},BsSm:function(t,e){},CY5z:function(t,e){},LDax:function(t,e){},MXAd:function(t,e){},OkUM:function(t,e,a){"use strict";var s=a("aA9S"),i=a.n(s),r=a("V07m"),o=a("IHPB"),n=a.n(o),l=a("8zS8"),c=a("5HJ5"),d=a("Jpdf"),u=a.n(d),m={mixins:[c.a],components:{draggable:u.a},props:["value","selectData"],data:function(){return{multiple:!0,visible:!1,checkItems:[],selectBrands:[],queryParams:{page:1,size:10,name:"",queryType:1}}},watch:{selectData:{handler:function(t,e){this.selectBrands=[].concat(n()(t))},immediate:!0,deep:!0},selectBrands:{handler:function(t,e){var a=t.map(function(t){return t.id});this.$emit("input",a)},deep:!0}},methods:{showDialog:function(){this.visible=!0,this.getTableData(l.d,this.queryParams)},checkRows:function(t){this.multiple?this.$refs.dataTable.toggleRowSelection(t):(this.selectIndex=this.tableData.indexOf(t),this.checkItems=[t])},determine:function(){this.selectBrands=i()([],this.checkItems),this.visible=!1,this.$refs.dataTable.clearSelection()},close:function(){this.visible=!1,this.$refs.dataTable.clearSelection()}},created:function(){}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showDialog}},[t._v("选择品牌")])]),t._v(" "),a("el-dialog",{attrs:{title:"选择品牌",width:"80%",visible:t.visible,"before-close":t.close}},[a("div",{staticStyle:{padding:"10px 15px"}},[a("section",{staticClass:"cms-list-query"},[a("div",{staticClass:"query-group"},[a("label",[t._v("品牌名称")]),t._v(" "),a("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.query(e):null}},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}})],1),t._v(" "),a("div",{staticClass:"query-group"},[a("cms-button",{staticStyle:{"margin-left":"50px"},attrs:{size:"small",colorPicker:!0},on:{click:t.query}},[t._v("查询")])],1)]),t._v(" "),a("el-table",{ref:"dataTable",staticStyle:{cursor:"pointer"},attrs:{data:t.tableData,"row-key":"id"},on:{"selection-change":t.getCheckItems,"row-click":t.checkRows}},[t.multiple?a("el-table-column",{attrs:{width:"60",type:"selection","reserve-selection":!0}}):a("el-table-column",{attrs:{width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("el-radio",{attrs:{label:e.$index},model:{value:t.selectIndex,callback:function(e){t.selectIndex=e},expression:"selectIndex"}},[t._v(" ")])],1)}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"品牌名称","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"initials",label:"首字母","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"LOGO","min-width":"180",prop:"logo"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"table-img"},[e.row.resourcesSpaceData?a("img",{attrs:{src:t.$cms.filterUrl(e.row.resourcesSpaceData.url),alt:"mockimg"}}):t._e()])}}])})],1),t._v(" "),a("cms-pagination",{attrs:{total:t.total},on:{change:t.getPage}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.determine}},[t._v("确 定")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.close}},[t._v("取 消")])],1)]),t._v(" "),a("ul",{staticClass:"ad-brand__items"},[a("draggable",{attrs:{options:{animation:150}},model:{value:t.selectBrands,callback:function(e){t.selectBrands=e},expression:"selectBrands"}},t._l(t.selectBrands,function(e){return a("li",{key:e.id,staticClass:"ad-brand__item"},[a("img",{attrs:{src:t.$cms.filterUrl(e.resourcesSpaceData.url),alt:""}})])}),0)],1),t._v(" "),a("span",{staticClass:"gray"},[t._v("\n    设置多张可进行轮播展示，推荐6个\n  ")])],2)},staticRenderFns:[]};var f=a("C7Lr")(m,p,!1,function(t){a("8Bhp")},"data-v-d9393bec",null).exports,v=a("QkjJ"),h={mixins:[c.a],components:{draggable:u.a},props:{value:{},multiple:{type:Boolean,default:!0},type:{type:String,default:"promote"},labelName:{type:String,default:"name"},selectData:{type:Array,default:function(){return[]}},show:{type:Boolean,default:!0}},watch:{selectData:{handler:function(){},deep:!0},showItems:{handler:function(t,e){var a=[];t.forEach(function(t){var e={productName:t.name||t.productName,productId:t.productId||t.id,productImgId:t.converImageId||t.productImgId};a.push(e)}),this.$emit("input",a)},deep:!0}},data:function(){return{dialogVisible:!1,checkItems:[],queryParams:{page:1,size:10,name:""},total:0,showItems:[]}},methods:{getSelect:function(t){this.checkItems=t},getTableData:function(t){var e=this;Object(v.N)(t).then(function(t){200===t.code?(e.total=t.data.totalElements,e.tableData=t.data.content,e.defaultToggleSelection()):e.$errorMessage(t.message),e.loading=!1}).catch(function(t){e.loading=!1})},query:function(){this.queryParams.page=1,this.getTableData(this.queryParams)},getPage:function(t,e){this.queryParams.page=t,this.queryParams.size=e,this.getTableData(this.queryParams)},initData:function(){this.dialogVisible=!0,this.getTableData(this.queryParams)},checkRows:function(t){this.$refs.dataTable.toggleRowSelection(t)},determine:function(){this.showItems=this.showItems.concat(this.checkItems),this.$emit("get",this.showItems),this.close()},deleteCoupon:function(t){this.showItems.splice(t,1),this.checkItems.splice(t,1),this.$refs.dataTable&&this.$refs.dataTable.clearSelection(),this.$emit("get",this.showItems)},close:function(t){this.dialogVisible=!1,this.$refs.dataTable.clearSelection()}},created:function(){this.showItems=i()(this.showItems,this.selectData)}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initData}},[t._v("选择商品")]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogVisible,width:"80%","before-close":t.close}},[a("div",{staticClass:"cms-dialog__body"},[a("section",{staticClass:"cms-list-query"},[a("div",{staticClass:"query-group"},[a("label",[t._v("商品名称")]),t._v(" "),a("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.query(e):null}},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}})],1),t._v(" "),a("div",{staticClass:"query-group"},[a("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:t.query}},[t._v("查询")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataTable",staticStyle:{cursor:"pointer"},attrs:{"element-loading-text":"正在加载...",data:t.tableData,"row-key":"id",height:"350"},on:{"selection-change":t.getSelect,"row-click":t.checkRows}},[a("el-table-column",{attrs:{"min-width":"5%",type:"selection","reserve-selection":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"product.name",label:"商品名称","class-name":"is-height"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"product-table"},[a("div",{staticClass:"product-img"},[a("img",{attrs:{src:t.$cms.filterUrl(e.row.coverImage),alt:e.row.name}})]),t._v(" "),a("div",{staticClass:"product-desc"},[a("div",{staticClass:"product-name"},[t._v("\n                  "+t._s(e.row.name)+"\n                ")])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"价格",prop:"salePrice","class-name":"is-height"}})],1),t._v(" "),a("cms-pagination",{attrs:{total:t.total},on:{change:t.getPage}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.determine}},[t._v("确 定")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.close}},[t._v("取 消")])],1)]),t._v(" "),t.show?a("ul",{staticClass:"prodSearch-intro-ul clearfix"},[a("draggable",{attrs:{options:{animation:150}},model:{value:t.showItems,callback:function(e){t.showItems=e},expression:"showItems"}},t._l(t.showItems,function(e,s){return a("li",{key:e.id,staticClass:"prodSearch-intro-li"},[a("div",{staticClass:"prodSearch-intro-box"},[a("img",{staticClass:"prodSearch-intro-box__img",attrs:{src:t.$cms.filterUrl(e.coverImage)}}),t._v(" "),e.name?a("p",{staticClass:"prodSearch-intro-box__descript"},[t._v("\n                "+t._s(e.name)+"\n            ")]):t._e(),t._v(" "),e.name?t._e():a("p",{staticClass:"prodSearch-intro-box__descript"},[t._v("\n                "+t._s(e.productName)+"\n            ")]),t._v(" "),e.salePrice?a("p",{staticClass:"prodSearch-intro-box__price error"},[t._v("\n              ￥"+t._s(t.$cms.float(e.salePrice))+"\n            ")]):t._e()]),t._v(" "),a("div",{staticClass:"prodSearch-intro-box__cancel",on:{click:function(e){t.deleteCoupon(s)}}},[t._v("\n            取消\n          ")])])}),0)],1):t._e()],1)},staticRenderFns:[]};var g=a("C7Lr")(h,b,!1,function(t){a("Xzef")},"data-v-d24044a0",null).exports,_={props:{data:{type:Object,default:function(){return{}}}},components:{advertSelect:r.a,brandSelect:f,productSelect:g},data:function(){return{groupList:[]}},methods:{getAdvertGrouopList:function(){var t=this;Object(v.p)({isEnable:!0}).then(function(e){200===e.code&&(t.groupList=e.data)})}},created:function(){this.getAdvertGrouopList()}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cms-form-layout"},[a("el-form",{attrs:{model:t.data,"label-width":"210px"}},[a("el-form-item",{attrs:{label:"布局模式",prop:"isEnable"}},[a("el-radio-group",{model:{value:t.data.layoutType,callback:function(e){t.$set(t.data,"layoutType",e)},expression:"data.layoutType"}},[a("el-radio",{attrs:{label:1}},[t._v("宽体布局")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("窄体布局")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"广告版位"}},[a("el-select",{model:{value:t.data.adPostitionId,callback:function(e){t.$set(t.data,"adPostitionId",e)},expression:"data.adPostitionId"}},t._l(t.groupList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.positionName}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"选择品牌"}},[a("brand-select",{attrs:{selectData:t.data.selectBrands},model:{value:t.data.brandIds,callback:function(e){t.$set(t.data,"brandIds",e)},expression:"data.brandIds"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推荐商品"}},[a("product-select",{attrs:{selectData:t.data.productData},model:{value:t.data.productData,callback:function(e){t.$set(t.data,"productData",e)},expression:"data.productData"}})],1)],1)],1)},staticRenderFns:[]};var k=a("C7Lr")(_,y,!1,function(t){a("LDax")},null,null).exports,D=a("HOBB"),I=a.n(D),x={props:["selectData"],data:function(){return{floorPanel:k,currentTabs:"tab1",panelData:[{name:"tab1",title:"精选热卖",isEdit:!1,layoutType:1,adPostitionId:"",brandIds:[],productData:[],selectBrands:[],selectProducts:[]}],selectChildData:[]}},watch:{selectData:{handler:function(t,e){var a=this,s=[],r=[];t.forEach(function(t,e){var i={name:"tab"+parseInt(e+1),id:t.id,title:t.title,isEdit:!1,layoutType:t.layoutType,adPostitionId:t.adPostitionId,brandIds:a.$cms.arrayToNumber(t.brandIds),productData:a.filterProductData(t.products),selectBrands:t.brands,selectProducts:t.products};s.push(i),r.push({})}),this.selectChildData=r,this.panelData=i()([],s)},deep:!0,immediate:!0},panelData:{handler:function(t,e){this.$emit("change",t)},deep:!0}},methods:{filterProductData:function(t){var e=[];return t.forEach(function(t){var a={productName:t.product.name,productId:t.product.id,productImgId:t.showImageId,coverImage:t.showImageUrl,salePrice:t.product.salePrice};e.push(a)}),e},editTabName:function(t,e){t.isEdit=!0,this.$nextTick(function(){var t=document.querySelector("#labelInput"+e);t&&t.focus()})},saveTabName:function(t){""===t.title?t.title="自定义选项":t.isEdit=!1},changeCard:function(t,e){if("add"===e){var a=parseInt(this.panelData.length+1),s={name:"tab"+a,title:"自定义选项"+a,isEdit:!0,layoutType:1,adPostitionId:"",brandIds:[],productData:[],selectBrands:[],selectProducts:[]};this.panelData.push(s),this.currentTabs=s.name,this.$nextTick(function(){var t=document.querySelector("#labelInput"+(a-1));t&&t.focus()})}else{var i=this.panelData.length,r=this.panelData.findIndex(function(e){return e.name===t});if(this.panelData[r].isEdit)return!1;if(1===i)this.$errorMessage("最少保留一项");else{this.panelData.splice(r,1);var o=this.panelData[0].name;this.currentTabs=o}}},cardSort:function(){var t=this,e=document.querySelectorAll("#tabSort .el-tabs__nav")[0];I.a.create(e,{animation:150,onEnd:function(e){var a=t.panelData.splice(e.oldIndex,1)[0];t.panelData.splice(e.newIndex,0,a)}})}},mounted:function(){this.cardSort()}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{id:"tabSort",type:"card",editable:""},on:{edit:t.changeCard},model:{value:t.currentTabs,callback:function(e){t.currentTabs=e},expression:"currentTabs"}},t._l(t.panelData,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{name:e.name}},[a("span",{staticClass:"tab-label__inner",attrs:{slot:"label"},slot:"label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"item.title"},{name:"show",rawName:"v-show",value:e.isEdit,expression:"item.isEdit"}],staticClass:"tab-input",attrs:{type:"text",maxlength:"20",id:"labelInput"+s},domProps:{value:e.title},on:{blur:function(a){t.saveTabName(e)},input:function(a){a.target.composing||t.$set(e,"title",a.target.value)}}}),t._v(" "),a("em",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!item.isEdit"}],on:{dblclick:function(a){t.editTabName(e,s)}}},[t._v(t._s(e.title))])]),t._v(" "),a(t.floorPanel,{tag:"component",attrs:{data:e}})],1)}),1)},staticRenderFns:[]};var C=a("C7Lr")(x,w,!1,function(t){a("QqXy")},"data-v-26fc22c5",null);e.a=C.exports},QqXy:function(t,e){},V07m:function(t,e,a){"use strict";var s=a("QkjJ"),i={props:{multiple:{type:Boolean,default:!0},value:[Array,Number,String]},data:function(){return{selectAds:[],advertList:[]}},methods:{getAdvertsList:function(){var t=this;Object(s.p)().then(function(e){200===e.code&&(t.advertList=e.data)})},changeSelectAds:function(t){this.$emit("input",t)}},created:function(){this.getAdvertsList()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{multiple:t.multiple,size:"mini"},on:{change:t.changeSelectAds},model:{value:t.selectAds,callback:function(e){t.selectAds=e},expression:"selectAds"}},t._l(t.advertList,function(e,s){return a("el-option-group",{key:s,attrs:{label:e.positionAttrName}},t._l(e.advertisementsAttr,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)}),1)],1)},staticRenderFns:[]};var o=a("C7Lr")(i,r,!1,function(t){a("BsSm")},null,null);e.a=o.exports},Xzef:function(t,e){},iWgJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("aA9S"),i=a.n(s),r=a("x1ym"),o=a("lcoF"),n=a("QkjJ"),l=a("V07m"),c=a("OkUM"),d=a("lcYN"),u={floorName:"",subtitle:"",themeColor:"#719ef7",layoutType:1,isShow:!0,adId:"",categoryData:[],remark:"",sortNum:10},m={mixins:[o.a],components:{floorTabs:c.a,categoryTree:d.a,advertSelect:l.a},data:function(){return{formData:i()({},u),rules:{sortNum:[r.a.required(),r.a.number()],isShow:[r.a.required()],floorName:[r.a.required("请填写楼层标题")],adId:[{required:!0,message:"请选择一个广告",trigger:"change"}]},advertList:[],panelLayouts:[]}},methods:{getAdvertsList:function(){var t=this;Object(n.f)().then(function(e){200===e.code&&(t.advertList=e.data)})},getTabsData:function(t){this.panelLayouts=i()([],t)},formatPanelLayouts:function(t){var e=[];return t.forEach(function(t){var a={title:t.title,layoutType:t.layoutType,adPostitionId:t.adPostitionId,brandIds:t.brandIds.toString(),productData:t.productData};e.push(a)}),e},save:function(t){var e={indexLayout:i()({},this.formData),penelLayouts:this.formatPanelLayouts(this.panelLayouts)};this.saveForm(n.K,e,t,"/floorMange/list","list")},reset:function(){this.formData=i()({},u),window.clearInterval(this.timer),this.$refs.form.resetFields(),this.destroyed()}},created:function(){this.getAdvertsList()}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("cms-breadcrumb",{attrs:{to:"/floorMange/list",type:"list"}},[a("li",[t._v(t._s(t.$route.name))])]),t._v(" "),a("div",{staticClass:"cms-form-layout"},[a("cms-prompt",{attrs:{collapse:!1}},[a("li",[t._v("设置首页楼层展示数据")]),t._v(" "),a("li",[t._v("带 * 为必填项")])]),t._v(" "),a("el-form",{ref:"form",staticClass:"error__inline",attrs:{rules:t.rules,model:t.formData,"label-width":"210px"}},[a("el-form-item",{attrs:{label:"楼层标题",prop:"floorName",error:t.errorMessage.floorName}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.formData.floorName,callback:function(e){t.$set(t.formData,"floorName",e)},expression:"formData.floorName"}}),t._v(" "),a("el-color-picker",{staticStyle:{"vertical-align":"middle",position:"relative",top:"-1px"},attrs:{"color-format":"rgb"},model:{value:t.formData.themeColor,callback:function(e){t.$set(t.formData,"themeColor",e)},expression:"formData.themeColor"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"副标题",prop:"positionCode",error:t.errorMessage.positionCode}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.formData.subtitle,callback:function(e){t.$set(t.formData,"subtitle",e)},expression:"formData.subtitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"布局模式",prop:"isEnable"}},[a("el-radio-group",{model:{value:t.formData.layoutType,callback:function(e){t.$set(t.formData,"layoutType",e)},expression:"formData.layoutType"}},[a("el-radio",{attrs:{label:1}},[t._v("宽体布局")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("窄体布局")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序值",prop:"sortNum",error:t.errorMessage.sortNum}},[a("el-input",{attrs:{maxlength:"2"},model:{value:t.formData.sortNum,callback:function(e){t.$set(t.formData,"sortNum",e)},expression:"formData.sortNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否显示",prop:"isShow",error:t.errorMessage.isShow}},[a("cms-switch",{model:{value:t.formData.isShow,callback:function(e){t.$set(t.formData,"isShow",e)},expression:"formData.isShow"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"广告图",prop:"adId"}},[a("el-select",{attrs:{size:"mini"},model:{value:t.formData.adId,callback:function(e){t.$set(t.formData,"adId",e)},expression:"formData.adId"}},t._l(t.advertList,function(e,s){return a("el-option-group",{key:s,attrs:{label:e.positionAttrName}},t._l(e.advertisementsAttr,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"推荐分类"}},[t.status?a("category-tree",{model:{value:t.formData.categoryData,callback:function(e){t.$set(t.formData,"categoryData",e)},expression:"formData.categoryData"}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"说明",prop:"remark",error:t.errorMessage.remark}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:"200"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1),t._v(" "),t.status?a("floor-tabs",{on:{change:t.getTabsData}}):t._e()],1),t._v(" "),a("div",{staticClass:"cms-form-footer"},["save"==t.type?a("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){t.save(!1)}}},[t._v("保存并新增")]):t._e(),t._v(" "),"save"==t.type?a("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(e){t.save(!0)}}},[t._v("保存")]):t._e(),t._v(" "),"save"==t.type?a("cms-button",{attrs:{type:"rest"},on:{click:t.reset}},[t._v("重置")]):t._e()],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(m,p,!1,function(t){a("MXAd")},"data-v-7004c830",null);e.default=f.exports},lcYN:function(t,e,a){"use strict";var s=a("aA9S"),i=a.n(s),r=a("GBzI"),o=a("5HJ5"),n=a("Jpdf"),l=a.n(n),c={mixins:[o.a],components:{draggable:l.a},props:["value","selectData"],data:function(){return{multiple:!0,visible:!1,checkItems:[],selectBrands:[],queryParams:{page:1,size:10,name:"",queryType:1},defaultProps:{label:"cateName",children:"childs"},data:[]}},watch:{selectData:{handler:function(t,e){var a=[];t.forEach(function(t){var e={cateName:t.cate_name,id:t.cate_id};a.push(e)}),this.checkItems=a}},checkItems:{handler:function(t,e){var a=[];t.forEach(function(t){var e={cate_name:t.cateName,cate_id:t.id};a.push(e)}),this.$emit("input",a),this.$emit("change",a)},deep:!0}},methods:{getTreeInfo:function(){var t=this;Object(r.k)().then(function(e){t.data=e.data})},showDialog:function(){var t=this;this.visible=!0,this.$nextTick(function(){t.getTreeInfo();var e=[];t.checkItems.forEach(function(t){e.push(t.id)}),t.$refs.categoryTree.setCheckedKeys(e)})},determine:function(){this.checkItems=i()([],this.$refs.categoryTree.getCheckedNodes()),this.visible=!1,this.$refs.categoryTree.setCheckedKeys([])},changeEditName:function(t){this.$set(this.checkItems[t],"isEdit",!0),this.$nextTick(function(){document.querySelector("#tagInput"+t).focus()})},saveCateName:function(t){t.isEdit=!1},handleClose:function(t){this.checkItems.splice(t,1)},close:function(){this.visible=!1,this.$refs.categoryTree.setCheckedKeys([])}},created:function(){}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showDialog}},[t._v("选择分类")])]),t._v(" "),a("el-dialog",{attrs:{title:"选择分类",width:"350px",visible:t.visible,"before-close":t.close}},[a("div",{staticStyle:{padding:"10px 40px",height:"500px",overflow:"auto"}},[a("el-tree",{ref:"categoryTree",attrs:{data:t.data,props:t.defaultProps,"show-checkbox":"","check-strictly":"","node-key":"id"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.determine}},[t._v("确 定")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.close}},[t._v("取 消")])],1)]),t._v(" "),a("span",{staticClass:"gray"},[t._v("窄体布局推荐最多设置10个，宽体布局推荐最多设置19个，排列在前优先置顶显示,拖动可调整排序")]),t._v(" "),a("div",{staticClass:"cate-tags"},[a("draggable",{attrs:{options:{animation:100}},model:{value:t.checkItems,callback:function(e){t.checkItems=e},expression:"checkItems"}},t._l(t.checkItems,function(e,s){return a("el-tag",{key:e.id,staticClass:"cate-tag",attrs:{closable:"","disable-transitions":""},on:{close:function(e){t.handleClose(s)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!tag.isEdit"}],on:{dblclick:function(e){t.changeEditName(s)}}},[t._v(" "+t._s(e.cateName))]),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"tag.isEdit"},{name:"model",rawName:"v-model",value:e.cateName,expression:"tag.cateName"}],staticClass:"cate-input",attrs:{type:"text",id:"tagInput"+s},domProps:{value:e.cateName},on:{blur:function(a){t.saveCateName(e)},input:function(a){a.target.composing||t.$set(e,"cateName",a.target.value)}}})])}),1)],1)],2)},staticRenderFns:[]};var u=a("C7Lr")(c,d,!1,function(t){a("CY5z")},"data-v-6d487e56",null);e.a=u.exports}});
//# sourceMappingURL=8.0d850cd6e681403f0aa4.js.map
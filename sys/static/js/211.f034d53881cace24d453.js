webpackJsonp([211],{xFZP:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("aA9S"),o=t.n(r),s=t("rVsN"),n=t.n(s),c=t("x1ym"),m=t("lcoF"),l=t("3jsV"),i=t("AsmT"),u=t("sRls"),f={contactMail:"",contactMobile:"",contactName:"",storeName:"",storeUsername:"",memberUsername:"",pStr:"",checkPassword:"",isWechatEnable:!1},v={mixins:[m.a],data:function(){var e=this;return{formData:o()({},f),saveRules:{storeName:[c.a.required("请填写店铺名称"),c.a.len(1,15),c.a.custom(function(a,t,r){Object(i.w)({validName:e.formData.storeName}).then(function(e){e.data?r():r(new Error("店铺名已存在，不允许重复添加"))})})],memberUsername:[c.a.required("请填写店家账号"),c.a.len(1,20),c.a.custom(function(a,t,r){Object(l.a)({username:e.formData.memberUsername}).then(function(e){e.data?r():r(new Error("该店家账号已存在，不允许重复添加"))})})],storeUsername:[c.a.required("请填写商家账号"),c.a.len(1,20),c.a.custom(function(a,t,r){Object(i.y)({validUsername:e.formData.storeUsername}).then(function(e){e.data?r():r(new Error("该商家账号已存在，不允许重复添加"))})})],contactName:[c.a.required("请填写姓名"),c.a.len(1,150),c.a.custom(function(a,t,r){Object(l.g)({validContactName:e.formData.contactName}).then(function(e){e.data?r():r(new Error("姓名已存在，不允许重复添加"))})})],contactMobile:[c.a.required("请填写手机号"),c.a.len(1,150),c.a.phone(),c.a.custom(function(a,t,r){Object(i.x)({validPhone:e.formData.contactMobile}).then(function(e){e.data?r():r(new Error("手机号已注册店铺，不允许重复添加"))})})],contactMail:[c.a.required("请填写邮箱"),c.a.len(1,150),c.a.email(),c.a.custom(function(a,t,r){return new n.a(function(a,t){Object(i.u)({validContactMail:e.formData.contactMail}).then(function(a){a.data?Object(i.f)({email:e.formData.contactMail}).then(function(e){e.data?r():r(new Error("联系人邮箱已存在，不允许重复添加"))}):(r(new Error("联系人邮箱已存在，不允许重复添加")),t())})})})],pStr:[c.a.required("请输入密码"),c.a.custom(function(e,a,t){""===a?t(new Error("请输入密码")):/^[a-zA-Z\d]+$/.test(a)||/^[u4e00-u9fa5]*$/.test(a)?t():t(new Error("只能输入数字和大小写字母"))}),c.a.len(6,16)],checkPassword:[c.a.required("请再次输入密码"),c.a.custom(function(a,t,r){""===t?"save"===e.type?r(new Error("请再次输入密码")):r():t!==e.formData.pStr?r(new Error("两次输入密码不一致!")):r()})],isWechatEnable:[c.a.required("请选择是否开通微信公众号")]}}},components:{cmsMember:u.a},methods:{save:function(e){var a=this.$cms.deepCopy(this.formData);a.pStr=this.$cms.encrypt(a.pStr),delete a.checkPassword,this.saveForm(l.e,a,e,"/selfShops/list","list")}},activated:function(){this.autoFocus(),"save"===this.$route.query.type&&(this.formData=o()({},f))}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("cms-breadcrumb",{attrs:{to:"/selfShops/list"},on:{click:e.rest}},[t("li",[e._v(e._s(e.$route.name))])]),e._v(" "),t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:"true"}},[t("li",[e._v("带 * 为必填项")]),e._v(" "),t("li",[e._v("可对自营店铺进行新增操作")]),e._v(" "),t("li",[e._v("新增保存会同时新增一位会员用户信息（只获取姓名及店家帐号元素）")])]),e._v(" "),t("el-form",{ref:"form",attrs:{rules:e.saveRules,model:e.formData,"label-width":"220px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"店铺名称",prop:"storeName",error:e.errorMessage.storeName}},[t("el-input",{ref:"first",attrs:{autofocus:!0,maxlength:"100"},model:{value:e.formData.storeName,callback:function(a){e.$set(e.formData,"storeName",a)},expression:"formData.storeName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"店家账号",prop:"memberUsername",error:e.errorMessage.memberUsername}},[t("el-input",{model:{value:e.formData.memberUsername,callback:function(a){e.$set(e.formData,"memberUsername",a)},expression:"formData.memberUsername"}}),e._v(" "),t("div",{staticClass:"gray"},[e._v("用于登录商城会员中心")])],1),e._v(" "),t("el-form-item",{attrs:{label:"商家账号",prop:"storeUsername",error:e.errorMessage.storeUsername}},[t("el-input",{model:{value:e.formData.storeUsername,callback:function(a){e.$set(e.formData,"storeUsername",a)},expression:"formData.storeUsername"}}),e._v(" "),t("div",{staticClass:"gray"},[e._v("用于登录商家中心")])],1),e._v(" "),t("el-form-item",{ref:"contactName",attrs:{label:"姓名",prop:"contactName",error:e.errorMessage.contactName}},[t("el-input",{model:{value:e.formData.contactName,callback:function(a){e.$set(e.formData,"contactName",a)},expression:"formData.contactName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"contactMobile",error:e.errorMessage.contactMobile}},[t("el-input",{attrs:{maxlength:"11"},model:{value:e.formData.contactMobile,callback:function(a){e.$set(e.formData,"contactMobile",a)},expression:"formData.contactMobile"}}),e._v(" "),t("div",{staticClass:"gray"},[e._v("用于登录商家中心")])],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"contactMail",error:e.errorMessage.contactMail}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.formData.contactMail,callback:function(a){e.$set(e.formData,"contactMail",a)},expression:"formData.contactMail"}}),e._v(" "),t("div",{staticClass:"gray"},[e._v("用于登录商家中心")])],1),e._v(" "),t("el-form-item",{attrs:{label:"登录密码",prop:"pStr",error:e.errorMessage.pStr}},[t("el-input",{attrs:{type:"password",maxlength:"16"},model:{value:e.formData.pStr,callback:function(a){e.$set(e.formData,"pStr",a)},expression:"formData.pStr"}}),e._v(" "),t("div",{staticClass:"gray"},[e._v("6-16位数字、字母组合")])],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword",error:e.errorMessage.checkPassword}},[t("el-input",{attrs:{type:"password",maxlength:"16"},model:{value:e.formData.checkPassword,callback:function(a){e.$set(e.formData,"checkPassword",a)},expression:"formData.checkPassword"}})],1)],1),e._v(" "),t("div",{staticClass:"cms-form-footer"},[t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(a){e.save(!1)}}},[e._v("新增并保存")]),e._v(" "),t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(a){e.save(!0)}}},[e._v("保存")]),e._v(" "),t("cms-button",{attrs:{type:"rest"},on:{click:e.rest}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},p=t("C7Lr")(v,d,!1,null,null,null);a.default=p.exports}});
//# sourceMappingURL=211.f034d53881cace24d453.js.map
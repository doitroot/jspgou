webpackJsonp([112],{"24oU":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("aA9S"),s=t.n(n),i=t("x1ym"),r=t("lcoF"),u=t("PUYW"),m=t("MGbd"),c=t("+FNC"),o={status:"",areaCode:"",tagId:"",menuGroupName:"",menuList:[{menuName:"菜单名称",childs:[{menuName:"子菜单名称",menuType:"",mediaId:""}]}]},d={name:"wxMenuManageSave",mixins:[r.a],components:{mediaWarpper:u.a,keyWordZone:m.a},data:function(){return{formData:s()({},o),selectedMenuIndex:"",selectedSubMenuIndex:"",menuNameBounds:!1,material:{title:"",linkUrl:"",thumb_url:""},saveRules:{menuGroupName:[i.a.required("菜单组名称不能为空")]},tagName:"",areaInfo:[],sex:["","男","女","不限性别"],client:["","IOS","Android","不限客户端"],languageData:["","简体中文","繁体中文TW","繁体中文HK","英文","印尼","马来","西班牙","韩国","意大利","日本","波兰","葡萄牙","俄国","泰文","越南","阿拉伯语","北印度","希伯来","土耳其","德语","法语"]}},methods:{getFormData:function(e){var a=this;Object(c.k)({id:e}).then(function(e){a.getFansTags(e.data.tagId),a.formData=s()(o,e.data),e.data.area&&(a.formData.areaCode=e.data.area.areaCode,a.getArea(e.data.area)),delete a.formData.menuId;for(var t=0;t<a.formData.menuList.length;t++)for(var n=0;n<a.formData.menuList[t].childs.length;n++)delete a.formData.menuList[t].childs[n].material,delete a.formData.menuList[t].childs[n].childs,delete a.formData.menuList[t].childs[n].id;for(var i=0;i<a.formData.menuList.length;i++)delete a.formData.menuList[i].linkUrl,delete a.formData.menuList[i].material,delete a.formData.menuList[i].mediaId,delete a.formData.menuList[i].menuKey,delete a.formData.menuList[i].menuType,delete a.formData.menuList[i].miniprogramAppid,delete a.formData.menuList[i].miniprogramPagepath,delete a.formData.menuList[i].wReplyKeyword,delete a.formData.menuList[i].id})},getArea:function(e){var a={areaName:e.areaName,code:e.areaCode};this.areaInfo.push(a)},selectedMenu:function(e,a){if(this.selectedMenuIndex===e)this.selectedMenuIndex=-1;else{this.selectedSubMenuIndex="",this.selectedMenuIndex=e;var t=this.formData.menuList[this.selectedMenuIndex];this.checkMenuName(t.menuName)}},selectedSubMenu:function(e,a){this.selectedSubMenuIndex=e;var t=this.formData.menuList[this.selectedMenuIndex].childs[this.selectedSubMenuIndex];this.checkMenuName(t.menuName)},getFansTags:function(e){var a=this;Object(c.z)().then(function(t){t.data.tagList.forEach(function(t){t.id!==parseInt(e)||(a.tagName=t.tagName)}),""===a.tagName&&(a.tagName="全部")})},selectedMenuLevel:function(){return""!==this.selectedMenuIndex&&""===this.selectedSubMenuIndex?1:""!==this.selectedMenuIndex&&""!==this.selectedSubMenuIndex?2:0},selectedMenuType:function(){if(1===this.selectedMenuLevel()&&0===this.formData.menuList[this.selectedMenuIndex].childs.length)switch(this.formData.menuList[this.selectedMenuIndex].menuType){case"view":return 1;case"media_id":case"view_limited":return 2;case"click":case"scancode_push":case"scancode_waitmsg":case"pic_sysphoto":case"pic_photo_or_album":case"pic_weixin":return 3;case"location_select":return 2;case"miniprogram":return 4}else{if(2!==this.selectedMenuLevel())return 1;switch(this.formData.menuList[this.selectedMenuIndex].childs[this.selectedSubMenuIndex].menuType){case"view":return 1;case"media_id":case"view_limited":return 2;case"click":case"scancode_push":case"scancode_waitmsg":case"pic_sysphoto":case"pic_photo_or_album":case"pic_weixin":case"location_select":return 3;case"miniprogram":return 4}}},checkMenuName:function(e){1===this.selectedMenuLevel()&&this.getMenuNameLen(e)<=8?this.menuNameBounds=!1:2===this.selectedMenuLevel()&&this.getMenuNameLen(e)<=16?this.menuNameBounds=!1:this.menuNameBounds=!0},getMenuNameLen:function(e){for(var a=0,t=0;t<e.length;t++){null!=e.charAt(t).match(/[^\x00-\xff]/gi)?a+=2:a+=1}return a}},created:function(){this.getFormData(this.$route.query.id)}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("cms-breadcrumb",{attrs:{to:"/wechatMenuMange/list"}},[t("li",[e._v(e._s(e.$route.name))])]),e._v(" "),t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:"true"}},[t("li",[e._v(" 查看菜单详情，可预览菜单效果")])]),e._v(" "),t("el-form",{ref:"form",attrs:{rules:e.saveRules,model:e.formData,"label-width":"210px"}},[t("el-form-item",{attrs:{label:"菜单组名称：",prop:"menuGroupName",error:e.errorMessage.menuGroupName}},[t("span",[e._v(e._s(e.formData.menuGroupName))])]),e._v(" "),t("el-form-item",{attrs:{label:"显示对象："}},[e.formData.sexDictCode&&""!=e.formData.sexDictCode?t("span",[e._v("【"+e._s(e.sex[parseInt(e.formData.sexDictCode)])+"】")]):e._e(),e._v(" "),e.formData.tagId&&""!=e.formData.tagId?t("span",[e._v("【"+e._s(e.tagName)+"】")]):e._e(),e._v(" "),e.formData.clientDictCode&&""!=e.formData.clientDictCode?t("span",[e._v("【"+e._s(e.client[parseInt(e.formData.clientDictCode)])+"】")]):e._e(),e._v(" "),e.formData.languageDictCode&&""!=e.formData.languageDictCode?t("span",[e._v("【"+e._s(e.languageData[parseInt(e.formData.languageDictCode)])+"】")]):e._e(),e._v(" "),1==e.areaInfo.length?t("span",[e._v("【"+e._s(e.areaInfo[0].areaName)+"】")]):e._e(),e._v(" "),2==e.areaInfo.length?t("span",[e._v("【"+e._s(e.areaInfo[1].areaName+"-"+e.areaInfo[0].areaName)+"】")]):e._e(),e._v(" "),3==e.areaInfo.length?t("span",[e._v("【"+e._s(e.areaInfo[2].areaName+"-"+e.areaInfo[1].areaName+"-"+e.areaInfo[0].areaName)+"】")]):e._e()]),e._v(" "),t("div",{staticClass:"content",staticStyle:{margin:"20px 0px 0 110px"}},[t("div",{attrs:{id:"app-menu"}},[t("div",{staticClass:"weixin-preview"},[t("div",{staticClass:"weixin-hd"},[t("div",{staticClass:"weixin-title"},[e._v(e._s(e.formData.menuGroupName))])]),e._v(" "),t("div",{staticClass:"weixin-bd"},[t("ul",{staticClass:"weixin-menu",attrs:{id:"weixin-menu"}},e._l(e.formData.menuList,function(a,n){return t("li",{key:n,staticClass:"menu-item",class:{current:e.selectedMenuIndex===n&&1==e.selectedMenuLevel()},on:{click:function(a){e.selectedMenu(n,a)}}},[t("div",{staticClass:"menu-item-title"},[t("i",{staticClass:"icon_menu_dot"}),e._v(" "),t("span",[e._v(e._s(a.menuName))])]),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectedMenuIndex===n&&a.childs.length>0,expression:"selectedMenuIndex===i&&btn.childs.length>0"}],staticClass:"weixin-sub-menu"},[e._l(a.childs,function(a,n){return t("li",{key:n,staticClass:"menu-sub-item",class:{current:e.selectedSubMenuIndex===n&&2==e.selectedMenuLevel()},on:{click:function(a){a.stopPropagation(),e.selectedSubMenu(n,a)}}},[t("div",{staticClass:"menu-item-title"},[t("span",[e._v(e._s(a.menuName))])])])}),e._v(" "),t("i",{staticClass:"menu-arrow arrow_out"}),e._v(" "),t("i",{staticClass:"menu-arrow arrow_in"})],2)])}),0)])])])])],1)],1)],1)},staticRenderFns:[]};var f=t("C7Lr")(d,l,!1,function(e){t("tPMd")},"data-v-735caa34",null);a.default=f.exports},tPMd:function(e,a){}});
//# sourceMappingURL=112.ae5285ae9a5999fa1312.js.map
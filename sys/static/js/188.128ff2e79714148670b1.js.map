{"version":3,"sources":["webpack:///src/views/wechat/public/materialLibrary/saveImageText.vue","webpack:///./src/views/wechat/public/materialLibrary/saveImageText.vue?198d","webpack:///./src/views/wechat/public/materialLibrary/saveImageText.vue"],"names":["saveImageText","components","wxPictureZone","data","getData","articles","title","thumb_media_id","author","digest","show_cover_pic","thumbMediaUrl","content","content_source_url","activeIndex","ue","options","toolbars","initialFrameHeight","methods","validateData","items","flag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","this","next","done","v","value","$errorMessage","err","return","saveArticles","_this","Object","wechat","then","res","code","$successMessage","$routerLink","message","updateArticles","_this2","params","id","media_id","mediaId","forEach","i","addArticles","length","push","setActiveIndex","index","getCover","item","$set","request","url","getVideos","getContentImg","img","execCommand","getEditor","editorInstance","deleteArticle","_this3","$nextTick","splice","articlesMove","status","tmpItems","_tmpItems","created","_this4","$route","query","type","loading","requestArray","materialLibrary_saveImageText","render","_vm","_h","$createElement","_c","_self","attrs","to","_v","_s","name","directives","rawName","expression","staticClass","_l","key","class","on","click","$event","style","backgroundImage","$cms","weChatUrl","_e","placeholder","autofocus","maxlength","domProps","input","target","composing","config","ready","model","callback","$$v","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wJAwGAA,GACAC,YACAC,gBAAA,GAEAC,KAJA,WAKA,OACAC,WACAC,WAEAC,MAAA,GACAC,eAAA,GACAC,OAAA,GACAC,OAAA,GACAC,eAAA,EACAC,cAAA,KACAC,QAAA,GACAC,mBAAA,KAGAC,YAAA,EACAC,GAAA,KACAC,SACAC,WAEA,SACA,IACA,OACA,OACA,IACA,OACA,SACA,YACA,aACA,gBACA,cACA,YACA,eACA,cACA,cACA,aACA,aACA,IACA,YACA,YACA,oBACA,sBACA,YACA,WACA,IACA,gBACA,mBACA,aACA,IACA,cACA,YACA,aACA,WACA,IACA,oBACA,oBACA,SACA,IACA,cACA,gBACA,eACA,iBACA,IACA,cACA,cACA,IACA,OACA,SACA,SACA,IACA,YACA,YACA,aACA,cACA,IACA,aACA,YACA,aACA,IACA,aACA,OACA,OACA,YACA,IACA,cACA,cACA,6BACA,YACA,YACA,YACA,YACA,aACA,aACA,YACA,eACA,cACA,cACA,MAGAC,mBAAA,OAKAC,SACAC,aADA,SACAC,GACA,IAAAC,GAAA,EADAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAEA,QAAAC,EAAAC,EAAAC,IAAAC,KAAAzB,YAAAkB,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,OAAAU,EAAAN,EAAAO,MACA,QAAAD,EAAA3B,MAAA,CACAwB,KAAAK,cAAA,YACAb,GAAA,EACA,MAEA,QAAAW,EAAArB,QAAA,CACAkB,KAAAK,cAAA,YACAb,GAAA,EACA,MAEA,QAAAW,EAAA1B,eAAA,CACAuB,KAAAK,cAAA,YACAb,GAAA,EACA,QAhBA,MAAAc,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,aAAAb,GAAAK,EAAAS,QAAAT,EAAAS,SAAA,WAAAb,EAAA,MAAAC,GAmBA,OAAAH,GAEAgB,aAtBA,WAsBA,IAAAC,EAAAT,KACAA,KAAAV,gBACQoB,OAAAC,EAAA,EAAAD,EACRnC,SAAAyB,KAAAzB,WACAqC,KAAA,SAAAC,GACA,MAAAA,EAAAC,MACAL,EAAAM,gBAAA,QACAN,EAAAO,YAAA,yBA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","file":"static/js/188.128ff2e79714148670b1.js","sourcesContent":["<template>\r\n  <div>\r\n    <cms-breadcrumb to=\"/wechatMaterial/list\">\r\n      <li>{{$route.name}}</li>\r\n    </cms-breadcrumb>\r\n    <div class=\"wx-msg cms-form-layout\" v-loading=\"loading\">\r\n      <!-- 图文列表 -->\r\n      <div class=\"wx-msg-list\">\r\n        <h3 class=\"wx-msg__header\">图文列表</h3>\r\n        <el-scrollbar>\r\n          <div class=\"wx-msg-list__body\">\r\n            <template v-for=\"(item,index) in articles\">\r\n              <!-- 第一条新闻-->\r\n              <div @click=\"setActiveIndex(index)\" v-if=\"index==0\" :class=\"activeIndex==index ?'is-active':''\" \r\n               class=\" wx-msg-list__thumb wx-msg-item\" :key=\"index\">\r\n                <div class=\"wx-msg-list__img\" \r\n                 :style=\" item.thumbMediaUrl!=''?{backgroundImage:'url('+ $cms.weChatUrl(item.thumbMediaUrl)+')'}:''\">\r\n                </div>\r\n                <div class=\"wx-msg-list__title\">\r\n                  {{item.title!=''?item.title:'标题'}}\r\n                </div>\r\n                  <div class=\"wx-msg-item__cover\">\r\n                  <span class=\"wx-msg-item__cover--move\" >\r\n                    <i class=\"el-icon-arrow-down\"  @click=\"articlesMove(index,'prev')\"></i>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <!-- 第2-8条新闻-->\r\n              <div v-else @click=\"setActiveIndex(index)\" :class=\"activeIndex==index ?'is-active':''\" class=\"wx-msg-list__sub wx-msg-item\" :key=\"index\">\r\n                <div class=\"wx-msg-list__img--sub\"\r\n                 :style=\"item.thumbMediaUrl!=''?{backgroundImage:'url('+ $cms.weChatUrl(item.thumbMediaUrl)+')'}:''\">\r\n                </div>\r\n                <div class=\"wx-msg-list__title--sub\">\r\n                  {{item.title!=''?item.title:'标题'}}</div>\r\n                <!--删除移动遮罩-->\r\n                <div class=\"wx-msg-item__cover\">\r\n                  <span class=\"wx-msg-item__cover--move\"  >\r\n                    <i class=\"el-icon-arrow-up\"  @click=\"articlesMove(index,'next')\"></i>\r\n                  </span>\r\n                  <span \r\n                  v-if=\"articles.length!=index+1\"\r\n                  class=\"wx-msg-item__cover--move \">\r\n                    <i class=\"el-icon-arrow-down\"  @click=\"articlesMove(index,'prev')\"></i>\r\n                  </span>\r\n                  <span class=\"wx-msg-item__cover--delete \">\r\n                    <i class=\"el-icon-delete\" @click=\"deleteArticle(index)\"></i>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </div>\r\n        </el-scrollbar>\r\n        <!-- 新增图文 -->\r\n        <div class=\"wx-msg-list__add\" @click=\"addArticles\">\r\n          <i class=\"el-icon-plus\"></i>\r\n        </div>\r\n      </div>\r\n      <!-- 文章内容 -->\r\n      <div class=\"wx-msg-content\">\r\n        <div class=\"wx-msg-content__inner\">\r\n          <input type=\"text\" class=\"wx-content__title\" v-model=\"articles[activeIndex].title\" \r\n          placeholder=\"请在这里输入标题\" autofocus maxlength=\"48\">\r\n          <label class=\"wx-content__label\">{{articles[activeIndex].title.length}}/48</label>\r\n        </div>\r\n        <div class=\"wx-msg-content__inner\">\r\n          <input type=\"text\" class=\"wx-content__author\" v-model=\"articles[activeIndex].author\" \r\n          placeholder=\"请输入作者\" maxlength=\"8\">\r\n          <label class=\"wx-content__label\">{{articles[activeIndex].author.length}}/8</label>\r\n        </div>\r\n         <div class=\"wx-msg-content__inner\">\r\n          <input type=\"text\" class=\"wx-content__author\" v-model=\"articles[activeIndex].content_source_url\" \r\n          placeholder=\"原创链接地址\" maxlength=\"100\">\r\n         \r\n        </div>  \r\n        <div class=\"wx-msg-contet__editor\">\r\n          <cms-editor v-model=\"articles[activeIndex].content\" @ready='getEditor' :config='options'></cms-editor>\r\n        </div>\r\n      </div>\r\n      <div class=\"wx-msg-media\">\r\n        <h3 class=\"wx-msg__header\">多媒体</h3>\r\n        <ul class=\"wx-msg-media__items\">\r\n          <li class=\"wx-msg-media__item wx-msg-media__item--bn\">\r\n            <wx-picture-zone @change=\"getContentImg\" :index='activeIndex'>图片</wx-picture-zone>\r\n          </li>\r\n        </ul>\r\n        <h3 class=\"wx-msg__header\">封面</h3>   \r\n         <ul class=\"wx-msg-media__items\">\r\n            <wx-picture-zone @change=\"getCover\" :index='activeIndex'\r\n             class=\"wx-msg-media__item wx-msg-media__item--bn\">新增封面</wx-picture-zone>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"wx-msg__footer\">\r\n       <el-button type=\"primary\" @click=\"updateArticles\" v-if=\"$route.query.type=='update'\">修改并保存</el-button>\r\n      <el-button type=\"primary\" @click=\"saveArticles\" v-else>保存</el-button> \r\n    </div>\r\n \r\n   \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport wxPictureZone from './components/wxPictureZone'\r\nimport { wechatSaveNews, wechatGetMediaById, wechatUpdateNews } from './../../../../api/wechat'\r\nexport default {\r\n  components: {\r\n    wxPictureZone\r\n  },\r\n  data() {\r\n    return {\r\n      getData: {}, // 获取的文章数据\r\n      articles: [\r\n        {\r\n          title: '',\r\n          thumb_media_id: '',\r\n          author: '',\r\n          digest: '',\r\n          show_cover_pic: 0,\r\n          thumbMediaUrl: null,\r\n          content: '',\r\n          content_source_url: ''\r\n        }\r\n      ], // 图文素材集合\r\n      activeIndex: 0,\r\n      ue: null,\r\n      options: {\r\n        toolbars: [\r\n          [\r\n            'source',\r\n            '|',\r\n            'undo',\r\n            'redo',\r\n            '|',\r\n            'bold',\r\n            'italic',\r\n            'underline',\r\n            'fontborder',\r\n            'strikethrough',\r\n            'superscript',\r\n            'subscript',\r\n            'removeformat',\r\n            'formatmatch',\r\n            'autotypeset',\r\n            'blockquote',\r\n            'pasteplain',\r\n            '|',\r\n            'forecolor',\r\n            'backcolor',\r\n            'insertorderedlist',\r\n            'insertunorderedlist',\r\n            'selectall',\r\n            'cleardoc',\r\n            '|',\r\n            'rowspacingtop',\r\n            'rowspacingbottom',\r\n            'lineheight',\r\n            '|',\r\n            'customstyle',\r\n            'paragraph',\r\n            'fontfamily',\r\n            'fontsize',\r\n            '|',\r\n            'directionalityltr',\r\n            'directionalityrtl',\r\n            'indent',\r\n            '|',\r\n            'justifyleft',\r\n            'justifycenter',\r\n            'justifyright',\r\n            'justifyjustify',\r\n            '|',\r\n            'touppercase',\r\n            'tolowercase',\r\n            '|',\r\n            'link',\r\n            'unlink',\r\n            'anchor',\r\n            '|',\r\n            'imagenone',\r\n            'imageleft',\r\n            'imageright',\r\n            'imagecenter',\r\n            '|',\r\n            'insertcode',\r\n            'pagebreak',\r\n            'background',\r\n            '|',\r\n            'horizontal',\r\n            'date',\r\n            'time',\r\n            'wordimage',\r\n            '|',\r\n            'inserttable',\r\n            'deletetable',\r\n            'insertparagraphbeforetable',\r\n            'insertrow',\r\n            'deleterow',\r\n            'insertcol',\r\n            'deletecol',\r\n            'mergecells',\r\n            'mergeright',\r\n            'mergedown',\r\n            'splittocells',\r\n            'splittorows',\r\n            'splittocols',\r\n            '|'\r\n          ]\r\n        ],\r\n        initialFrameHeight: 500\r\n      } // 编辑器配置\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    validateData(items) {\r\n      let flag = true\r\n      for (const v of this.articles) {\r\n        if (v.title === '') {\r\n          this.$errorMessage('必须填写一个标题')\r\n          flag = false\r\n          break\r\n        }\r\n        if (v.content === '') {\r\n          this.$errorMessage('图文内容不能为空')\r\n          flag = false\r\n          break\r\n        }\r\n        if (v.thumb_media_id === '') {\r\n          this.$errorMessage('图文需要一个封面')\r\n          flag = false\r\n          break\r\n        }\r\n      }\r\n      return flag\r\n    },\r\n    saveArticles() { // 保存模板\r\n      if (this.validateData()) {\r\n        wechatSaveNews({\r\n          articles: this.articles\r\n        }).then(res => {\r\n          if (res.code === 200) {\r\n            this.$successMessage('保存成功')\r\n            this.$routerLink('/wechatMaterial/list')\r\n          } else {\r\n            this.$errorMessage(res.message)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    updateArticles() {\r\n      const params = {\r\n        id: this.getData.id,\r\n        media_id: this.getData.mediaId,\r\n        articles: this.articles\r\n      }\r\n      if (this.validateData()) {\r\n        params.articles.forEach((v, i) => {\r\n          v['index'] = i\r\n        })\r\n        wechatUpdateNews(params).then(res => {\r\n          if (res.code === 200) {\r\n            this.$successMessage('编辑成功')\r\n            this.$routerLink('/wechatMaterial/list')\r\n          } else {\r\n            this.$errorMessage(res.message)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    addArticles() {\r\n      // 新增文章\r\n      const data = {\r\n        title: '',\r\n        thumb_media_id: '',\r\n        author: '',\r\n        digest: '',\r\n        show_cover_pic: 0,\r\n        thumbMediaUrl: '',\r\n        content: '',\r\n        content_source_url: ''\r\n      }\r\n      if (this.articles.length < 8) {\r\n        this.articles.push(data)\r\n        this.activeIndex = this.activeIndex + 1\r\n      } else {\r\n        this.$errorMessage('最多只能添加8条图文信息')\r\n      }\r\n    },\r\n\r\n    setActiveIndex(index) {\r\n      // 设置当前选中的文章\r\n      this.activeIndex = index\r\n    },\r\n    getCover(item, index) {\r\n      // 获取封面图片\r\n      this.$set(this.articles[index], 'thumbMediaUrl', item[0].request.url)\r\n      this.$set(this.articles[index], 'thumb_media_id', item[0].mediaId)\r\n    },\r\n    getVideos(value) {\r\n\r\n    },\r\n    getContentImg(item, index) {\r\n      const img = `<img src=${item[0].request.url}  style='max-width:750px'/>`\r\n      this.ue.execCommand('insertHtml', img)\r\n    },\r\n    getEditor(editorInstance) {\r\n      // 获取到编辑器实例\r\n      this.ue = editorInstance\r\n    },\r\n    deleteArticle(index) { // 删除图文列表\r\n      this.$nextTick(() => {\r\n        this.activeIndex = index - 1\r\n      })\r\n      this.articles.splice(index, 1)\r\n    },\r\n    articlesMove(index, status) { // 图片移动\r\n      if (this.articles.length > 1) {\r\n        if (status === 'next') {\r\n          const tmpItems = this.articles[index - 1]\r\n          this.$set(\r\n            this.articles,\r\n            index - 1,\r\n            this.articles[index]\r\n          )\r\n          this.$set(this.articles, index, tmpItems)\r\n        } else {\r\n          const tmpItems = this.articles[index + 1]\r\n          this.$set(\r\n            this.articles,\r\n            index + 1,\r\n            this.articles[index]\r\n          )\r\n          this.$set(this.articles, index, tmpItems)\r\n        }\r\n      }\r\n    }\r\n\r\n  },\r\n  created() {\r\n    if (this.$route.query.type === 'update') {\r\n      this.loading = true\r\n      wechatGetMediaById({\r\n        mediaId: this.$route.query.mediaId,\r\n        type: 'news'\r\n      }).then(res => {\r\n        if (res.code === 200) {\r\n          this.getData = res.data\r\n          this.articles = res.data.requestArray\r\n          this.loading = false\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/wechat/public/materialLibrary/saveImageText.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('cms-breadcrumb',{attrs:{\"to\":\"/wechatMaterial/list\"}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"wx-msg cms-form-layout\"},[_c('div',{staticClass:\"wx-msg-list\"},[_c('h3',{staticClass:\"wx-msg__header\"},[_vm._v(\"图文列表\")]),_vm._v(\" \"),_c('el-scrollbar',[_c('div',{staticClass:\"wx-msg-list__body\"},[_vm._l((_vm.articles),function(item,index){return [(index==0)?_c('div',{key:index,staticClass:\" wx-msg-list__thumb wx-msg-item\",class:_vm.activeIndex==index ?'is-active':'',on:{\"click\":function($event){_vm.setActiveIndex(index)}}},[_c('div',{staticClass:\"wx-msg-list__img\",style:(item.thumbMediaUrl!=''?{backgroundImage:'url('+ _vm.$cms.weChatUrl(item.thumbMediaUrl)+')'}:'')}),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-list__title\"},[_vm._v(\"\\n                \"+_vm._s(item.title!=''?item.title:'标题')+\"\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-item__cover\"},[_c('span',{staticClass:\"wx-msg-item__cover--move\"},[_c('i',{staticClass:\"el-icon-arrow-down\",on:{\"click\":function($event){_vm.articlesMove(index,'prev')}}})])])]):_c('div',{key:index,staticClass:\"wx-msg-list__sub wx-msg-item\",class:_vm.activeIndex==index ?'is-active':'',on:{\"click\":function($event){_vm.setActiveIndex(index)}}},[_c('div',{staticClass:\"wx-msg-list__img--sub\",style:(item.thumbMediaUrl!=''?{backgroundImage:'url('+ _vm.$cms.weChatUrl(item.thumbMediaUrl)+')'}:'')}),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-list__title--sub\"},[_vm._v(\"\\n                \"+_vm._s(item.title!=''?item.title:'标题'))]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-item__cover\"},[_c('span',{staticClass:\"wx-msg-item__cover--move\"},[_c('i',{staticClass:\"el-icon-arrow-up\",on:{\"click\":function($event){_vm.articlesMove(index,'next')}}})]),_vm._v(\" \"),(_vm.articles.length!=index+1)?_c('span',{staticClass:\"wx-msg-item__cover--move \"},[_c('i',{staticClass:\"el-icon-arrow-down\",on:{\"click\":function($event){_vm.articlesMove(index,'prev')}}})]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"wx-msg-item__cover--delete \"},[_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){_vm.deleteArticle(index)}}})])])])]})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-list__add\",on:{\"click\":_vm.addArticles}},[_c('i',{staticClass:\"el-icon-plus\"})])],1),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-content\"},[_c('div',{staticClass:\"wx-msg-content__inner\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.articles[_vm.activeIndex].title),expression:\"articles[activeIndex].title\"}],staticClass:\"wx-content__title\",attrs:{\"type\":\"text\",\"placeholder\":\"请在这里输入标题\",\"autofocus\":\"\",\"maxlength\":\"48\"},domProps:{\"value\":(_vm.articles[_vm.activeIndex].title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.articles[_vm.activeIndex], \"title\", $event.target.value)}}}),_vm._v(\" \"),_c('label',{staticClass:\"wx-content__label\"},[_vm._v(_vm._s(_vm.articles[_vm.activeIndex].title.length)+\"/48\")])]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-content__inner\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.articles[_vm.activeIndex].author),expression:\"articles[activeIndex].author\"}],staticClass:\"wx-content__author\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入作者\",\"maxlength\":\"8\"},domProps:{\"value\":(_vm.articles[_vm.activeIndex].author)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.articles[_vm.activeIndex], \"author\", $event.target.value)}}}),_vm._v(\" \"),_c('label',{staticClass:\"wx-content__label\"},[_vm._v(_vm._s(_vm.articles[_vm.activeIndex].author.length)+\"/8\")])]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-content__inner\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.articles[_vm.activeIndex].content_source_url),expression:\"articles[activeIndex].content_source_url\"}],staticClass:\"wx-content__author\",attrs:{\"type\":\"text\",\"placeholder\":\"原创链接地址\",\"maxlength\":\"100\"},domProps:{\"value\":(_vm.articles[_vm.activeIndex].content_source_url)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.articles[_vm.activeIndex], \"content_source_url\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-contet__editor\"},[_c('cms-editor',{attrs:{\"config\":_vm.options},on:{\"ready\":_vm.getEditor},model:{value:(_vm.articles[_vm.activeIndex].content),callback:function ($$v) {_vm.$set(_vm.articles[_vm.activeIndex], \"content\", $$v)},expression:\"articles[activeIndex].content\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg-media\"},[_c('h3',{staticClass:\"wx-msg__header\"},[_vm._v(\"多媒体\")]),_vm._v(\" \"),_c('ul',{staticClass:\"wx-msg-media__items\"},[_c('li',{staticClass:\"wx-msg-media__item wx-msg-media__item--bn\"},[_c('wx-picture-zone',{attrs:{\"index\":_vm.activeIndex},on:{\"change\":_vm.getContentImg}},[_vm._v(\"图片\")])],1)]),_vm._v(\" \"),_c('h3',{staticClass:\"wx-msg__header\"},[_vm._v(\"封面\")]),_vm._v(\" \"),_c('ul',{staticClass:\"wx-msg-media__items\"},[_c('wx-picture-zone',{staticClass:\"wx-msg-media__item wx-msg-media__item--bn\",attrs:{\"index\":_vm.activeIndex},on:{\"change\":_vm.getCover}},[_vm._v(\"新增封面\")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"wx-msg__footer\"},[(_vm.$route.query.type=='update')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateArticles}},[_vm._v(\"修改并保存\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveArticles}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1c580ce8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/wechat/public/materialLibrary/saveImageText.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c580ce8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./saveImageText.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./saveImageText.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./saveImageText.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c580ce8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./saveImageText.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/wechat/public/materialLibrary/saveImageText.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
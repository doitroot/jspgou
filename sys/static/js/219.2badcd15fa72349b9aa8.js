webpackJsonp([219],{PBf9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),o=a.n(r),s=a("x1ym"),i=a("lcoF"),l=a("NDfU"),n=a("GBzI"),c={parentId:"",parentIds:[0],productTypeId:"",templatePath:"/default",resourcesSpaceId:""},m={mixins:[i.a],data:function(){return{loading:!1,options:[],props:{value:"id",label:"cateName",children:"childs",disabled:"isAuth"},roleList:["超级管理员","运营"],formData:o()({},c),rules:{cateName:[s.a.required()],show:[s.a.required()],virtual:[s.a.required()],productTypeId:[s.a.required("必须选择一个类型","blur")],bondPrice:[s.a.required(),s.a.decimal()],commissionRate:[s.a.required(),s.a.number()],resourcesSpaceId:[s.a.required("请选择图标","change")]},productTypeItems:[]}},methods:{getCateName:function(e){this.formData.cateTitle=e,this.formData.cateKewords=e,this.formData.cateDescription=e},rest:function(){this.$refs.form.resetFields(),this.destroyed(),this.getFormData(this.$route.query.id)},getFormData:function(e){var t=this;Object(n.c)({id:e}).then(function(e){t.formData=e.data,e.data.nodeIds.length<=1?t.formData.parentIds=[0]:t.formData.parentIds=e.data.nodeIds.slice(0,-1)})},getMenuTree:function(){var e=this;Object(n.k)().then(function(t){e.options=[{id:0,cateName:"根目录"}].concat(t.data)})},getProductTypeItems:function(){var e=this;Object(l.i)().then(function(t){e.productTypeItems=t.data})},update:function(){if(""===this.formData.resourcesSpaceId)this.$errorMessage("请至少选择一个图标");else{var e=o()({},this.formData);e.parentId=e.parentIds[e.parentIds.length-1],this.updateForm(n.l,e,"/productCategory/list","list")}},getAll:function(){this.getFormData(this.$route.query.id),this.getMenuTree(),this.getProductTypeItems()}},created:function(){this.formData=o()({},c),this.getAll()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("cms-breadcrumb",{attrs:{to:"/productCategory/list",type:"list"}},[a("li",[e._v(e._s(e.$route.name))])]),e._v(" "),a("div",{staticClass:"cms-form-layout"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"上级分类：",prop:"nameAlias"}},[a("el-cascader",{attrs:{options:e.options,props:e.props,"change-on-select":!0,disabled:!0},model:{value:e.formData.parentIds,callback:function(t){e.$set(e.formData,"parentIds",t)},expression:"formData.parentIds"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名称：",prop:"cateName"}},[a("el-input",{attrs:{maxlength:"150"},on:{change:e.getCateName},model:{value:e.formData.cateName,callback:function(t){e.$set(e.formData,"cateName",t)},expression:"formData.cateName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类别名：",prop:"nameAlias"}},[a("el-input",{attrs:{maxlength:"150"},model:{value:e.formData.nameAlias,callback:function(t){e.$set(e.formData,"nameAlias",t)},expression:"formData.nameAlias"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置分类别名，商城显示优先显示别名")])],1),e._v(" "),a("el-form-item",{attrs:{label:"保证金：",prop:"bondPrice"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.formData.bondPrice,callback:function(t){e.$set(e.formData,"bondPrice",t)},expression:"formData.bondPrice"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置商家入住时主营类目需要缴纳的保证金")])],1),e._v(" "),a("el-form-item",{attrs:{label:"佣金比例：",prop:"commissionRate"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.formData.commissionRate,callback:function(t){e.$set(e.formData,"commissionRate",e._n(t))},expression:"formData.commissionRate"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置商家入住时经营分类需要支付给平台的费用比例")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示：",prop:"show"}},[a("cms-switch",{model:{value:e.formData.show,callback:function(t){e.$set(e.formData,"show",t)},expression:"formData.show"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置该分类是否显示在商城分类导航中")])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型：",prop:"productTypeId"}},[a("el-select",{attrs:{filterable:""},model:{value:e.formData.productTypeId,callback:function(t){e.$set(e.formData,"productTypeId",t)},expression:"formData.productTypeId"}},e._l(e.productTypeItems,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分类图标：",prop:"resourcesSpaceId"}},[a("cms-picture-zone",{attrs:{data:e.formData.resourcesSpace},model:{value:e.formData.resourcesSpaceId,callback:function(t){e.$set(e.formData,"resourcesSpaceId",t)},expression:"formData.resourcesSpaceId"}},[a("cms-button",{attrs:{size:"small",type:"info",icon:"correlation"}},[e._v("选择图标")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分类页标题：",prop:"cateTitle"}},[a("el-input",{attrs:{maxlength:"150"},model:{value:e.formData.cateTitle,callback:function(t){e.$set(e.formData,"cateTitle",t)},expression:"formData.cateTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类页关键字：",prop:"cateKewords"}},[a("el-input",{attrs:{maxlength:"255"},model:{value:e.formData.cateKewords,callback:function(t){e.$set(e.formData,"cateKewords",t)},expression:"formData.cateKewords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类页描述：",prop:"cateDescription"}},[a("el-input",{attrs:{maxlength:"255",type:"textarea",rows:4},model:{value:e.formData.cateDescription,callback:function(t){e.$set(e.formData,"cateDescription",t)},expression:"formData.cateDescription"}})],1)],1),e._v(" "),a("div",{staticClass:"cms-form-footer"},[a("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/productCategory/update",expression:"'/productCategory/update'"},{name:"color",rawName:"v-color"}],on:{click:function(t){e.update(!1)}}},[e._v("修改")]),e._v(" "),a("cms-button",{attrs:{type:"rest"},on:{click:e.rest}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},d=a("C7Lr")(m,p,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=219.2badcd15fa72349b9aa8.js.map
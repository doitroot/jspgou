webpackJsonp([217],{vmVQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),o=a.n(r),s=a("x1ym"),l=a("lcoF"),i=a("NDfU"),n=a("GBzI"),c={cateName:"",nameAlias:"",parentId:"",parentIds:[],bondPrice:0,commissionRate:10,show:!0,virtual:!1,templatePath:"默认模板",productTypeId:"",resourcesSpaceId:"",cateTitle:"",cateKewords:"",cateDescription:""},m={mixins:[l.a],data:function(){return{loading:!1,options:[],props:{value:"id",label:"cateName",children:"childs",disabled:"isAuth"},roleList:["超级管理员","运营"],formData:o()({},c),rules:{cateName:[s.a.required()],show:[s.a.required()],virtual:[s.a.required()],templatePath:[s.a.required()],productTypeId:[s.a.required("必须选择一个类型","change")],bondPrice:[s.a.required(),s.a.decimal()],commissionRate:[s.a.required(),s.a.number()],resourcesSpaceId:[s.a.required("请选择图标","change")]},productTypeItems:[]}},methods:{getCateName:function(e){this.formData.cateTitle=e,this.formData.cateKewords=e,this.formData.cateDescription=e},getMenuTree:function(){var e=this;Object(n.k)().then(function(t){e.options=[{id:0,cateName:"根目录"}].concat(t.data)})},getProductTypeItems:function(){var e=this;Object(i.i)().then(function(t){e.productTypeItems=t.data})},save:function(e){var t=this,a=this.$cms.deepCopy(this.formData);a.parentId=a.parentIds[a.parentIds.length-1],delete a.parentIds,this.saveForm(n.h,a,e,"/productCategory/list","list").then(function(e){t.getMenuTree()})},rest:function(){window.clearInterval(this.timer),this.autoFocus(),this.$refs.form.resetFields(),this.destroyed(),this.formData.parentIds=[0]},getAll:function(){this.getMenuTree(),this.getProductTypeItems()}},created:function(){this.formData=o()({},c),this.formData.parentIds=this.$cms.arrayToNumber(this.$route.query.nodeIds),this.formData.commissionRate=this.$route.query.rate,this.getAll()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("cms-breadcrumb",{attrs:{to:"/productCategory/list",type:"list"}},[a("li",[e._v(e._s(e.$route.name))])]),e._v(" "),a("div",{staticClass:"cms-form-layout"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"上级分类：",prop:"nameAlias"}},[a("el-cascader",{attrs:{options:e.options,props:e.props,"change-on-select":!0},model:{value:e.formData.parentIds,callback:function(t){e.$set(e.formData,"parentIds",t)},expression:"formData.parentIds"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("不选择，默认为顶级分类，保存后，此项无法修改，请谨慎选择")])],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名称：",prop:"cateName"}},[a("el-input",{attrs:{maxlength:"150"},on:{change:e.getCateName},model:{value:e.formData.cateName,callback:function(t){e.$set(e.formData,"cateName",t)},expression:"formData.cateName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类别名：",prop:"nameAlias"}},[a("el-input",{attrs:{maxlength:"150"},model:{value:e.formData.nameAlias,callback:function(t){e.$set(e.formData,"nameAlias",t)},expression:"formData.nameAlias"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置分类别名，商城显示优先显示别名")])],1),e._v(" "),a("el-form-item",{attrs:{label:"保证金：",prop:"bondPrice"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.formData.bondPrice,callback:function(t){e.$set(e.formData,"bondPrice",t)},expression:"formData.bondPrice"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置商家入住时主营类目需要缴纳的保证金")])],1),e._v(" "),a("el-form-item",{attrs:{label:"佣金比例：",prop:"commissionRate"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.formData.commissionRate,callback:function(t){e.$set(e.formData,"commissionRate",t)},expression:"formData.commissionRate"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置商家入住时经营分类需要支付给平台的费用比例")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示：",prop:"show"}},[a("cms-switch",{model:{value:e.formData.show,callback:function(t){e.$set(e.formData,"show",t)},expression:"formData.show"}}),e._v(" "),a("span",{staticClass:"gray"},[e._v("设置该分类是否显示在商城分类导航中")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否为虚拟分类：",prop:"virtual"}},[a("cms-switch",{model:{value:e.formData.virtual,callback:function(t){e.$set(e.formData,"virtual",t)},expression:"formData.virtual"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类模版：",prop:"templatePath"}},[a("el-select",{model:{value:e.formData.templatePath,callback:function(t){e.$set(e.formData,"templatePath",t)},expression:"formData.templatePath"}},[a("el-option",{attrs:{label:"默认模板",value:"默认模板"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型：",prop:"productTypeId"}},[a("el-select",{attrs:{filterable:""},model:{value:e.formData.productTypeId,callback:function(t){e.$set(e.formData,"productTypeId",t)},expression:"formData.productTypeId"}},e._l(e.productTypeItems,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"cates-logo",attrs:{label:"分类图标：",prop:"resourcesSpaceId"}},[e.status?a("cms-picture-zone",{model:{value:e.formData.resourcesSpaceId,callback:function(t){e.$set(e.formData,"resourcesSpaceId",t)},expression:"formData.resourcesSpaceId"}},[a("cms-button",{attrs:{size:"small",type:"info",icon:"correlation"}},[e._v("选择图标")])],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"分类页标题：",prop:"cateTitle"}},[a("el-input",{attrs:{maxlength:"150"},model:{value:e.formData.cateTitle,callback:function(t){e.$set(e.formData,"cateTitle",t)},expression:"formData.cateTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类页关键字：",prop:"cateKewords"}},[a("el-input",{attrs:{maxlength:"255"},model:{value:e.formData.cateKewords,callback:function(t){e.$set(e.formData,"cateKewords",t)},expression:"formData.cateKewords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类页描述：",prop:"cateDescription"}},[a("el-input",{attrs:{maxlength:"255",type:"textarea",rows:4},model:{value:e.formData.cateDescription,callback:function(t){e.$set(e.formData,"cateDescription",t)},expression:"formData.cateDescription"}})],1)],1),e._v(" "),a("div",{staticClass:"cms-form-footer"},[a("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/productCategory/save",expression:"'/productCategory/save'"},{name:"color",rawName:"v-color"}],on:{click:function(t){e.save(!1)}}},[e._v("保存并新增")]),e._v(" "),a("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/productCategory/save",expression:"'/productCategory/save'"},{name:"color",rawName:"v-color"}],on:{click:function(t){e.save(!0)}}},[e._v("保存")]),e._v(" "),a("cms-button",{attrs:{type:"rest"},on:{click:e.rest}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},u=a("C7Lr")(m,p,!1,null,null,null);t.default=u.exports}});
//# sourceMappingURL=217.21b72138e21c614af074.js.map
webpackJsonp([174],{"5FNO":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("aA9S"),n=i.n(a),s=i("QkjJ"),r={name:"",beginTime:"",endTime:"",promoteType:"",size:10,page:"1"},o={mixins:[i("5HJ5").a],data:function(){return{queryParams:n()({},r)}},methods:{setTimer:function(e){this.queryParams.beginTime=e[0],this.queryParams.endTime=e[1],this.getTableData(s.c,this.queryParams)},deleteData:function(e){this.deleteTableData(s.a,e)},deleteDatas:function(e){this.deleteTableDatas(s.a,e)},canAdjust:function(e){return!((new Date).getTime()>e.rule.signBeginTime)},overAdjust:function(e){var t=(new Date).getTime();return t>e.rule.signEndTime||t<e.rule.signBeginTime}},created:function(){this.getTableData(s.c,this.queryParams)}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cms-list-layout"},[i("cms-prompt",[i("li",[e._v("显示所有的平台活动信息")])]),e._v(" "),i("section",{staticClass:"cms-list-query"},[i("div",{staticClass:"query-group"},[i("label",[e._v("活动名称")]),e._v(" "),i("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),e._v(" "),i("div",{staticClass:"query-group"},[i("label",[e._v("活动时间")]),e._v(" "),i("cms-picker",{on:{change:e.setTimer}})],1),e._v(" "),i("div",{staticClass:"query-group"},[i("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:e.query}},[e._v("查询")])],1)]),e._v(" "),i("cms-sticky",[i("section",{staticClass:"cms-batch"},[i("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/activity/save",expression:"'/activity/save'"}],attrs:{icon:"add",type:"success",size:"small"},on:{click:function(t){e.$routerLink("/activity/save","save")}}},[e._v("新增")]),e._v(" "),i("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/activity/delete",expression:"'/activity/delete'"}],attrs:{icon:"error",type:"error",size:"small"},on:{click:function(t){e.deleteDatas(e.ids)}}},[e._v("批量删除")])],1)]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.getCheckItems,"row-click":e.checkRows}},[i("el-table-column",{attrs:{type:"selection",width:"46",fixed:"left"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"活动名称","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"text-overflow",attrs:{title:t.row.name}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"discountAmount",label:"活动时间","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$moment(t.row.promoteBeginTime,"YYYY-MM-DD"))+" 至 "+e._s(e.$moment(t.row.promoteEndTime,"YYYY-MM-DD")))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"discountAmount",label:"报名开始时间","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[t.row.rule?i("div",[e._v(e._s(e.$moment(t.row.rule.signBeginTime,"YYYY-MM-DD"))+" 至 "+e._s(e.$moment(t.row.rule.signEndTime,"YYYY-MM-DD")))]):i("div",{staticStyle:{"text-align":"center"}},[e._v("-")])])}}])}),e._v(" "),i("el-table-column",{attrs:{label:"报名商家"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[i("span",{staticClass:"link",on:{click:function(i){e.$routerLink("/activity/store/list","list",{promoteId:t.row.id,name:t.row.name,signEndTime:t.row.rule.signEndTime})}}},[e._v("查看")])])}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作选项",width:"240",fixed:"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[e.canAdjust(t.row)?i("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/activity/update",expression:"'/activity/update'"}],attrs:{icon:"edit",size:"small",type:"info"},on:{click:function(i){i.stopPropagation(),e.$routerLink("/activity/update","update",{id:t.row.id})}}},[e._v("修改")]):e._e(),e._v(" "),e.overAdjust(t.row)?i("cms-button",{directives:[{name:"prem",rawName:"v-prem",value:"/activity/delete",expression:"'/activity/delete'"}],attrs:{icon:"error",size:"small",type:"info"},on:{click:function(i){i.stopPropagation(),e.deleteData(t.row.id)}}},[e._v("删除")]):e._e()],1)}}])})],1),e._v(" "),i("cms-pagination",{attrs:{total:e.total},on:{change:e.getPage}})],1)},staticRenderFns:[]};var c=i("C7Lr")(o,l,!1,function(e){i("pym5")},null,null);t.default=c.exports},pym5:function(e,t){}});
//# sourceMappingURL=174.0f1903a7b934bdbcad68.js.map
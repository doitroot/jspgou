webpackJsonp([147],{Tx98:function(e,r){},xgpa:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("aA9S"),o=t.n(a),s=t("m2ya"),i=t("x1ym"),m=t("lcoF"),l=t("zzd2"),n={roleName:"",remark:"",menuid:[]},u={mixins:[m.a],components:{roleTree:s.a},data:function(){return{roleStatus:!0,formData:o()({},n),rules:{roleName:[i.a.required("请填写角色名"),i.a.len(1,10)],remark:[i.a.required("请填写角色描述"),i.a.max(140,"描述最大长度为140个字符")],menuid:[i.a.required("至少选择一个权限","change")]}}},methods:{getFormData:function(e){var r=this;Object(l.b)({id:e}).then(function(e){r.formData=e.data,r.formData.menuid=e.data.menus.map(function(e){return e.id})})},update:function(){this.formData.menuid=this.$refs.role.getPermsInfo().map(function(e){return e.id}),0!==this.formData.menuid.length?(this.$refs.rule.clearValidate(),this.updateForm(l.e,this.formData,"/role","list")):this.$errorMessage("至少选择一个权限")},reset:function(){var e=this;this.getFormData(this.$route.query.id),this.roleStatus=!1,setTimeout(function(){e.roleStatus=!0},1)}},created:function(){this.getFormData(this.$route.query.id)}},c={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("cms-breadcrumb",{attrs:{to:"/role",type:"list"},on:{click:e.rest}},[t("li",[e._v(e._s(e.$route.name))])]),e._v(" "),t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:!1}},[t("li",[e._v("可进行添加修改角色管理员，维护管理员权限")])]),e._v(" "),t("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[t("el-form-item",{attrs:{label:"角色名",prop:"roleName",error:e.errorMessage.roleName}},[t("el-input",{ref:"first",attrs:{autofocus:!0},model:{value:e.formData.roleName,callback:function(r){e.$set(e.formData,"roleName",r)},expression:"formData.roleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"描述",prop:"remark",error:e.errorMessage.remark}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:3}},model:{value:e.formData.remark,callback:function(r){e.$set(e.formData,"remark",r)},expression:"formData.remark"}})],1),e._v(" "),t("el-form-item",{ref:"rule",attrs:{label:"权限设置",prop:"menuid",error:e.errorMessage.menuid}},[e.roleStatus?t("role-tree",{ref:"role",attrs:{menuIds:e.formData.menuid}}):e._e()],1)],1),e._v(" "),t("div",{staticClass:"cms-form-footer"},[t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:e.update}},[e._v("保存修改")])],1)],1)],1)},staticRenderFns:[]};var f=t("C7Lr")(u,c,!1,function(e){t("Tx98")},null,null);r.default=f.exports}});
//# sourceMappingURL=147.064d66db991d5ece93f4.js.map
webpackJsonp([71],{"99rb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),r=a.n(s),n=a("5HJ5"),l=a("Dvzh"),o={page:1,size:10,source:"",orderType:"",status:" ",payMode:"",orderNum:"",storeName:"",orderTimeBegin:"",orderTimeEnd:"",memberName:""},i={name:"orderList",mixins:[n.a],data:function(){return{orderStatus:[{label:"待付款 ",value:"1"},{label:"待发货",value:"2"},{label:"待收货",value:"3"},{label:"已完成 ",value:"4"},{label:"已取消",value:"5"}],queryParams:r()({},o)}},filters:{payModeFilter:function(e){if(""===e)return"";return["","支付宝","微信","银联","余额"][e]}},methods:{cancel:function(e){var t=this;this.$confirm("确定取消该订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.a)({orderId:e}).then(function(e){200===e.code?(t.$successMessage("取消成功"),t.getTableData(l.d,t.queryParams)):t.$errorMessage(e.message)})})},sync:function(e){var t=this;this.$confirm("是否查询交易结果?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.e)({orderId:e}).then(function(e){200===e.code?(t.$successMessage("同步成功"),t.getTableData(l.d,t.queryParams)):t.$errorMessage(e.message)})})},changeOrderStatus:function(e){this.query()},setTimer:function(e){this.queryParams.orderTimeBegin=e[0],this.queryParams.orderTimeEnd=e[1],this.query()},showAttr:function(e){if(""===e)return"";var t="";return JSON.parse(e).forEach(function(e){var a=e.name+":"+e.value+"  ";t+=a}),t}},created:function(){this.getTableData(l.d,this.queryParams)}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cms-list-layout"},[a("cms-prompt",{attrs:{collapse:"true"}},[a("li",[e._v(" 显示商城所有的订单，涵盖平台自营和第三方商家订单")]),e._v(" "),a("li",[e._v("自动同步只能针对待付款订单操作，该操作自动同步对应的第三方支付机构的支付结果")])]),e._v(" "),a("section",{staticClass:"cms-list-query"},[a("div",{staticClass:"query-group"},[a("label",[e._v("订单编号")]),e._v(" "),a("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.orderNum,callback:function(t){e.$set(e.queryParams,"orderNum",t)},expression:"queryParams.orderNum"}})],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("店铺名称")]),e._v(" "),a("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.storeName,callback:function(t){e.$set(e.queryParams,"storeName",t)},expression:"queryParams.storeName"}})],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("买家账户")]),e._v(" "),a("el-input",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.query(t):null}},model:{value:e.queryParams.memberName,callback:function(t){e.$set(e.queryParams,"memberName",t)},expression:"queryParams.memberName"}})],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("订单状态")]),e._v(" "),a("el-select",{on:{change:e.query},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[a("el-option",{attrs:{label:"全部",value:" "}}),e._v(" "),e._l(e.orderStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("订单类型")]),e._v(" "),a("el-select",{on:{change:e.query},model:{value:e.queryParams.orderType,callback:function(t){e.$set(e.queryParams,"orderType",t)},expression:"queryParams.orderType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"实物订单",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"虚拟订单",value:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("支付方式")]),e._v(" "),a("el-select",{on:{change:e.query},model:{value:e.queryParams.payMode,callback:function(t){e.$set(e.queryParams,"payMode",t)},expression:"queryParams.payMode"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"银联",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"支付宝",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"微信",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"余额",value:"4"}})],1)],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("订单来源")]),e._v(" "),a("el-select",{on:{change:e.query},model:{value:e.queryParams.source,callback:function(t){e.$set(e.queryParams,"source",t)},expression:"queryParams.source"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"pc端",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"手机端",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"APP",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"公众号 ",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"小程序",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"平板",value:"6"}})],1)],1),e._v(" "),a("div",{staticClass:"query-group"},[a("label",[e._v("下单时间")]),e._v(" "),a("cms-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.setTimer}})],1),e._v(" "),a("div",{staticClass:"query-group"},[a("cms-button",{attrs:{size:"small",colorPicker:!0},on:{click:e.query}},[e._v("查询")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.changeOrderStatus},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[a("el-tab-pane",{attrs:{label:"所有订单",name:" "}}),e._v(" "),e._l(e.orderStatus,function(e){return a("el-tab-pane",{key:e.value,attrs:{label:e.label,name:e.value}})})],2),e._v(" "),a("table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-table"},[e._m(0),e._v(" "),e._l(e.tableData,function(t,s){return a("tbody",{key:s},[a("div",{staticStyle:{width:"100%",height:"25px",background:"#fff"}}),e._v(" "),a("tr",{staticClass:"order-header"},[a("td",{staticStyle:{border:"1px solid #EBEEF5"},attrs:{colspan:"7"}},[a("span",{staticStyle:{"margin-left":"15px"}},[e._v("订单编号：")]),e._v(" "),a("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(t.orderCode))]),e._v(" "),a("span",[e._v("下单时间:")]),e._v(" "),a("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(e.$moment(t.orderTime)))]),e._v(" "),a("div",{staticClass:"stroe-name"},[a("i",{staticClass:"iconfont icon-dianpu"}),e._v(" "),t.store?a("span",{staticClass:"img-span"},[e._v(e._s(t.store.storeName))]):e._e()])])]),e._v(" "),e._l(t.items,function(s,r){return a("tr",{key:s.id},[a("td",{staticStyle:{"border-bottom":"1px solid #EBEEF5","border-left":"1px solid #EBEEF5",padding:"15px"}},[t.items&&t.items.length>0?a("div",{staticStyle:{overflow:"hidden","min-height":"82px"}},[s.productInfo?a("img",{staticClass:"product-img",attrs:{src:e.$cms.filterUrl(s.productInfo.coverImageUrl)}}):e._e(),e._v(" "),a("div",{staticClass:"product-title"},[s.productInfo?a("h3",{staticClass:"title-h3"},[e._v(e._s(s.productInfo.productName))]):e._e(),e._v(" "),s.productInfo?a("p",{staticClass:"title-p",staticStyle:{"margin-top":"10px"}},[e._v("\n                "+e._s(e.showAttr(s.productInfo.skuAttr))+"\n              ")]):e._e()])]):e._e()]),e._v(" "),a("td",{staticClass:"order-prices"},[t.items&&t.items.length>0?a("span",[e._v("￥"+e._s(e.$cms.float(s.productPrice))+" ")]):e._e()]),e._v(" "),a("td",{staticClass:"order-count"},[t.items&&t.items.length>0?a("span",[e._v("\n            x "+e._s(s.productCount)+"\n          ")]):e._e()]),e._v(" "),0==r?a("td",{staticClass:"order-user",attrs:{rowspan:t.items.length}},[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t.member.nickname?a("p",[e._v(e._s(t.member.nickname))]):e._e(),e._v(" "),t.member.nickname?e._e():a("p",[e._v(e._s(t.member.username))]),e._v(" "),a("p",[e._v(e._s(t.orderExt.customerAddress))]),e._v(" "),a("p",[e._v(e._s(t.member.phone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont  icon-yonghutouxiang"}),e._v(" "),t.member.nickname?a("span",{staticClass:"admin-p"},[e._v(e._s(t.member.nickname))]):e._e(),e._v(" "),t.member.nickname?e._e():a("span",{staticClass:"admin-p"},[e._v(e._s(t.member.username))])])])],1):e._e(),e._v(" "),0==r?a("td",{staticClass:"tr-price",attrs:{rowspan:t.items.length}},[a("p",{staticClass:"await",staticStyle:{"marign-top":"10px"}},[e._v("￥"+e._s(e.$cms.float(t.orderPayAmount)))]),e._v(" "),a("p",{staticStyle:{color:"#999999"}},[e._v("(含运费：￥"+e._s(e.$cms.float(t.orderFreight))+")")]),e._v(" "),a("p",[e._v("\n             "+e._s(e._f("payModeFilter")(t.payMode))+"\n          ")])]):e._e(),e._v(" "),0==r?a("td",{staticClass:"order-status",attrs:{rowspan:t.items.length}},[a("div",{staticClass:"await"},[1==t.status?a("span",[e._v("待付款")]):e._e(),e._v(" "),2==t.status?a("span",[e._v("待发货")]):e._e(),e._v(" "),3==t.status?a("span",[e._v("待收货")]):e._e(),e._v(" "),4==t.status?a("span",[e._v("已完成")]):e._e(),e._v(" "),5==t.status?a("span",[e._v("已取消")]):e._e(),e._v(" "),6==t.status?a("span",[e._v("超时交易关闭")]):e._e()]),e._v(" "),a("p",{staticClass:"link",staticStyle:{color:"#4196E4",margin:"10px 0 10px 0",cursor:"pointer"},on:{click:function(a){e.$routerLink("/orderList/view","view",{id:t.id})}}},[e._v("\n            订单详情\n          ")])]):e._e(),e._v(" "),0==r?a("td",{staticClass:"order-operation",attrs:{rowspan:t.items.length}},[1==t.status?a("div",[a("cms-button",{attrs:{slot:"reference",type:"info",icon:"warning"},on:{click:function(a){e.cancel(t.id)}},slot:"reference"},[e._v("取消")])],1):e._e(),e._v(" "),1==t.status?a("div",{staticStyle:{"margin-top":"10px"}},[a("cms-button",{attrs:{type:"rest",icon:"rest"},on:{click:function(a){e.sync(t.id)}}},[e._v("查询交易结果")])],1):e._e()]):e._e()])})],2)})],2),e._v(" "),a("cms-pagination",{attrs:{total:e.total},on:{change:e.getPage}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("商品 ")]),e._v(" "),a("th",[e._v("单价")]),e._v(" "),a("th",[e._v("数量")]),e._v(" "),a("th",[e._v("收货人")]),e._v(" "),a("th",[e._v("实收款")]),e._v(" "),a("th",[e._v("订单状态")]),e._v(" "),a("th",[e._v("操作选项")])])}]};var c=a("C7Lr")(i,u,!1,function(e){a("9vOD")},"data-v-ddf4fa6a",null);t.default=c.exports},"9vOD":function(e,t){}});
//# sourceMappingURL=71.9f68cdca1bb9652cec5a.js.map
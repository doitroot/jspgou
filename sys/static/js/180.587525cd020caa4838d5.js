webpackJsonp([180],{Gf3n:function(e,a){},sOPr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("aA9S"),s=t.n(r),o=t("x1ym"),n=t("lcoF");function l(e){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t="",r=0;r<e;r++){t+=a[Math.floor(62*Math.random())]}return t}var i=t("+FNC"),m={name:"",logo_id:"",appId:"",appSecret:"",messageDecryptKey:"",messageValidateToken:""},c={name:"wxConfig",mixins:[n.a],data:function(){return{baseUrl:"{domain}",formData:s()({},m),rules:{name:[o.a.required()],appId:[o.a.required()],appSecret:[o.a.required()],messageValidateToken:[o.a.required(),o.a.english(),o.a.$length(16)],messageDecryptKey:[o.a.required(),o.a.english(),o.a.$length(43)]}}},methods:{createMessageValidateToken:function(){this.formData.messageValidateToken=l(16)},createMessageDecryptKey:function(){this.formData.messageDecryptKey=l(43)},getFormData:function(){var e=this;Object(i.C)().then(function(a){200===a.code&&null!==a.data&&(e.formData=a.data)})},saveData:function(){var e=this;this.formData.id&&""!==this.formData.id?this.$refs.form.validate(function(a){a&&(e.loading=!0,Object(i.E)(e.formData).then(function(a){e.loading=!1,200===a.code?e.$alert("配置参数更新成功，请等待10分钟左右微信服务器成功推送component_verify_ticket后才能正常使用系统内微信菜单相关功能！","系统提示",{confirmButtonText:"确定",callback:function(e){}}):(e.loading=!1,e.$errorMessage(a.code+":"+a.message))}))}):this.$refs.form.validate(function(a){a&&(e.loading=!0,Object(i.D)(e.formData).then(function(a){e.loading=!1,200===a.code?e.$alert("配置参数更新成功，请等待10分钟左右微信服务器成功推送component_verify_ticket后才能正常使用系统内微信菜单相关功能！","系统提示",{confirmButtonText:"确定",callback:function(e){}}):(e.loading=!1,e.$errorMessage(a.code+":"+a.message))}))})}},created:function(){this.getFormData()}},p={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"cms-form-layout"},[t("cms-prompt",{attrs:{collapse:"true"}},[t("li",[e._v(" 设置微信开放平台应用，设置成功之后即可使用授权方式接入微信公众号")]),e._v(" "),t("li",[e._v(" 选项不可填写的为系统与微信开放平台对接的固定信息，不能修改，可将自动生成好的信息直接填入微信开放平台应用中")])]),e._v(" "),t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"210px"}},[t("h3",{staticClass:"cms-segmentation"},[e._v("\n      应用基本信息\n    ")]),e._v(" "),t("el-form-item",{attrs:{label:"名称",prop:"name",error:e.errorMessage.name}},[t("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"AppId",prop:"appId",error:e.errorMessage.appId}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.formData.appId,callback:function(a){e.$set(e.formData,"appId",a)},expression:"formData.appId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"AppSecret",prop:"appSecret",error:e.errorMessage.appSecret}},[t("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.appSecret,callback:function(a){e.$set(e.formData,"appSecret",a)},expression:"formData.appSecret"}})],1),e._v(" "),t("h3",{staticClass:"cms-segmentation"},[e._v("\n      授权流程相关\n    ")]),e._v(" "),t("el-form-item",{attrs:{label:"授权发起页域名",prop:"smtpService",error:e.errorMessage.smtpService}},[t("span",{staticClass:"form-text"},[e._v(" "+e._s(e.baseUrl))]),e._v(" "),t("div",{staticClass:"gray"},[e._v("{domain}为程序部署域名，在创建微信开放平台应用时，请将该地址中{domain}更改成实际访问域名然后再填入对应的选项中")])]),e._v(" "),t("el-form-item",{attrs:{label:"授权事件接收URL",prop:"smtpPort",error:e.errorMessage.smtpPort}},[t("span",{staticClass:"form-text"},[e._v(e._s(e.baseUrl)+"/weChat/authCallBack")]),e._v(" "),t("div",{staticClass:"gray"},[e._v("{domain}为程序部署域名，在创建微信开放平台应用时，请将该地址中{domain}更改成实际访问域名然后再填入对应的选项中")])]),e._v(" "),t("h3",{staticClass:"cms-segmentation"},[e._v("\n      授权后实现业务\n    ")]),e._v(" "),t("el-form-item",{attrs:{label:"消息校验Token",prop:"messageValidateToken",error:e.errorMessage.messageValidateToken}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.formData.messageValidateToken,callback:function(a){e.$set(e.formData,"messageValidateToken",a)},expression:"formData.messageValidateToken"}},[t("el-button",{attrs:{slot:"append"},on:{click:e.createMessageValidateToken},slot:"append"},[e._v("自动生成")])],1),e._v(" "),t("span",{staticClass:"gray"},[e._v("只能是字母和数字，如不清楚如何获取规定字符串，请点击自动生成，再将生成字符串填入微信开放平台")])],1),e._v(" "),t("el-form-item",{attrs:{label:"消息加解密Key",prop:"messageDecryptKey",error:e.errorMessage.messageDecryptKey}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.formData.messageDecryptKey,callback:function(a){e.$set(e.formData,"messageDecryptKey",a)},expression:"formData.messageDecryptKey"}},[t("el-button",{attrs:{slot:"append"},on:{click:e.createMessageDecryptKey},slot:"append"},[e._v("自动生成")])],1),e._v(" "),t("span",{staticClass:"gray"},[e._v("必须是长度为43位的字符串，只能是字母和数字，如不清楚如何获取规定字符串，请点击自动生成，再将生成字符串填入微信开放平台")])],1),e._v(" "),t("el-form-item",{attrs:{label:"消息与事件接收URL",prop:"testemail",error:e.errorMessage.testemail}},[t("span",{staticClass:"form-text"},[e._v(" "+e._s(e.baseUrl)+"/weChat/keyword/reply/$APPID$")]),e._v(" "),t("div",{staticClass:"gray"},[e._v("{domain}为程序部署域名，在创建微信开放平台应用时，请将该地址中{domain}更改成实际访问域名然后再填入对应的选项中（注：$APPID$不需要替换）")])]),e._v(" "),t("el-form-item",{attrs:{label:"公众号开发域名",prop:"testemail",error:e.errorMessage.testemail}},[t("span",{staticClass:"form-text"},[e._v(" "+e._s(e.baseUrl))]),e._v(" "),t("div",{staticClass:"gray"},[e._v("domain}为程序部署域名，在创建微信开放平台应用时，请将该地址中{domain}更改成实际访问域名然后再填入对应的选项中")])])],1),e._v(" "),t("div",{staticClass:"cms-form-footer"},[t("cms-button",{directives:[{name:"color",rawName:"v-color"}],on:{click:function(a){e.saveData()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var d=t("C7Lr")(c,p,!1,function(e){t("Gf3n")},null,null);a.default=d.exports}});
//# sourceMappingURL=180.587525cd020caa4838d5.js.map
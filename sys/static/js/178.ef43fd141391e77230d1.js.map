{"version":3,"sources":["webpack:///src/views/platform/permissions/api/edit.vue","webpack:///./src/views/platform/permissions/api/edit.vue?88d4","webpack:///./src/views/platform/permissions/api/edit.vue"],"names":["defaultData","requestMethod","apiName","apiUrl","platformType","apiClassCode","useScene","edit","mixins","mixins_form","data","_this","this","methodItems","id","name","formData","assign_default","rules","required","custom","rule","value","callback","Object","apiManger","url","then","res","Error","isSuper","menuid","computed","typeList","$getDictData","methods","getFormData","_this2","code","update","updateForm","reset","$route","query","$refs","form","resetFields","created","api_edit","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","attrs","to","type","params","on","click","rest","_v","_s","staticClass","collapse","ref","model","label-width","label","prop","error","errorMessage","$$v","$set","maxlength","roleName","_l","item","index","key","autosize","minRows","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/178.ef43fd141391e77230d1.js","sourcesContent":["<template>\n  <div v-loading='loading'>\n    <cms-breadcrumb to=\"/apiMange\" type='list' @click=\"rest\" :params='{platformType:$route.query.platformType}'>\n      <li>{{$route.name}}</li>\n    </cms-breadcrumb>\n    <div class=\"cms-form-layout\">\n      <cms-prompt :collapse='false'>\n        <li>可进行api的修改</li>\n      </cms-prompt>\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\">\n        <el-form-item label=\"平台\" prop=\"platformType\" :error='errorMessage.platformType'>\n           <el-select v-model=\"formData.platformType\">\n             <el-option label=\"平台端\" :value=\"1\"></el-option> \n             <el-option label=\"商家端\" :value=\"2\"></el-option> \n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"API名称\" prop=\"apiName\" :error='errorMessage.apiName'>\n          <el-input v-model=\"formData.apiName\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"API地址\" prop=\"apiUrl\" :error='errorMessage.roleName'>\n          <el-input v-model=\"formData.apiUrl\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"请求方式\" prop=\"requestMethod\" :error='errorMessage.requestMethod'>\n          <el-radio-group v-model=\"formData.requestMethod\">\n            <el-radio v-for=\"(item,index) in methodItems\" :key=\"index\" :label=\"item.id\">{{item.name}}</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"使用场景\" prop=\"useScene\" :error='errorMessage.useScene'>\n          <el-input v-model=\"formData.useScene\" type=\"textarea\" :autosize=\"{ minRows: 3}\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"cms-form-footer\">\n        <cms-button @click=\"update()\" v-color>保存修改</cms-button>\n        <cms-button type='rest' @click=\"reset\">重置</cms-button>\n        <!-- <cms-button type='rest' @click=\"test\">mock测试</cms-button> -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport rules from './../../../../rules/index.js'\nimport form from '@/mixins/form.js'\nimport {\n  apiManagerGet,\n  apiManagerUpdate,\n  apiCheckUrl\n} from './../../../../api/admin/apiManger.js'\nvar defaultData = {\n  requestMethod: 1,\n  apiName: '',\n  apiUrl: '',\n  platformType: '',\n  apiClassCode: '',\n  useScene: ''\n}\nexport default {\n  mixins: [form],\n  data() {\n    var ischeckRouting = (rule, value, callback) => { // 验证api路径是否存在\n      apiCheckUrl({\n        url: value,\n        id: this.formData.id\n      }).then(res => {\n        if (res.data) {\n          callback()\n        } else {\n          callback(new Error('API地址已存在'))\n        }\n      })\n    }\n    return {\n      methodItems: [\n        // 请求类型\n        { id: 1, name: 'GET' },\n        { id: 2, name: 'POST' },\n        { id: 3, name: 'DELETE' },\n        { id: 4, name: 'UPDATE' },\n        { id: 5, name: 'PUT' }\n      ],\n      formData: Object.assign({}, defaultData),\n      rules: {\n        platformType: [rules.required('必须选择一个平台')],\n        apiName: [rules.required('请填写API名称')],\n        apiUrl: [rules.required('请填写API地址'), rules.custom(ischeckRouting)],\n        requestMethod: [rules.required()],\n        isSuper: [rules.required()],\n        menuid: []\n      }\n    }\n  },\n  computed: {\n    typeList() {\n      return this.$getDictData('systemType') // 获取字典中的平台数据\n    }\n  },\n  methods: {\n    getFormData(id) {\n      apiManagerGet({ id: id }).then(res => {\n        if (res.code === 200) {\n          this.formData = res.data\n        }\n      })\n    },\n    update() {\n      this.updateForm(apiManagerUpdate, this.formData, '/apiMange', 'list', {\n        platformType: this.formData.platformType\n      })\n    },\n    reset() {\n      this.getFormData(this.$route.query.id)\n      this.$refs.form.resetFields()\n    }\n  },\n  created() {\n    this.getFormData(this.$route.query.id)\n  }\n}\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/permissions/api/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('cms-breadcrumb',{attrs:{\"to\":\"/apiMange\",\"type\":\"list\",\"params\":{platformType:_vm.$route.query.platformType}},on:{\"click\":_vm.rest}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('cms-prompt',{attrs:{\"collapse\":false}},[_c('li',[_vm._v(\"可进行api的修改\")])]),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"}},[_c('el-form-item',{attrs:{\"label\":\"平台\",\"prop\":\"platformType\",\"error\":_vm.errorMessage.platformType}},[_c('el-select',{model:{value:(_vm.formData.platformType),callback:function ($$v) {_vm.$set(_vm.formData, \"platformType\", $$v)},expression:\"formData.platformType\"}},[_c('el-option',{attrs:{\"label\":\"平台端\",\"value\":1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"商家端\",\"value\":2}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"API名称\",\"prop\":\"apiName\",\"error\":_vm.errorMessage.apiName}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.apiName),callback:function ($$v) {_vm.$set(_vm.formData, \"apiName\", $$v)},expression:\"formData.apiName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"API地址\",\"prop\":\"apiUrl\",\"error\":_vm.errorMessage.roleName}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.apiUrl),callback:function ($$v) {_vm.$set(_vm.formData, \"apiUrl\", $$v)},expression:\"formData.apiUrl\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"请求方式\",\"prop\":\"requestMethod\",\"error\":_vm.errorMessage.requestMethod}},[_c('el-radio-group',{model:{value:(_vm.formData.requestMethod),callback:function ($$v) {_vm.$set(_vm.formData, \"requestMethod\", $$v)},expression:\"formData.requestMethod\"}},_vm._l((_vm.methodItems),function(item,index){return _c('el-radio',{key:index,attrs:{\"label\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"使用场景\",\"prop\":\"useScene\",\"error\":_vm.errorMessage.useScene}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 3}},model:{value:(_vm.formData.useScene),callback:function ($$v) {_vm.$set(_vm.formData, \"useScene\", $$v)},expression:\"formData.useScene\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.update()}}},[_vm._v(\"保存修改\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"type\":\"rest\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-273de6db\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/permissions/api/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-273de6db\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-273de6db\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/permissions/api/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
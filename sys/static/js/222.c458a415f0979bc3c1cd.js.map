{"version":3,"sources":["webpack:///src/views/platform/setting/region/edit.vue","webpack:///./src/views/platform/setting/region/edit.vue?b073","webpack:///./src/views/platform/setting/region/edit.vue"],"names":["defaultData","id","areaCode","areaName","parentIds","parentId","sortNum","remark","areaDictCode","edit","mixins","mixins_form","data","_this","this","options","props","value","label","children","formData","assign_default","rules","required","len","number","custom","rule","callback","Object","setting_area","$route","query","then","res","Error","menuid","methods","getFormData","_this2","loading","nodeIds","length","pop","getMenuTree","_this3","root","forEach","v","disabled","childs","r","c","concat","update","_this4","$refs","validate","valid","params","$cms","deepCopy","code","$routerLink","$successMessage","$errorMessage","message","catch","getAll","reset","form","clearValidate","created","region_edit","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","expression","attrs","to","type","_v","_s","staticClass","ref","model","label-width","prop","error","errorMessage","filterable","change-on-select","$$v","$set","maxlength","_n","rows","placeholder","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/222.c458a415f0979bc3c1cd.js","sourcesContent":["<!--商品分类页 图片上传没做-->\n<template>\n  <div v-loading='loading'>\n    <cms-breadcrumb to=\"/region/list\" type='list'>\n      <li>{{$route.name}}</li>\n    </cms-breadcrumb>\n    <div class=\"cms-form-layout\">\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"formData\" label-width=\"210px\">\n        <el-form-item label=\"上级区域\" prop=\"parentIds\" :error='errorMessage.parentIds'>\n          <el-cascader  filterable :options=\"options\" :props=\"props\" :change-on-select='true'\n           v-model=\"formData.parentIds\">\n          </el-cascader>\n        </el-form-item>\n        <el-form-item label=\"区域编号\" prop=\"areaCode\"  :error='errorMessage.areaCode'>\n          <el-input v-model=\"formData.areaCode\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"区域名称\" prop=\"areaName\" :error='errorMessage.areaName'>\n          <el-input v-model=\"formData.areaName\" maxlength=\"100\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"区域类型\" prop=\"areaDictCode\" :error='errorMessage.areaDictCode'>\n          <el-radio-group v-model=\"formData.areaDictCode\">\n            <el-radio :label=\"'1'\">省/直辖市</el-radio>\n            <el-radio :label=\"'2'\">地市</el-radio>\n            <el-radio :label=\"'3'\">区</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"排序\" prop=\"sortNum\" >\n          <el-input v-model.number=\"formData.sortNum\" maxlength=\"2\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"remark\">\n          <el-input type=\"textarea\" :rows=\"5\" placeholder=\"请输入内容\" v-model=\"formData.remark\" maxlength=\"100\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"cms-form-footer\">\n         <cms-button  @click=\"update(false)\" v-color >修改</cms-button>\n\n        <cms-button type='rest' @click=\"reset\">重置</cms-button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport rules from '@/rules'\nimport form from '@/mixins/form.js'\nimport { areaTreeArea, areaRegionGetAreaCode, areaRegionGet, areaRegionUpdate } from '@/api/setting/area.js'\nvar defaultData = {\n  'id': '',\n  'areaCode': '',\n  'areaName': '',\n  parentIds: [],\n  'parentId': null,\n  'sortNum': 10,\n  'remark': '',\n  'areaDictCode': ''\n}\nexport default {\n  mixins: [form],\n  data() {\n    var ischeckRouting = (rule, value, callback) => {\n      // 验证区域code唯一\n      areaRegionGetAreaCode({\n        id: this.$route.query.id,\n        areaCode: value\n      }).then(res => {\n        if (res.data) {\n          callback(new Error('区域编码已存在，不允许重复添加'))\n        } else {\n          callback()\n        }\n      })\n    }\n    return {\n      options: [],\n      props: {\n        value: 'id',\n        label: 'areaName',\n        children: 'childs'\n      },\n      formData: Object.assign({}, defaultData),\n      rules: {\n        // parentIds: [rules.required('必须选择一个上级区域')],\n        areaName: [rules.required('此项必填'), rules.len(1, 20)],\n        areaCode: [rules.required('必填'), rules.len(1, 10), rules.number(), rules.custom(ischeckRouting)],\n        menuid: [rules.required()],\n        areaDictCode: [rules.required('请选择区域类型', 'change')],\n        sortNum: [rules.required('此项必填'), rules.number()]\n      }\n    }\n  },\n  methods: {\n    getFormData(id) { // 获取分类信息\n      this.loading = true\n      areaRegionGet({ id: id }).then(res => {\n        this.formData = res.data\n        if (res.data.nodeIds.length <= 1) {\n          this.formData.parentIds = []\n          this.loading = false\n        } else {\n          res.data.nodeIds.pop() // 删除了最后一项只留上层区域\n          this.formData.parentIds = res.data.nodeIds\n          this.loading = false\n        }\n      })\n    },\n    getMenuTree() { // 获取菜单节点\n      areaTreeArea().then(\n        res => {\n          const root = res.data\n          root.forEach(v => {\n            if (v.id === this.$route.query.id) {\n              v.disabled = true\n            } else {\n              if (v.childs) {\n                v.childs.forEach(r => {\n                  if (r.id === this.$route.query.id) {\n                    r.disabled = true\n                  } else {\n                    if (r.childs) {\n                      r.childs.forEach(c => {\n                        if (c.id === this.$route.query.id) {\n                          c.disabled = true\n                        }\n                      })\n                    }\n                  }\n                })\n              }\n            }\n          })\n          this.options = root.concat()\n        }\n      )\n    },\n    update() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          if (this.formData.parentIds.length > 0) {\n            this.formData.parentId = this.formData.parentIds[this.formData.parentIds.length - 1]\n          } else {\n            delete this.formData.parentId\n          }\n          delete this.formData.nodeIds\n          delete this.formData.parentIds\n          var params = this.$cms.deepCopy(this.formData)\n          this.loading = true\n          areaRegionUpdate(params)\n            .then(res => {\n              this.loading = false\n              if (res.code === 200) {\n                this.$routerLink('/region/list', 'list')\n                this.$successMessage('修改成功')\n              } else {\n                this.$errorMessage(res.message)\n              }\n            })\n            .catch(() => {\n              this.loading = false\n            })\n        }\n      })\n    },\n    getAll() {\n      this.getFormData(this.$route.query.id)\n      this.getMenuTree()\n    },\n    reset() {\n      this.getAll()\n      this.$refs.form.clearValidate()\n    }\n  },\n  created() {\n    this.formData = Object.assign({}, defaultData)\n    this.getAll()\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/setting/region/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('cms-breadcrumb',{attrs:{\"to\":\"/region/list\",\"type\":\"list\"}},[_c('li',[_vm._v(_vm._s(_vm.$route.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-layout\"},[_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.formData,\"label-width\":\"210px\"}},[_c('el-form-item',{attrs:{\"label\":\"上级区域\",\"prop\":\"parentIds\",\"error\":_vm.errorMessage.parentIds}},[_c('el-cascader',{attrs:{\"filterable\":\"\",\"options\":_vm.options,\"props\":_vm.props,\"change-on-select\":true},model:{value:(_vm.formData.parentIds),callback:function ($$v) {_vm.$set(_vm.formData, \"parentIds\", $$v)},expression:\"formData.parentIds\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域编号\",\"prop\":\"areaCode\",\"error\":_vm.errorMessage.areaCode}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.areaCode),callback:function ($$v) {_vm.$set(_vm.formData, \"areaCode\", $$v)},expression:\"formData.areaCode\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域名称\",\"prop\":\"areaName\",\"error\":_vm.errorMessage.areaName}},[_c('el-input',{attrs:{\"maxlength\":\"100\"},model:{value:(_vm.formData.areaName),callback:function ($$v) {_vm.$set(_vm.formData, \"areaName\", $$v)},expression:\"formData.areaName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域类型\",\"prop\":\"areaDictCode\",\"error\":_vm.errorMessage.areaDictCode}},[_c('el-radio-group',{model:{value:(_vm.formData.areaDictCode),callback:function ($$v) {_vm.$set(_vm.formData, \"areaDictCode\", $$v)},expression:\"formData.areaDictCode\"}},[_c('el-radio',{attrs:{\"label\":'1'}},[_vm._v(\"省/直辖市\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":'2'}},[_vm._v(\"地市\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":'3'}},[_vm._v(\"区\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"sortNum\"}},[_c('el-input',{attrs:{\"maxlength\":\"2\"},model:{value:(_vm.formData.sortNum),callback:function ($$v) {_vm.$set(_vm.formData, \"sortNum\", _vm._n($$v))},expression:\"formData.sortNum\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"placeholder\":\"请输入内容\",\"maxlength\":\"100\"},model:{value:(_vm.formData.remark),callback:function ($$v) {_vm.$set(_vm.formData, \"remark\", $$v)},expression:\"formData.remark\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"cms-form-footer\"},[_c('cms-button',{directives:[{name:\"color\",rawName:\"v-color\"}],on:{\"click\":function($event){_vm.update(false)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('cms-button',{attrs:{\"type\":\"rest\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-46be46fc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/setting/region/edit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-46be46fc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/setting/region/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}